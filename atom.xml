<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>éº»ç“œåƒèœé¸Ÿ</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2020-10-24T07:17:23.608Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Joden He</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>UML ç±»å…³ç³»â€”â€”ä¾èµ–ã€å…³è”ã€èšåˆã€ç»„åˆã€æ³›åŒ–</title>
    <link href="http://yoursite.com/2020/10/24/uml/class-diagram-relationships/"/>
    <id>http://yoursite.com/2020/10/24/uml/class-diagram-relationships/</id>
    <published>2020-10-24T06:41:39.000Z</published>
    <updated>2020-10-24T07:17:23.608Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ç±»å…³ç³»æ¶‰åŠä¾èµ–ã€å…³è”ã€èšåˆã€ç»„åˆå’Œæ³›åŒ–è¿™äº”ç§å…³ç³»ï¼Œè€¦åˆåº¦ä¾æ¬¡é€’å¢ã€‚</p><p>å…³äºè€¦åˆåº¦ï¼Œå¯ä»¥ç®€å•åœ°ç†è§£ä¸ºå½“ä¸€ä¸ªç±»å‘ç”Ÿå˜æ›´æ—¶ï¼Œå¯¹å…¶ä»–ç±»é€ æˆçš„å½±å“ç¨‹åº¦ï¼Œå½±å“è¶Šå°åˆ™è€¦åˆåº¦è¶Šå¼±ï¼Œå½±å“è¶Šå¤§è€¦åˆåº¦è¶Šå¼ºã€‚</p></blockquote><h2 id="æ€ç»´å¯¼å›¾"><a href="#æ€ç»´å¯¼å›¾" class="headerlink" title="æ€ç»´å¯¼å›¾"></a>æ€ç»´å¯¼å›¾</h2><p><img src="/images/uml/class-diagram-relationships.svg" alt="ç±»å…³ç³»"></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://blog.csdn.net/k346k346/article/details/59582926" target="_blank" rel="noopener">è®¤è¯† UML ç±»å…³ç³»â€”â€”ä¾èµ–ã€å…³è”ã€èšåˆã€ç»„åˆã€æ³›åŒ–</a></p>]]></content>
    
    <summary type="html">
    
      æ€ç»´å¯¼å›¾æ€»ç»“ä¾èµ–ã€å…³è”ã€èšåˆã€ç»„åˆã€æ³›åŒ–ä¹‹é—´çš„å…³ç³»
    
    </summary>
    
      <category term="UML" scheme="http://yoursite.com/categories/UML/"/>
    
    
      <category term="UML" scheme="http://yoursite.com/tags/UML/"/>
    
  </entry>
  
  <entry>
    <title>windows ä¸‹ä»¥local systemç”¨æˆ·è¿è¡Œç¨‹åº</title>
    <link href="http://yoursite.com/2020/10/16/windows/run_with_local_system/"/>
    <id>http://yoursite.com/2020/10/16/windows/run_with_local_system/</id>
    <published>2020-10-16T13:52:00.000Z</published>
    <updated>2020-10-16T14:27:26.318Z</updated>
    
    <content type="html"><![CDATA[<h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>æœ€è¿‘åœ¨ä½¿ç”¨ windows æœåŠ¡å™¨éƒ¨ç½²å¾®æœåŠ¡çš„æ—¶å€™ï¼Œå¯åŠ¨çš„ java ç¨‹åºç»å¸¸ä¼šè¢«æ— æ•…æ€æ­»ï¼Œåé¢ç»è¿‡å¤šæ¬¡éªŒè¯ï¼Œå‘ç°æ˜¯è´¦å·è¢« sign off å¯¼è‡´ä»¥æ”¹è´¦å·å¯åŠ¨çš„ç¨‹åºä¹Ÿä¸€å¾‹è¢«æ€æ­»äº†ã€‚è¿™ä¸ªæ—¶å€™å°±æƒ³åˆ°ä¸€ä¸ªè§£å†³æ–¹æ³•ï¼ŒæŠŠ java ç¨‹åºæ³¨å†Œæˆ windows çš„æœåŠ¡è¿è¡Œå°±å¯ä»¥é¿å…è´¦å·è¢«æ³¨é”€è€Œå¯¼è‡´è¿›ç¨‹è¢«æ€æ­»çš„é—®é¢˜äº†ï¼ˆå¦‚ä½•æ³¨å†ŒæˆæœåŠ¡å¯ä»¥å‚ç…§ <a href="/2020/06/03/windows/nssm_services/">nssm æ³¨å†Œ windows æœåŠ¡</a>ï¼‰ã€‚</p><p>ç”±äºæ¶‰åŠåˆ°çš„æœåŠ¡æ¯”è¾ƒå¤šï¼Œè€Œä¸”å‰æœŸå·²ç»å®šå¥½ä½¿ç”¨è„šæœ¬å¯åœçš„æ–¹å¼è¿›è¡Œè¿ç»´äº†ï¼Œå› æ­¤å•ä¸ªæ³¨å†ŒæˆæœåŠ¡éœ€è¦èŠ±è´¹çš„æ—¶é—´æ¯”è¾ƒå¤šï¼Œä¹Ÿä¸å¤ªå¥½è¿ç»´ç®¡ç†ï¼Œé‚£ä¹ˆè¿˜å¯ä»¥é€šè¿‡ä»€ä¹ˆæ–¹å¼è§£å†³å‘¢ï¼Ÿ</p><p>é€šè¿‡è§‚å¯Ÿ windows æœåŠ¡ä¸æˆ‘å†™çš„è„šæœ¬å¯åŠ¨æœåŠ¡æ–¹å¼çš„å·®å¼‚ï¼Œä¸éš¾å‘ç°ï¼Œä»…ä»…æ˜¯å¯åŠ¨è´¦å·ä¸ä¸€æ ·ï¼ŒæœåŠ¡æ˜¯ä»¥ <a href="https://docs.microsoft.com/en-us/windows/win32/services/localsystem-account" target="_blank" rel="noopener">SYSTEM</a> ç”¨æˆ·å¯åŠ¨çš„ï¼Œè€Œ SYSTEM æ˜¯æœ€é«˜æƒé™çš„ç”¨æˆ·ï¼Œå› æ­¤å®¿ä¸»ç”¨æˆ·æ³¨é”€ä¸å½±å“ä»¥ SYSTEM ç”¨æˆ·è¿è¡Œå¯åŠ¨çš„ç¨‹åºã€‚</p><p>é‚£ç°åœ¨çš„é—®é¢˜å°±æ˜¯è¯¥æ€ä¹ˆä»¥ SYSTEM ç”¨æˆ·è¿è¡Œç¨‹åºäº†ã€‚</p><h3 id="å€ŸåŠ©-PSTools-å·¥å…·åŒ…ä»¥-LocalSystem-ç”¨æˆ·è¿è¡Œç¨‹åº"><a href="#å€ŸåŠ©-PSTools-å·¥å…·åŒ…ä»¥-LocalSystem-ç”¨æˆ·è¿è¡Œç¨‹åº" class="headerlink" title="å€ŸåŠ© PSTools å·¥å…·åŒ…ä»¥ LocalSystem ç”¨æˆ·è¿è¡Œç¨‹åº"></a>å€ŸåŠ© <code>PSTools</code> å·¥å…·åŒ…ä»¥ <code>LocalSystem</code> ç”¨æˆ·è¿è¡Œç¨‹åº</h3><blockquote><p>å¯ä»¥é€šè¿‡è¯¥é“¾æ¥è¿›è¡Œå·¥å…·çš„ä¸‹è½½ <a href="https://docs.microsoft.com/en-us/sysinternals/downloads/pstools" target="_blank" rel="noopener">https://docs.microsoft.com/en-us/sysinternals/downloads/pstools</a>ï¼Œé‡Œé¢ä¹Ÿç”¨å·¥å…·çš„ä»‹ç»ã€‚æˆ‘ä»¬ä¸»è¦ä½¿ç”¨åˆ°å·¥å…·åŒ…ä¸­çš„ <code>PsExec.exe</code> ï¼ˆå¦‚æœæ˜¯64ä½ç³»ç»Ÿä¹Ÿå¯ä»¥ä½¿ç”¨ <code>PsExec64.exe</code>ï¼‰</p></blockquote><p>ä»¥ <code>LocalSystem</code> è´¦æˆ·è¿è¡Œ xxx.jar </p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">psexec.exe -s java -jar xxx.jar</span><br></pre></td></tr></table></figure><p><code>-s</code> å°±æ˜¯ä»¥ system èº«ä»½è¿è¡Œ</p><p>è¿˜æœ‰æ›´å¤šå¯é€‰å‚æ•°ä¾‹å¦‚ï¼š<code>-i</code> ä»¥äº¤äº’æ¨¡å¼è¿è¡Œï¼Œå°±æ˜¯å¯ä»¥çœ‹åˆ° java çš„é»‘çª—å£ï¼›<code>-d</code> æ‰§è¡Œå‘½ä»¤åè¿”å›ï¼Œä¸ç­‰å¾…å‘½ä»¤ç»“æŸã€‚æ›´å…·ä½“çš„å‚æ•°å¯ä»¥é€šè¿‡å‘½ä»¤ <code>psexec /h</code> æŸ¥çœ‹</p><h3 id="å¦‚ä½•åœ¨å½“å‰ç”¨æˆ·ä¸‹æŸ¥æ‰¾-LocalSystem-è´¦å·è¿è¡Œç¨‹åºçš„-pid"><a href="#å¦‚ä½•åœ¨å½“å‰ç”¨æˆ·ä¸‹æŸ¥æ‰¾-LocalSystem-è´¦å·è¿è¡Œç¨‹åºçš„-pid" class="headerlink" title="å¦‚ä½•åœ¨å½“å‰ç”¨æˆ·ä¸‹æŸ¥æ‰¾ LocalSystem è´¦å·è¿è¡Œç¨‹åºçš„ pid ?"></a>å¦‚ä½•åœ¨å½“å‰ç”¨æˆ·ä¸‹æŸ¥æ‰¾ <code>LocalSystem</code> è´¦å·è¿è¡Œç¨‹åºçš„ <code>pid</code> ?</h3><p>ç”±äºä½¿ç”¨è„šæœ¬ç»´æŠ¤å„æœåŠ¡ jar åŒ…çš„å¯åœï¼Œé‚£ä¹ˆè§£å†³äº†æ€ä¹ˆä»¥ <code>LocalSystem</code> èº«ä»½è¿è¡Œç¨‹åºäº†ï¼Œä½†æ˜¯ä»¥å‰çš„è„šæœ¬ä¸­ä½¿ç”¨ <code>jps -l | find &quot;xxx&quot;</code> æ¥æŸ¥æ‰¾ <code>xxx</code> ç¨‹åºçš„ <code>pid</code> çš„æ“ä½œå·²ç»ä¸å†é€‚ç”¨äº†ï¼Œé‚£ä¹ˆåº”è¯¥æ€ä¹ˆæ›¿æ¢è¿™æ®µè„šæœ¬ä»£ç å‘¢ï¼Ÿ</p><p>å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è·å– <code>pid</code></p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wmic process where "commandline like '<span class="variable">%xxx%</span>' and name='java.exe'" get processid | <span class="built_in">findStr</span> "[<span class="number">0</span>-<span class="number">9</span>]"</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      åœ¨windowsæœåŠ¡å™¨ä¸‹å¦‚ä½•ä»¥local systemè´¦æˆ·è¿è¡ŒæŒ‡å®šç¨‹åºï¼Ÿ
    
    </summary>
    
      <category term="windows" scheme="http://yoursite.com/categories/windows/"/>
    
    
      <category term="windows" scheme="http://yoursite.com/tags/windows/"/>
    
      <category term="local system" scheme="http://yoursite.com/tags/local-system/"/>
    
  </entry>
  
  <entry>
    <title>nssm æ³¨å†Œ windows æœåŠ¡</title>
    <link href="http://yoursite.com/2020/06/03/windows/nssm_services/"/>
    <id>http://yoursite.com/2020/06/03/windows/nssm_services/</id>
    <published>2020-06-03T07:56:00.000Z</published>
    <updated>2020-10-14T01:58:17.686Z</updated>
    
    <content type="html"><![CDATA[<h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>åœ¨ Windows æœåŠ¡å™¨ä¸­å¯ç”¨ jar åº”ç”¨ï¼Œé€šå¸¸ä½¿ç”¨çš„å‘½ä»¤æ˜¯</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar xx.jar</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™ç§æƒ…å†µå¯åŠ¨äº†ï¼Œæˆ‘ä»¬éœ€è¦ä¿æŒå‘½ä»¤æç¤ºæ¡†çš„æ‰“å¼€çŠ¶æ€ï¼Œæ‰€ä»¥èŒç”Ÿäº†ä¸ªæƒ³æ³•ï¼Œè¦æ˜¯æˆ‘ä»¬å°†å¯åŠ¨batè„šæœ¬æ³¨å†Œæˆwindows æœåŠ¡æ˜¯ä¸æ˜¯å°±å¯ä»¥ä¼˜é›…çš„ç®¡ç†æˆ‘ä»¬çš„ java åº”ç”¨äº†ã€‚</p><h3 id="NSSM-ä»‹ç»"><a href="#NSSM-ä»‹ç»" class="headerlink" title="NSSM ä»‹ç»"></a>NSSM ä»‹ç»</h3><p><strong><a href="https://nssm.cc/" target="_blank" rel="noopener">NSSM</a></strong>(the Non-Sucking Service Manager)æ˜¯Windowsç¯å¢ƒä¸‹ä¸€æ¬¾<strong>å…å®‰è£…</strong>çš„æœåŠ¡ç®¡ç†è½¯ä»¶ï¼Œå®ƒå¯ä»¥å°†åº”ç”¨å°è£…æˆæœåŠ¡ï¼Œä½¿ä¹‹åƒwindowsæœåŠ¡å¯ä»¥è®¾ç½®è‡ªåŠ¨å¯åŠ¨ç­‰ã€‚å¹¶ä¸”å¯ä»¥ç›‘æ§ç¨‹åºè¿è¡ŒçŠ¶æ€ï¼Œç¨‹åºå¼‚å¸¸ä¸­æ–­åè‡ªåŠ¨å¯åŠ¨ï¼Œå®ç°å®ˆæŠ¤è¿›ç¨‹çš„åŠŸèƒ½ã€‚ä¸ä»…æ”¯æŒå›¾å½¢ç•Œé¢æ“ä½œï¼Œä¹Ÿå®Œå…¨æ”¯æŒå‘½ä»¤è¡Œè®¾ç½®ã€‚</p><h3 id="NSSM-ä¸‹è½½ä¸é…ç½®"><a href="#NSSM-ä¸‹è½½ä¸é…ç½®" class="headerlink" title="NSSM ä¸‹è½½ä¸é…ç½®"></a>NSSM ä¸‹è½½ä¸é…ç½®</h3><ul><li><p>è¿›å…¥ä¸‹è½½ç•Œé¢ï¼Œé€‰æ‹©æœ€æ–°ç¨³å®šç‰ˆè¿›è¡Œä¸‹è½½ï¼Œ<a href="https://nssm.cc/download" target="_blank" rel="noopener">https://nssm.cc/download</a></p><p><img src="/images/windows/services/20200603161326.png" alt="NSSM ä¸‹è½½ç•Œé¢"></p></li><li><p>è§£å‹åˆ°ç‰¹å®šçš„ç›®å½•ï¼Œä¾‹å¦‚ <code>D:\nssm-2.24</code>ï¼Œæ–‡ä»¶å¤¹é‡Œé¢åˆ <code>win32</code> å’Œ <code>win64</code> ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œæ ¹æ®ç³»ç»Ÿçš„ä½æ•°é€‰æ‹©åˆé€‚çš„åº”ç”¨ï¼Œè¿™é‡Œé‡‡ç”¨ <code>win64</code></p><p><img src="/images/windows/services/20200603161728.png" alt="nssm ç›®å½•"></p></li><li><p>é…ç½®ç¯å¢ƒå˜é‡</p><p>å°† nssm è§£å‹çš„è·¯å¾„é…ç½®åˆ°ç¯å¢ƒå˜é‡çš„ path é‡Œé¢ï¼Œå¦‚ï¼š<code>D:\nssm-2.24\win64</code></p><p><img src="/images/windows/services/20200603162145.png" alt="nssm ç¯å¢ƒå˜é‡"></p></li><li><p>éªŒè¯å®‰è£…</p><p>cmd å‘½ä»¤çª—è¾“å…¥ <code>nssm</code></p><p><img src="/images/windows/services/20200603162750.png" alt="nssm éªŒè¯å®‰è£…"></p></li></ul><h3 id="å°†batæ³¨å†ŒæˆæœåŠ¡"><a href="#å°†batæ³¨å†ŒæˆæœåŠ¡" class="headerlink" title="å°†batæ³¨å†ŒæˆæœåŠ¡"></a>å°†batæ³¨å†ŒæˆæœåŠ¡</h3><ul><li><p>æ–°å»ºæ–‡ä»¶ <code>start.bat</code> ç”¨æ¥å¯åŠ¨ jar æ–‡ä»¶</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"></span><br><span class="line"><span class="comment">rem å¯åŠ¨jar</span></span><br><span class="line">java -jar xx.jar</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>æ–°å»ºæ–‡ä»¶ <code>install.bat</code> ç”¨æ¥æ³¨å†ŒæœåŠ¡</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"></span><br><span class="line"><span class="comment">rem å½“å‰è·¯å¾„</span></span><br><span class="line"><span class="built_in">set</span> currpath=<span class="variable">%cd%</span></span><br><span class="line"><span class="comment">rem æœåŠ¡åï¼Œè‡ªå·±ä¿®æ”¹</span></span><br><span class="line"><span class="built_in">set</span> servicename=xxx</span><br><span class="line"><span class="comment">rem æœåŠ¡æè¿°</span></span><br><span class="line"><span class="built_in">set</span> servicedesc=xxxx</span><br><span class="line"><span class="comment">rem å¯åŠ¨è·¯å¾„ï¼Œå¯¹åº”start.batè·¯å¾„</span></span><br><span class="line"><span class="built_in">set</span> binpath=<span class="variable">%currpath%</span>\<span class="built_in">start</span>.bat</span><br><span class="line"><span class="comment">rem å¯åŠ¨å‚æ•°</span></span><br><span class="line"><span class="built_in">set</span> appParams=</span><br><span class="line"></span><br><span class="line"><span class="comment">rem æ³¨å†ŒæœåŠ¡</span></span><br><span class="line">nssm install <span class="variable">%servicename%</span> <span class="variable">%binpath%</span></span><br><span class="line"><span class="comment">rem ä¿®æ”¹æœåŠ¡æè¿°</span></span><br><span class="line">sc description <span class="variable">%servicename%</span> <span class="variable">%servicedesc%</span></span><br><span class="line"></span><br><span class="line"><span class="comment">rem ä¿®æ”¹æ³¨å†Œè¡¨</span></span><br><span class="line"><span class="built_in">set</span> regpath=HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\<span class="variable">%servicename%</span>\Parameters\</span><br><span class="line"></span><br><span class="line">reg add <span class="variable">%regpath%</span> /v AppParameters /t REG_SZ /d "<span class="variable">%appParams%</span>" /f</span><br><span class="line">reg add <span class="variable">%regpath%</span>\AppExit\ /t REG_SZ /d "Ignore" /f</span><br></pre></td></tr></table></figure></li></ul><ul><li>åŒå‡» <code>install.bat</code>ï¼Œå³å¯</li></ul>]]></content>
    
    <summary type="html">
    
      ä»‹ç»å¦‚ä½•ä½¿ç”¨ nssm æ³¨å†Œ windows æœåŠ¡
    
    </summary>
    
      <category term="windows" scheme="http://yoursite.com/categories/windows/"/>
    
      <category term="services" scheme="http://yoursite.com/categories/windows/services/"/>
    
    
      <category term="windows service" scheme="http://yoursite.com/tags/windows-service/"/>
    
      <category term="nssm" scheme="http://yoursite.com/tags/nssm/"/>
    
      <category term="æœåŠ¡" scheme="http://yoursite.com/tags/%E6%9C%8D%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>windows ä¸‹ cronolog è¿›è¡Œæ—¥å¿—åˆ‡å‰²</title>
    <link href="http://yoursite.com/2020/06/03/Java/cronolog-win/"/>
    <id>http://yoursite.com/2020/06/03/Java/cronolog-win/</id>
    <published>2020-06-03T02:00:00.000Z</published>
    <updated>2020-10-14T01:58:17.206Z</updated>
    
    <content type="html"><![CDATA[<h3 id="è½¯ä»¶åŒ…ä¸‹è½½åœ°å€"><a href="#è½¯ä»¶åŒ…ä¸‹è½½åœ°å€" class="headerlink" title="è½¯ä»¶åŒ…ä¸‹è½½åœ°å€"></a>è½¯ä»¶åŒ…ä¸‹è½½åœ°å€</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é“¾æ¥: https://pan.baidu.com/s/1xhhBKCthOxZuYBhEL4pb-Q æå–ç : 9mxj</span><br></pre></td></tr></table></figure><h3 id="jar-åŒ…æ—¥å¿—åˆ†å‰²"><a href="#jar-åŒ…æ—¥å¿—åˆ†å‰²" class="headerlink" title="jar åŒ…æ—¥å¿—åˆ†å‰²"></a>jar åŒ…æ—¥å¿—åˆ†å‰²</h3><blockquote><p>ä»¥ springboot çš„jarä¸ºä¾‹ï¼Œå…¶ä»– jar åŒ…ç±»ä¼¼</p></blockquote><h4 id="windows-ç¯å¢ƒ"><a href="#windows-ç¯å¢ƒ" class="headerlink" title="windows ç¯å¢ƒ"></a>windows ç¯å¢ƒ</h4><ul><li><p>ä»ä¸Šè¿°åœ°å€ğŸ‘†ä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„ cronolog åŒ…</p><p><img src="/images/java/cronolog/20200603133210.png" alt="cronolog-1.6.1-win32.zip"></p></li><li><p>è§£å‹å­˜æ”¾åˆ°æŒ‡å®šç›®å½•ï¼Œä¾‹å¦‚ <code>d:\cronolog</code></p><p><img src="/images/java/cronolog/20200603133932.png" alt=""></p></li><li><p>æ‰§è¡Œ jar å¯åŠ¨å‘½ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar xxx.jar | d:\cronolog\cronolog.exe æ—¥å¿—è¾“å‡ºè·¯å¾„\xxx-%%Y%%m%%d.log</span><br></pre></td></tr></table></figure><blockquote><p>è¦æ˜¯æƒ³åç«¯è¿è¡Œå¯ä»¥ç¼–å†™batå¯åŠ¨è„šæœ¬</p></blockquote><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"></span><br><span class="line">javaw -jar xxx.jar | d:\cronolog\cronolog.exe æ—¥å¿—è¾“å‡ºè·¯å¾„\xxx-<span class="variable">%%Y</span><span class="variable">%%m</span><span class="variable">%%d</span>.log</span><br><span class="line"></span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="linux-ç¯å¢ƒ"><a href="#linux-ç¯å¢ƒ" class="headerlink" title="linux ç¯å¢ƒ"></a>linux ç¯å¢ƒ</h4><ul><li><p>ä¸‹è½½å®‰è£…åŒ… <code>cronolog-1.6.2.tar.gz</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget http://cronolog.org/download/cronolog-1.6.2.tar.gz </span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">wget https://files.cnblogs.com/files/crazyzero/cronolog-1.6.2.tar.gz</span><br></pre></td></tr></table></figure></li><li><p>è§£å‹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf cronolog-1.6.2.tar.gz</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> cronolog-1.6.2</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure></li><li><p>éªŒè¯</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> cronolog</span><br><span class="line"><span class="comment"># è¾“å‡º /usr/local/sbin/cronolog</span></span><br></pre></td></tr></table></figure></li><li><p>æ‰§è¡Œ jar å¯åŠ¨å‘½ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar xxx.jar | /usr/<span class="built_in">local</span>/sbin/cronolog æ—¥å¿—è¾“å‡ºè·¯å¾„/xxx-%Y%m%d.log</span><br></pre></td></tr></table></figure><blockquote><p>è¦æ˜¯æƒ³åç«¯è¿è¡Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohub java -jar xxx.jar | /usr/<span class="built_in">local</span>/sbin/cronolog æ—¥å¿—è¾“å‡ºè·¯å¾„/xxx-%Y%m%d.log &amp;</span><br></pre></td></tr></table></figure></li></ul><h3 id="tomcat-è¿›è¡Œæ—¥å¿—åˆ†å‰²"><a href="#tomcat-è¿›è¡Œæ—¥å¿—åˆ†å‰²" class="headerlink" title="tomcat è¿›è¡Œæ—¥å¿—åˆ†å‰²"></a>tomcat è¿›è¡Œæ—¥å¿—åˆ†å‰²</h3><blockquote><p>è¿™ä¸ªå†…å®¹ç½‘ä¸Šå¾ˆå¤šèµ„æºï¼Œåœ¨æ­¤ä¸å±•å¼€è¯´ï¼Œä¾‹å¦‚ï¼š<a href="https://blog.csdn.net/fly910905/article/details/78528652" target="_blank" rel="noopener">https://blog.csdn.net/fly910905/article/details/78528652</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      åœ¨linuxä¸‹æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ cronolog å¯¹ tomcat æœåŠ¡å™¨çš„æ—¥å¿—è¿›è¡Œåˆ‡å‰²ï¼Œé‚£ä¹ˆåœ¨windowsä¸‹æ˜¯å¦åŒæ ·å¯ä»¥ä½¿ç”¨ cronlog å‘¢ï¼Ÿjar åŒ…å¯åŠ¨çš„æ–¹å¼æ€ä¹ˆå¯ä»¥å¯¹æ—¥å¿—è¿›è¡Œåˆ‡å‰²å‘¢ï¼Ÿæœ¬æ–‡ä¸»è¦é’ˆå¯¹windowsä¸‹jaråŒ…å¯åŠ¨æ–¹å¼çš„æ—¥å¿— è¿›è¡Œæ¼”ç¤ºè®²è§£ï¼ŒåŒæ—¶ç®€è¦ä»‹ç»ä¸€ä¸‹linuxç³»ç»Ÿä¸‹çš„æ“ä½œã€‚
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
      <category term="cronolog" scheme="http://yoursite.com/categories/Java/cronolog/"/>
    
    
      <category term="log" scheme="http://yoursite.com/tags/log/"/>
    
      <category term="cronolog" scheme="http://yoursite.com/tags/cronolog/"/>
    
  </entry>
  
  <entry>
    <title>Windows Server 2016 æ­å»º FTP</title>
    <link href="http://yoursite.com/2020/02/12/windows/windows_server_2016_ftp/"/>
    <id>http://yoursite.com/2020/02/12/windows/windows_server_2016_ftp/</id>
    <published>2020-02-11T16:00:00.000Z</published>
    <updated>2020-10-14T01:58:17.729Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å®‰è£…-WEB-æœåŠ¡å™¨"><a href="#å®‰è£…-WEB-æœåŠ¡å™¨" class="headerlink" title="å®‰è£… WEB æœåŠ¡å™¨"></a>å®‰è£… WEB æœåŠ¡å™¨</h3><p>é€šè¿‡æœåŠ¡å™¨æ·»åŠ è§’è‰²å’ŒåŠŸèƒ½å‘å¯¼æ·»åŠ  <code>Web æœåŠ¡å™¨(IIS)</code></p><p>æœåŠ¡å™¨ç®¡ç†å™¨ â€”â€” æ·»åŠ è§’è‰²åŠŸèƒ½ â€”â€” Web æœåŠ¡å™¨(IIS)</p><p><img src="/images/windows/server/2016/ftp/1.png" alt="web æœåŠ¡å™¨"></p><p>ä¸‹ä¸€æ­¥</p><p><img src="/images/windows/server/2016/ftp/2.png" alt="web æœåŠ¡å™¨"></p><p>ä¸‹ä¸€æ­¥</p><p><img src="/images/windows/server/2016/ftp/3.png" alt="web æœåŠ¡å™¨"></p><p>ä¸‹ä¸€æ­¥</p><p><img src="/images/windows/server/2016/ftp/4.png" alt="web æœåŠ¡å™¨"></p><p>é€‰æ‹© ftp å¹¶ä¸”ç‚¹å‡»ä¸‹ä¸€æ­¥</p><p><img src="/images/windows/server/2016/ftp/5.png" alt="web æœåŠ¡å™¨"></p><p>å®‰è£…</p><p><img src="/images/windows/server/2016/ftp/6.png" alt="web æœåŠ¡å™¨"></p><p>å…³é—­</p><p><img src="/images/windows/server/2016/ftp/7.png" alt="web æœåŠ¡å™¨"></p><h3 id="æ·»åŠ -FTP-ç«™ç‚¹"><a href="#æ·»åŠ -FTP-ç«™ç‚¹" class="headerlink" title="æ·»åŠ  FTP ç«™ç‚¹"></a>æ·»åŠ  FTP ç«™ç‚¹</h3><p>åœ¨ <code>è®¡ç®—æœºç®¡ç†</code> ä¸­æ ¹æ®æç¤ºæ·»åŠ å³å¯</p><p><img src="/images/windows/server/2016/ftp/8.png" alt="FTP ç«™ç‚¹"></p><p>å¡«å†™è‡ªå®šä¹‰ä¿¡æ¯ï¼Œä¸‹ä¸€æ­¥</p><p><img src="/images/windows/server/2016/ftp/9.png" alt="FTP ç«™ç‚¹"></p><p>å¡«å†™ä¿¡æ¯ï¼Œä¸‹ä¸€æ­¥</p><p><img src="/images/windows/server/2016/ftp/10.png" alt="FTP ç«™ç‚¹"></p><p>æ ¹æ®éœ€è¦é…ç½®æƒé™ä¿¡æ¯</p><p><img src="/images/windows/server/2016/ftp/11.png" alt="FTP ç«™ç‚¹"></p><h3 id="æ‰“å¼€IEæµè§ˆå™¨ï¼Œåœ¨Internet-é€‰é¡¹-ä¸­è®¾ç½®-ä½¿ç”¨è¢«åŠ¨-FTP"><a href="#æ‰“å¼€IEæµè§ˆå™¨ï¼Œåœ¨Internet-é€‰é¡¹-ä¸­è®¾ç½®-ä½¿ç”¨è¢«åŠ¨-FTP" class="headerlink" title="æ‰“å¼€IEæµè§ˆå™¨ï¼Œåœ¨Internet é€‰é¡¹ ä¸­è®¾ç½® ä½¿ç”¨è¢«åŠ¨ FTP"></a>æ‰“å¼€IEæµè§ˆå™¨ï¼Œåœ¨<code>Internet é€‰é¡¹</code> ä¸­è®¾ç½® <code>ä½¿ç”¨è¢«åŠ¨ FTP</code></h3><p><img src="/images/windows/server/2016/ftp/12.png" alt="Internet Options"></p><p><img src="/images/windows/server/2016/ftp/13.png" alt="Internet Options"></p><h3 id="é˜²ç«å¢™å¼€æ”¾ç«¯å£"><a href="#é˜²ç«å¢™å¼€æ”¾ç«¯å£" class="headerlink" title="é˜²ç«å¢™å¼€æ”¾ç«¯å£"></a>é˜²ç«å¢™å¼€æ”¾ç«¯å£</h3><p>åœ¨æœåŠ¡å™¨ç®¡ç†ä¸­æ‰“å¼€ é«˜çº§å®‰å…¨ Windows é˜²ç«å¢™ï¼Œç‚¹å‡» å…¥ç«™è§„åˆ™ â€”â€” æ–°å»ºè§„åˆ™ï¼Œæ ¹æ®æç¤ºæ·»åŠ è¿œç¨‹ç«¯å£ï¼ˆé»˜è®¤ä¸º21ç«¯å£ï¼‰ï¼Œå»ºè®®å°†ç«¯å£è®¾ç½®ä¸ºé 21 ç«¯å£ã€‚</p><p><img src="/images/windows/server/2016/ftp/14.png" alt="é˜²ç«å¢™"></p><p><img src="/images/windows/server/2016/ftp/15.png" alt="æ–°å»ºè§„åˆ™"></p><p><img src="/images/windows/server/2016/ftp/16.png" alt="è§„åˆ™ç±»å‹"></p><p><img src="/images/windows/server/2016/ftp/17.png" alt="æŒ‡å®šç«¯å£"></p><p><img src="/images/windows/server/2016/ftp/18.png" alt="æŒ‡å®šæ“ä½œ"></p><p><img src="/images/windows/server/2016/ftp/19.png" alt="é…ç½®æ–‡ä»¶"></p><p><img src="/images/windows/server/2016/ftp/20.png" alt="æŒ‡å®šåç§°"></p><h3 id="ç™»å½•éªŒè¯"><a href="#ç™»å½•éªŒè¯" class="headerlink" title="ç™»å½•éªŒè¯"></a>ç™»å½•éªŒè¯</h3><p>åœ¨windowsèµ„æºç®¡ç†å™¨ä¸­è¾“å…¥ä»¥ä¸‹åœ°å€å³å¯ç™»é™†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ftp://ipåœ°å€:ç«¯å£</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ftp://username:password@ipåœ°å€:ç«¯å£</span><br></pre></td></tr></table></figure><p><img src="/images/windows/server/2016/ftp/21.png" alt="ç™»å½•éªŒè¯"></p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://blog.csdn.net/h8178/article/details/78349882" target="_blank" rel="noopener">Windows Server 2016 æ­å»º FTPç¯å¢ƒ</a></p>]]></content>
    
    <summary type="html">
    
      ä»é›¶å¼€å§‹åœ¨ Windows Server 2016 ä¸Šæ­å»º FTP æœåŠ¡
    
    </summary>
    
      <category term="windows" scheme="http://yoursite.com/categories/windows/"/>
    
      <category term="ftp" scheme="http://yoursite.com/categories/windows/ftp/"/>
    
    
      <category term="windows server" scheme="http://yoursite.com/tags/windows-server/"/>
    
      <category term="windows server 2016" scheme="http://yoursite.com/tags/windows-server-2016/"/>
    
      <category term="ftp" scheme="http://yoursite.com/tags/ftp/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•ä½¿ç”¨ webservice å¤‡ä»½æŠ¥è¡¨ catalog å¯¹è±¡</title>
    <link href="http://yoursite.com/2019/08/24/oracle-cloud/webservice/backup-catalog-object/"/>
    <id>http://yoursite.com/2019/08/24/oracle-cloud/webservice/backup-catalog-object/</id>
    <published>2019-08-23T16:00:00.000Z</published>
    <updated>2020-10-14T01:58:17.582Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ‰‹åŠ¨å¤‡ä»½"><a href="#æ‰‹åŠ¨å¤‡ä»½" class="headerlink" title="æ‰‹åŠ¨å¤‡ä»½"></a>æ‰‹åŠ¨å¤‡ä»½</h2><p>å¦‚æœä¸æ˜¯ç»å¸¸éœ€è¦è¿›è¡Œå¤‡ä»½å¯ä»¥é€šè¿‡æ‰‹åŠ¨è¿›è¡Œå¤‡ä»½ï¼Œæ²¡å¿…è¦é€šè¿‡ <code>webservice</code> å¤‡ä»½ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ‰‹åŠ¨æ“ä½œ</p><ul><li>BIP: <a href="http://docs.oracle.com/cd/E28280_01/bi.1111/e22257/manage_obj_bi_pub_cat.htm#BIPUG261" target="_blank" rel="noopener">Downloading and Uploading Catalog Objects</a></li><li>OBIEE: <a href="http://docs.oracle.com/cd/E28280_01/bi.1111/e10544/mancat.htm#BIEUG321" target="_blank" rel="noopener">Archiving Objects</a></li></ul><blockquote><p>ps: è¿›å…¥<code>BI Publisher</code> <code>https://xxx.com/xmlpserver</code></p></blockquote><h2 id="webservice-å¤‡ä»½"><a href="#webservice-å¤‡ä»½" class="headerlink" title="webservice å¤‡ä»½"></a>webservice å¤‡ä»½</h2><p>å…¶å®åªæ˜¯ç”¨ webservice çš„æ–¹å¼è¿›è¡Œ BIP å¤‡ä»½çš„ä¸¤æ­¥æ“ä½œ</p><p>ä¸»è¦ä½¿ç”¨ webservice: <code>https://xxx.com/xmlpserver/services/v2/CatalogService?wsdl</code> ä¸­çš„ <code>downloadObject</code> å’Œ <code>uploadObject</code> æˆ–è€… <code>updateObject</code></p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨ <code>downloadObject</code>, è·å– <code>catalog objects</code> ç„¶åæ‰‹åŠ¨é€šè¿‡ <code>BIP</code> ç•Œé¢ä¸Šä¼ è¿˜åŸå³å¯å®Œæˆæ•´ä¸ªå¤‡ä»½è¿˜åŸæµç¨‹äº†ã€‚ç®€å•ä»‹ç»ä¸€ä¸‹æµç¨‹</p><h3 id="è¯·æ±‚æŠ¥æ–‡"><a href="#è¯·æ±‚æŠ¥æ–‡" class="headerlink" title="è¯·æ±‚æŠ¥æ–‡"></a>è¯·æ±‚æŠ¥æ–‡</h3><p><img src="/images/oracle_cloud/20190824172652.png" alt="payload"></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Envelope</span> <span class="attr">xmlns</span>=<span class="string">"http://schemas.xmlsoap.org/soap/envelope/"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">downloadObject</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.oracle.com/oxp/service/v2"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">reportAbsolutePath</span>&gt;</span>/Custom/Financials/General Ledger<span class="tag">&lt;/<span class="name">reportAbsolutePath</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">userID</span>&gt;</span>****<span class="tag">&lt;/<span class="name">userID</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">password</span>&gt;</span>***<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">downloadObject</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Envelope</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>reportAbsolutePath: æŠ¥è¡¨è·¯å¾„ï¼Œå‡è®¾æˆ‘ä»¬è¦å¤‡ä»½å…±äº«ç›®å½•å®¢åˆ¶åŒ–çš„ <code>/Custom/Financials/General Ledger</code> ç›®å½•ï¼Œå¡«å†™ <code>/Custom/Financials/General Ledger</code></li><li>userIDï¼šç”¨æˆ·å</li><li>password: å¯†ç </li></ul><h3 id="å“åº”æŠ¥æ–‡"><a href="#å“åº”æŠ¥æ–‡" class="headerlink" title="å“åº”æŠ¥æ–‡"></a>å“åº”æŠ¥æ–‡</h3><p><img src="/images/oracle_cloud/20190824163707.png" alt="response"></p><p>é€šè¿‡è·å–çš„ <code>base64binary Code</code> è§£å¯†ç”Ÿæˆæ–‡ä»¶å°±å®Œæˆäº†æ–‡ä»¶å¤‡ä»½çš„æ­¥éª¤äº†</p><p><img src="/images/oracle_cloud/20190824172457.png" alt="base64 to file"></p><blockquote><p>æµ‹è¯•çš„è¯å¯ä»¥é€šè¿‡ <code>https://www.hitoy.org/tool/file_base64.php</code> åœ¨çº¿å¯¹ <code>base64binary Code</code> è½¬æ¢æˆæ–‡ä»¶ï¼Œè¿™é‡Œä¸‹è½½çš„æ˜¯æ–‡ä»¶å¤¹å› æ­¤åç¼€åå†™ <code>xdrz</code>, åç¼€åå¯¹åº”è¯·å¾€ä¸‹çœ‹</p></blockquote><h3 id="æ–‡ä»¶åç¼€åç¡®å®š"><a href="#æ–‡ä»¶åç¼€åç¡®å®š" class="headerlink" title="æ–‡ä»¶åç¼€åç¡®å®š"></a>æ–‡ä»¶åç¼€åç¡®å®š</h3><p><code>catalog</code> å¯¹è±¡æ–‡ä»¶åç¼€åçš„å¯¹åº”å¦‚ä¸‹ï¼Œåœ¨è½¬æ–‡ä»¶æ—¶éœ€è¦ä½¿ç”¨æ­£ç¡®çš„åç¼€åï¼Œä¸ç„¶ BIP ä¸Šä¼ è¿˜åŸæŠ¥é”™</p><table><thead><tr><th>Catalog Object</th><th>Extension Assigned to Downloaded Files</th></tr></thead><tbody><tr><td>Data Model</td><td>.xdmz</td></tr><tr><td>Folder</td><td>.xdrz</td></tr><tr><td>Report</td><td>.xdoz</td></tr><tr><td>Style Template</td><td>.xssz</td></tr><tr><td>Subtemplate</td><td>.xsbz</td></tr></tbody></table><h3 id="BIP-ä¸Šä¼ -catalog-å¯¹è±¡è¿›è¡Œè¿˜åŸ"><a href="#BIP-ä¸Šä¼ -catalog-å¯¹è±¡è¿›è¡Œè¿˜åŸ" class="headerlink" title="BIP ä¸Šä¼  catalog å¯¹è±¡è¿›è¡Œè¿˜åŸ"></a>BIP ä¸Šä¼  <code>catalog</code> å¯¹è±¡è¿›è¡Œè¿˜åŸ</h3><p>è¾“å…¥ç½‘å€ <code>https://xxx.com/xmlpserver</code> è¿›å…¥ BIP ç•Œé¢</p><p>è¿›å…¥ <code>catalog</code>  ç®¡ç†ç•Œé¢ï¼Œä¸‹å›¾ä¸¤ä¸ªæ¡†æ¡†ä½ç½®éƒ½å¯ä»¥è¿›å…¥</p><p><img src="/images/oracle_cloud/20190824170436.png" alt="catalog manage"></p><p>è¿›å…¥è¦è¿˜åŸåˆ°çš„ç›®å½•ä¸‹è¿›è¡Œä»¥ä¸‹æ“ä½œ</p><p><img src="/images/oracle_cloud/20190824172916.png" alt="upload catalog"></p><p>è¿˜åŸæˆåŠŸ</p><p><img src="/images/oracle_cloud/20190824173101.png" alt="success"></p><h2 id="æµ‹è¯•ç»“æœåˆ†æ"><a href="#æµ‹è¯•ç»“æœåˆ†æ" class="headerlink" title="æµ‹è¯•ç»“æœåˆ†æ"></a>æµ‹è¯•ç»“æœåˆ†æ</h2><p>åæœŸæµ‹è¯•å‘ç°ï¼Œä¸‹è½½çš„æ–‡ä»¶å¤¹ï¼Œå¦‚æœé‡Œé¢çš„å†…å®¹è¿‡å¤šï¼ˆçŒœæµ‹æ˜¯æ–‡ä»¶å¤¹è¿‡å¤šï¼‰ä¼šå¯¼è‡´uploadçš„æ—¶å€™å¤±è´¥ï¼ŒåŸå› æœªæ˜ï¼Œå¦å¤–å‘ç°é€šè¿‡ä¸‹è½½ä¸Šä¼ çš„æ–¹å¼æ— æ³•ä¿ç•™åŸæ–‡ä»¶çš„æƒé™ç­‰è®¾ç½®ã€‚å› æ­¤ï¼Œæ„Ÿè§‰å¦‚éå¿…è¦è¿˜æ˜¯é€šè¿‡ <code>OBIEE</code> æ–¹å¼è¿›è¡Œå¤‡ä»½å§ï¼ˆä¹Ÿå°±æ˜¯å½’æ¡£ä¸åå½’æ¡£ï¼‰</p>]]></content>
    
    <summary type="html">
    
      æœ¬æ–‡ä»‹ç»ä½¿ç”¨ oracle cloud webservice å¤‡ä»½æŠ¥è¡¨ catalog å¯¹è±¡
    
    </summary>
    
      <category term="Oracle Cloud" scheme="http://yoursite.com/categories/Oracle-Cloud/"/>
    
      <category term="webservice" scheme="http://yoursite.com/categories/Oracle-Cloud/webservice/"/>
    
    
      <category term="Oracle Cloud" scheme="http://yoursite.com/tags/Oracle-Cloud/"/>
    
      <category term="catalog" scheme="http://yoursite.com/tags/catalog/"/>
    
  </entry>
  
  <entry>
    <title>oracle cloud ç”¨æˆ·è§’è‰²æƒé™è¡¨å…³ç³»ï¼ˆåºŸå¼ƒï¼‰</title>
    <link href="http://yoursite.com/2019/08/23/oracle-cloud/user-role-privilege/"/>
    <id>http://yoursite.com/2019/08/23/oracle-cloud/user-role-privilege/</id>
    <published>2019-08-22T16:00:00.000Z</published>
    <updated>2020-10-14T01:58:17.551Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æ ¹æ® sr å›å¤ï¼Œaseç›¸å…³è¡¨åªæ˜¯ç»™ oracle å†…éƒ¨ä½¿ç”¨ï¼Œè¡¨çš„æ•°æ®å¹¶ä¸å‡†ç¡®ï¼ŒåæœŸå¦‚æœæœ‰æ‰¾åˆ°ç›¸å…³è¡¨å†åšæ›´æ–°å§ï¼Œå¤§å®¶çœ‹åˆ°è¿™ä¸ªç›´æ¥å¿½ç•¥å§ï¼Œæ‰“æ‰°äº†</p></blockquote><h2 id="Cloud-æŸ¥çœ‹ç”¨æˆ·è§’è‰²æƒé™"><a href="#Cloud-æŸ¥çœ‹ç”¨æˆ·è§’è‰²æƒé™" class="headerlink" title="Cloud æŸ¥çœ‹ç”¨æˆ·è§’è‰²æƒé™"></a>Cloud æŸ¥çœ‹ç”¨æˆ·è§’è‰²æƒé™</h2><p><img src="/images/oracle_cloud/20190823222822.png" alt="Security Console"></p><p><img src="/images/oracle_cloud/20190823223248.png" alt="user role privilege"></p><h2 id="è¡¨å…³ç³»"><a href="#è¡¨å…³ç³»" class="headerlink" title="è¡¨å…³ç³»"></a>è¡¨å…³ç³»</h2><p>ä¸»è¦æ¶‰åŠè¡¨ï¼š</p><blockquote><p>å‰ç¼€ASEå¼€å¤´çš„</p></blockquote><p><code>ASE_USER_VL</code>  ç”¨æˆ·è¡¨</p><p><code>ASE_USER_ROLE_MBR</code>  ç”¨æˆ·è§’è‰²åˆ†é…è¡¨</p><p><code>ASE_ROLE_VL</code>  è§’è‰²è¡¨</p><p><code>ASE_PRIVILEGE_VL</code>  æƒé™è¡¨</p><p><code>ASE_PRIV_ROLE_MBR</code>  æƒé™è§’è‰²è¡¨</p><p><code>ASE_ROLE_ROLE_MBR</code>  è§’è‰²çˆ¶å­å…³ç³»è¡¨</p><h2 id="sql-æŸ¥è¯¢"><a href="#sql-æŸ¥è¯¢" class="headerlink" title="sql æŸ¥è¯¢"></a>sql æŸ¥è¯¢</h2><h3 id="è§’è‰²çˆ¶å­å…³ç³»"><a href="#è§’è‰²çˆ¶å­å…³ç³»" class="headerlink" title="è§’è‰²çˆ¶å­å…³ç³»"></a>è§’è‰²çˆ¶å­å…³ç³»</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> t.parent_role_id,</span><br><span class="line">         pr.code          <span class="keyword">AS</span> parent_role_code,</span><br><span class="line">         pr.role_name     <span class="keyword">AS</span> parent_role_name,</span><br><span class="line">         t.leaf,</span><br><span class="line">         t.ase_role_id,</span><br><span class="line">         r.code           <span class="keyword">AS</span> role_code,</span><br><span class="line">         r.role_name</span><br><span class="line">    <span class="keyword">FROM</span> (<span class="keyword">SELECT</span> parent_role_id,</span><br><span class="line">                 <span class="keyword">connect_by_isleaf</span> leaf,</span><br><span class="line">                 <span class="keyword">connect_by_root</span>(child_role_id) ase_role_id</span><br><span class="line">            <span class="keyword">FROM</span> ase_role_role_mbr</span><br><span class="line">          <span class="keyword">CONNECT</span> <span class="keyword">BY</span> <span class="keyword">PRIOR</span> ase_role_role_mbr.parent_role_id = ase_role_role_mbr.child_role_id) t,</span><br><span class="line">         ase_role_vl pr,</span><br><span class="line">         ase_role_vl r</span><br><span class="line">   <span class="keyword">WHERE</span> t.parent_role_id = pr.role_id(+)</span><br><span class="line">     <span class="keyword">AND</span> t.ase_role_id = r.role_id</span><br></pre></td></tr></table></figure><h3 id="ç”¨æˆ·è§’è‰²æŸ¥è¯¢"><a href="#ç”¨æˆ·è§’è‰²æŸ¥è¯¢" class="headerlink" title="ç”¨æˆ·è§’è‰²æŸ¥è¯¢"></a>ç”¨æˆ·è§’è‰²æŸ¥è¯¢</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">WITH</span><br><span class="line"><span class="comment">-- è§’è‰²çˆ¶å­å…³ç³»</span></span><br><span class="line">role_role_mbr_ AS</span><br><span class="line"> (<span class="keyword">SELECT</span> t.parent_role_id,</span><br><span class="line">         pr.code          <span class="keyword">AS</span> parent_role_code,</span><br><span class="line">         pr.role_name     <span class="keyword">AS</span> parent_role_name,</span><br><span class="line">         t.leaf,</span><br><span class="line">         t.ase_role_id,</span><br><span class="line">         r.code           <span class="keyword">AS</span> role_code,</span><br><span class="line">         r.role_name</span><br><span class="line">    <span class="keyword">FROM</span> (<span class="keyword">SELECT</span> parent_role_id,</span><br><span class="line">                 <span class="keyword">connect_by_isleaf</span> leaf,</span><br><span class="line">                 <span class="keyword">connect_by_root</span>(child_role_id) ase_role_id</span><br><span class="line">            <span class="keyword">FROM</span> ase_role_role_mbr</span><br><span class="line">          <span class="keyword">CONNECT</span> <span class="keyword">BY</span> <span class="keyword">PRIOR</span> ase_role_role_mbr.parent_role_id = ase_role_role_mbr.child_role_id) t,</span><br><span class="line">         ase_role_vl pr,</span><br><span class="line">         ase_role_vl r</span><br><span class="line">   <span class="keyword">WHERE</span> t.parent_role_id = pr.role_id(+)</span><br><span class="line">     <span class="keyword">AND</span> t.ase_role_id = r.role_id),</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ç”¨æˆ·è§’è‰²</span></span><br><span class="line">user_role_ <span class="keyword">AS</span></span><br><span class="line"> (<span class="keyword">SELECT</span> u.user_login,</span><br><span class="line">         u.user_display_name,</span><br><span class="line">         <span class="comment">-- ä¸å½“å‰æ—¥æœŸæ¯”è¾ƒåˆ¤æ–­æ˜¯å¦æœ‰æ•ˆ</span></span><br><span class="line">         <span class="keyword">decode</span>((<span class="keyword">SELECT</span> <span class="number">1</span></span><br><span class="line">                  <span class="keyword">FROM</span> dual</span><br><span class="line">                 <span class="keyword">WHERE</span> (u.effective_start_date &lt;= <span class="keyword">SYSDATE</span> <span class="keyword">OR</span> u.effective_start_date <span class="keyword">IS</span> <span class="literal">NULL</span>)</span><br><span class="line">                   <span class="keyword">AND</span> (u.effective_end_date &gt;= <span class="keyword">SYSDATE</span> <span class="keyword">OR</span> u.effective_end_date <span class="keyword">IS</span> <span class="literal">NULL</span>)</span><br><span class="line">                      <span class="comment">-- ä½¿ç”¨suspend åˆ¤æ–­æ˜¯å¦å¤±æ•ˆ</span></span><br><span class="line">                   <span class="keyword">AND</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="number">1</span></span><br><span class="line">                          <span class="keyword">FROM</span> per_users pu</span><br><span class="line">                         <span class="keyword">WHERE</span> pu.user_guid = u.user_guid</span><br><span class="line">                           <span class="keyword">AND</span> pu.suspended = <span class="string">'N'</span>)),</span><br><span class="line">                <span class="number">1</span>,</span><br><span class="line">                <span class="string">'Active'</span>,</span><br><span class="line">                <span class="string">'Inactive'</span>) <span class="keyword">AS</span> is_user_active,</span><br><span class="line">         u.creation_date <span class="keyword">AS</span> user_creation_date,</span><br><span class="line">         u.last_update_date <span class="keyword">AS</span> user_last_update_date,</span><br><span class="line">         r.role_id,</span><br><span class="line">         r.code <span class="keyword">AS</span> role_code,</span><br><span class="line">         r.role_name,</span><br><span class="line">         <span class="comment">-- ä¸å½“å‰æ—¥æœŸæ¯”è¾ƒåˆ¤æ–­æ˜¯å¦æœ‰æ•ˆ</span></span><br><span class="line">         <span class="keyword">decode</span>((<span class="keyword">SELECT</span> <span class="number">1</span></span><br><span class="line">                  <span class="keyword">FROM</span> dual</span><br><span class="line">                 <span class="keyword">WHERE</span> (r.effective_start_date &lt;= <span class="keyword">SYSDATE</span> <span class="keyword">OR</span> r.effective_start_date <span class="keyword">IS</span> <span class="literal">NULL</span>)</span><br><span class="line">                   <span class="keyword">AND</span> (r.effective_end_date &gt;= <span class="keyword">SYSDATE</span> <span class="keyword">OR</span> r.effective_end_date <span class="keyword">IS</span> <span class="literal">NULL</span>)),</span><br><span class="line">                <span class="number">1</span>,</span><br><span class="line">                <span class="string">'Active'</span>,</span><br><span class="line">                <span class="string">'Inactive'</span>) <span class="keyword">AS</span> is_role_active,</span><br><span class="line">         r.creation_date <span class="keyword">AS</span> role_creation_date,</span><br><span class="line">         r.last_update_date <span class="keyword">AS</span> role_last_update_date,</span><br><span class="line">         <span class="comment">-- ä¸å½“å‰æ—¥æœŸæ¯”è¾ƒåˆ¤æ–­æ˜¯å¦æœ‰æ•ˆ</span></span><br><span class="line">         <span class="keyword">decode</span>((<span class="keyword">SELECT</span> <span class="number">1</span></span><br><span class="line">                  <span class="keyword">FROM</span> dual</span><br><span class="line">                 <span class="keyword">WHERE</span> (ur.effective_start_date &lt;= <span class="keyword">SYSDATE</span> <span class="keyword">OR</span> ur.effective_start_date <span class="keyword">IS</span> <span class="literal">NULL</span>)</span><br><span class="line">                   <span class="keyword">AND</span> (ur.effective_end_date &gt;= <span class="keyword">SYSDATE</span> <span class="keyword">OR</span> ur.effective_end_date <span class="keyword">IS</span> <span class="literal">NULL</span>)),</span><br><span class="line">                <span class="number">1</span>,</span><br><span class="line">                <span class="string">'Active'</span>,</span><br><span class="line">                <span class="string">'Inactive'</span>) <span class="keyword">AS</span> is_user_role_active,</span><br><span class="line">         ur.creation_date <span class="keyword">AS</span> user_role_creation_date,</span><br><span class="line">         ur.last_update_date <span class="keyword">AS</span> user_role_last_update_date</span><br><span class="line">    <span class="keyword">FROM</span> fusion.ase_user_vl       u,</span><br><span class="line">         fusion.ase_user_role_mbr ur,</span><br><span class="line">         fusion.ase_role_vl       r</span><br><span class="line">   <span class="keyword">WHERE</span> u.user_id = ur.user_id</span><br><span class="line">     <span class="keyword">AND</span> r.role_id = ur.role_id)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ä¸»æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">SELECT</span> t.user_login,</span><br><span class="line">       t.user_display_name,</span><br><span class="line">       t.is_user_active,</span><br><span class="line">       t.user_creation_date,</span><br><span class="line">       t.user_last_update_date,</span><br><span class="line">       t.role_code,</span><br><span class="line">       t.role_name,</span><br><span class="line">       rr.parent_role_code,</span><br><span class="line">       rr.parent_role_name,</span><br><span class="line">       t.is_role_active,</span><br><span class="line">       t.role_creation_date,</span><br><span class="line">       t.role_last_update_date,</span><br><span class="line">       t.is_user_role_active,</span><br><span class="line">       t.user_role_creation_date,</span><br><span class="line">       t.user_role_last_update_date</span><br><span class="line">  <span class="keyword">FROM</span> user_role_     t,</span><br><span class="line">       role_role_mbr_ rr</span><br><span class="line"> <span class="keyword">WHERE</span> t.role_id = rr.ase_role_id(+)</span><br><span class="line">      <span class="comment">/* å‚æ•° */</span></span><br><span class="line">      <span class="comment">-- ç”¨æˆ·ç™»é™†å</span></span><br><span class="line">   <span class="keyword">AND</span> (t.user_login = :p_user <span class="keyword">OR</span> :p_user <span class="keyword">IS</span> <span class="literal">NULL</span>)</span><br><span class="line">      <span class="comment">-- è§’è‰²ç¼–ç ï¼ŒåŒ…å«çˆ¶è§’è‰²</span></span><br><span class="line">   <span class="keyword">AND</span> (:p_role_code <span class="keyword">IS</span> <span class="literal">NULL</span> <span class="keyword">OR</span> t.role_code = :p_role_code <span class="keyword">OR</span> rr.parent_role_code = :p_role_code)</span><br><span class="line">      <span class="comment">-- ç”¨æˆ·æ˜¯å¦æœ‰æ•ˆ</span></span><br><span class="line">   <span class="keyword">AND</span> (t.is_user_active = :p_user_active <span class="keyword">OR</span> :p_user_active <span class="keyword">IS</span> <span class="literal">NULL</span>)</span><br><span class="line">      <span class="comment">-- è§’è‰²æ˜¯å¦æœ‰æ•ˆ</span></span><br><span class="line">   <span class="keyword">AND</span> (t.is_role_active = :p_role_active <span class="keyword">OR</span> :p_role_active <span class="keyword">IS</span> <span class="literal">NULL</span>)</span><br><span class="line">      <span class="comment">-- ç”¨æˆ·è§’è‰²åˆ†é…æ˜¯å¦æœ‰æ•ˆ</span></span><br><span class="line">   <span class="keyword">AND</span> (t.is_user_role_active = :p_user_role_active <span class="keyword">OR</span> :p_user_role_active <span class="keyword">IS</span> <span class="literal">NULL</span>)</span><br><span class="line">      <span class="comment">-- ç”¨æˆ·åˆ›å»ºæ—¶é—´</span></span><br><span class="line">   <span class="keyword">AND</span> (t.user_creation_date &gt;= :p_user_creation_date_from <span class="keyword">OR</span> :p_user_creation_date_from <span class="keyword">IS</span> <span class="literal">NULL</span>)</span><br><span class="line">   <span class="keyword">AND</span> (t.user_creation_date &lt;= :p_user_creation_date_to <span class="keyword">OR</span> :p_user_creation_date_to <span class="keyword">IS</span> <span class="literal">NULL</span>)</span><br><span class="line">      <span class="comment">-- è§’è‰²åˆ›å»ºæ—¶é—´</span></span><br><span class="line">   <span class="keyword">AND</span> (t.role_creation_date &gt;= :p_role_creation_date_from <span class="keyword">OR</span> :p_role_creation_date_from <span class="keyword">IS</span> <span class="literal">NULL</span>)</span><br><span class="line">   <span class="keyword">AND</span> (t.role_creation_date &lt;= :p_role_creation_date_to <span class="keyword">OR</span> :p_role_creation_date_to <span class="keyword">IS</span> <span class="literal">NULL</span>)</span><br><span class="line">      <span class="comment">-- ç”¨æˆ·è§’è‰²åˆ›å»ºæ—¶é—´</span></span><br><span class="line">   <span class="keyword">AND</span> (t.user_role_creation_date &gt;= :p_ur_creation_date_from <span class="keyword">OR</span> :p_ur_creation_date_from <span class="keyword">IS</span> <span class="literal">NULL</span>)</span><br><span class="line">   <span class="keyword">AND</span> (t.user_role_creation_date &lt;= :p_ur_creation_date_to <span class="keyword">OR</span> :p_ur_creation_date_to <span class="keyword">IS</span> <span class="literal">NULL</span>)</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://community.oracle.com/thread/3924763?parent=MOSC_EXTERNAL&amp;sourceId=MOSC&amp;id=3924763" target="_blank" rel="noopener">https://community.oracle.com/thread/3924763?parent=MOSC_EXTERNAL&amp;sourceId=MOSC&amp;id=3924763</a></p><p><img src="/images/oracle_cloud/20190823223516.png" alt="å‚è€ƒ"> hen</p>]]></content>
    
    <summary type="html">
    
      oracle cloud ä¸­ç”¨æˆ·è§’è‰²æƒé™ä¹‹é—´çš„è¡¨å…³ç³»
    
    </summary>
    
      <category term="Oracle Cloud" scheme="http://yoursite.com/categories/Oracle-Cloud/"/>
    
    
      <category term="Oracle Cloud" scheme="http://yoursite.com/tags/Oracle-Cloud/"/>
    
      <category term="Role-Privileges" scheme="http://yoursite.com/tags/Role-Privileges/"/>
    
  </entry>
  
  <entry>
    <title>åˆè¯† OOM</title>
    <link href="http://yoursite.com/2019/06/20/Java/jvm/oom-1/"/>
    <id>http://yoursite.com/2019/06/20/Java/jvm/oom-1/</id>
    <published>2019-06-19T16:00:00.000Z</published>
    <updated>2020-10-14T01:58:17.313Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ä»€ä¹ˆæ˜¯-OOM"><a href="#ä»€ä¹ˆæ˜¯-OOM" class="headerlink" title="ä»€ä¹ˆæ˜¯ OOM"></a>ä»€ä¹ˆæ˜¯ OOM</h3><p>OOMï¼ŒOut of Memoryï¼Œä¹Ÿå°±æ˜¯è¶…å‡ºäº†é¢„è®¾å†…å­˜ã€‚</p><blockquote><p>java.lang.OutOfMemoryErrorï¼Œå®˜æ–¹è¯´æ˜ï¼š Thrown when the Java Virtual Machine cannot allocate an object because it is out of memory, and no more memory could be made available by the garbage collector. æ„æ€å°±æ˜¯è¯´ï¼Œå½“ JVM æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜æ¥ä¸ºå¯¹è±¡åˆ†é…ç©ºé—´ï¼Œå¹¶ä¸”åƒåœ¾å›æ”¶å™¨ä¹Ÿå·²ç»æ²¡æœ‰ç©ºé—´å¯å›æ”¶æ—¶ï¼Œå°±ä¼šæŠ›å‡ºè¿™ä¸ªerrorï¼ˆæ³¨ï¼šéexceptionï¼Œå› ä¸ºè¿™ä¸ªé—®é¢˜å·²ç»ä¸¥é‡åˆ°ä¸è¶³ä»¥è¢«åº”ç”¨å¤„ç†ï¼‰ã€‚</p></blockquote><h3 id="ä¸ºä»€ä¹ˆä¼š-OOM"><a href="#ä¸ºä»€ä¹ˆä¼š-OOM" class="headerlink" title="ä¸ºä»€ä¹ˆä¼š OOM"></a>ä¸ºä»€ä¹ˆä¼š OOM</h3><p>ä¸»è¦åŸå› æœ‰ä¸¤ç‚¹</p><ol><li>åˆ†é…å†…å­˜ä¸è¶³ï¼Œå¯ç”¨é€šè¿‡è°ƒæ•´å¯åŠ¨ VM å‚æ•°æ§åˆ¶ã€‚</li><li>ç¨‹åºé€»è¾‘é—®é¢˜ï¼Œå ç”¨è¿‡å¤šå†…å­˜å¹¶ä¸”ä½¿ç”¨å®Œæ²¡æœ‰åŠæ—¶é‡Šæ”¾ï¼Œé€ æˆå†…å­˜æ³„éœ²æˆ–è€…å†…å­˜æº¢å‡ºã€‚</li></ol><p>å…¶ä¸­ï¼š</p><ul><li><p>å†…å­˜æ³„æ¼ï¼šç”³è¯·ä½¿ç”¨å®Œçš„å†…å­˜æ²¡æœ‰é‡Šæ”¾ï¼Œå¯¼è‡´è™šæ‹Ÿæœºä¸èƒ½å†æ¬¡ä½¿ç”¨è¯¥å†…å­˜ï¼Œæ­¤æ—¶è¿™æ®µå†…å­˜å°±æ³„éœ²äº†ï¼Œå› ä¸ºç”³è¯·è€…ä¸ç”¨äº†ï¼Œè€Œåˆä¸èƒ½è¢«è™šæ‹Ÿæœºåˆ†é…ç»™åˆ«äººç”¨ã€‚ï¼ˆå¾€å¾€æ˜¯ç¼–ç ä¸å½“å¯¼è‡´ï¼‰</p></li><li><p>å†…å­˜æº¢å‡ºï¼šç”³è¯·çš„å†…å­˜è¶…å‡ºäº†JVMèƒ½æä¾›çš„å†…å­˜å¤§å°ï¼Œæ­¤æ—¶ç§°ä¹‹ä¸ºæº¢å‡ºã€‚</p></li></ul><h3 id="JVM-å†…å­˜æ¨¡å‹"><a href="#JVM-å†…å­˜æ¨¡å‹" class="headerlink" title="JVM å†…å­˜æ¨¡å‹"></a>JVM å†…å­˜æ¨¡å‹</h3><p>ä¸Šé¢é¢‘ç¹æåˆ°çš„å†…å­˜æŒ‡çš„å°±æ˜¯ JVM å†…å­˜æ¨¡å‹ã€‚</p><p>JVM åœ¨è¿è¡Œä¼šç®¡ç†ä»¥ä¸‹çš„å†…å­˜åŒºåŸŸï¼š</p><ul><li>ç¨‹åºè®¡æ•°å™¨ï¼šå½“å‰çº¿ç¨‹æ‰§è¡Œçš„å­—èŠ‚ç çš„<font color="red">è¡Œå·æŒ‡ç¤ºå™¨</font>ï¼Œ<font color="red">çº¿ç¨‹ç§æœ‰</font>ï¼Œè®°å½•æ¯ä¸ªçº¿ç¨‹å½“å‰æ‰§è¡Œå­—èŠ‚ç çš„ä½ç½®ï¼Œå› ä¸ºä¼šæœ‰å¤šä¸ªçº¿ç¨‹æ¥å¹¶å‘æ‰§è¡Œå„ç§ä¸åŒçš„ä»£ç ï¼Œæ‰€æœ‰æ¯ä¸ªçº¿ç¨‹ä¼šæœ‰è‡ªå·±çš„ä¸€ä¸ªç¨‹åºè®¡æ•°å™¨ï¼Œä¸“é—¨è®°å½•è¿™ä¸ªçº¿ç¨‹ç›®å‰æ‰§è¡Œåˆ°å“ªä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤ï¼Œä¹Ÿå°±æ˜¯çº¿ç¨‹ç§æœ‰ï¼›</li><li>java è™šæ‹Ÿæœºæ ˆï¼šä¿å­˜æ–¹æ³•å†…å±€éƒ¨å˜é‡æ•°æ®çš„åŒºåŸŸï¼Œçº¿ç¨‹ç§æœ‰ã€‚çº¿ç¨‹æ‰§è¡Œäº†ä¸€ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆå°±ä¼šä¸ºè¿™ä¸ªæ–¹æ³•è°ƒç”¨åˆ›å»ºå¯¹åº”çš„ä¸€ä¸ª<font color="red">æ ˆå¸§</font>ã€‚æ ˆå¸§é‡Œæœ‰è¿™ä¸ªæ–¹æ³•çš„å±€éƒ¨å˜é‡è¡¨ ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¸œè¥¿ï¼Œè°ƒç”¨æ‰§è¡Œä»»ä½•æ–¹æ³•çš„æ—¶å€™ï¼Œéƒ½ä¼šç»™æ–¹æ³•åˆ›å»ºæ ˆå¸§ï¼Œç„¶åå…¥æ ˆï¼Œè°ƒç”¨å®Œå†å‡ºæ ˆï¼›</li><li>æœ¬åœ°æ–¹æ³•æ ˆï¼šç±»ä¼¼â€œjava è™šæ‹Ÿæœºæ ˆâ€ï¼Œä½†æ˜¯ä¸º native æ–¹æ³•çš„è¿è¡Œæä¾›å†…å­˜ç¯å¢ƒï¼Œè°ƒç”¨æœ¬åœ°æ“ä½œç³»ç»Ÿé‡Œé¢çš„ä¸€äº›æ–¹æ³•ï¼Œå¯èƒ½æ˜¯è°ƒç”¨ c è¯­è¨€å†™çš„åº•å±‚ç±»åº“æä¾›çš„å†…å­˜ç¯å¢ƒï¼›</li><li>java å †å†…å­˜ï¼šå¯¹è±¡å†…å­˜åˆ†é…çš„åœ°æ–¹ï¼Œå†…å­˜åƒåœ¾å›æ”¶çš„ä¸»è¦åŒºåŸŸï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«ã€‚å¯¹è±¡æŒ‰ä¸åŒçš„ â€œç”Ÿå­˜â€ æƒ…å†µåˆ†ä¸ºæ–°ç”Ÿä»£ï¼Œè€å¹´ä»£ç­‰ï¼›</li><li>æ–¹æ³•åŒº/Metaspaceï¼šJDK 1.8 åå«åš Metaspaceï¼ŒJDK 8 å¼€å§‹æŠŠç±»çš„å…ƒæ•°æ®æ”¾åˆ°æœ¬åœ°å †å†…å­˜(native heap)ä¸­ï¼Œè¿™ä¸€å—åŒºåŸŸå°±å« Metaspaceï¼Œè¯¦æƒ…è§<a href="https://www.sczyh30.com/posts/Java/jvm-metaspace/" target="_blank" rel="noopener">æ·±å…¥æ¢ç©¶ JVM | æ¢ç§˜ Metaspace</a>ï¼›</li><li>å †å¤–å†…å­˜ï¼šå¹¶ä¸æ˜¯ JVM è¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼Œå¯ç›´æ¥è®¿é—®çš„å†…å­˜ï¼Œæ¯”å¦‚ NIO ä¼šç”¨åˆ°è¿™éƒ¨åˆ†ï¼›</li></ul><h3 id="OOM-ç±»å‹"><a href="#OOM-ç±»å‹" class="headerlink" title="OOM ç±»å‹"></a>OOM ç±»å‹</h3><ul><li><code>java.lang.OutOfMemoryError: Java heap space</code>ï¼Œæ¯”è¾ƒå¸¸è§ï¼Œjava å †å†…å­˜æº¢å‡ºã€‚è¯¦æƒ…è§<a href="https://blog.csdn.net/renfufei/article/details/76350794" target="_blank" rel="noopener">OutOfMemoryErrorç³»åˆ—ï¼ˆ1ï¼‰: Java heap space</a></li><li><code>java.lang.OutOfMemoryError: GC overhead limit exceeded</code>ï¼Œç¨‹åºåŸºæœ¬ä¸Šè€—å°½äº†æ‰€æœ‰çš„å¯ç”¨å†…å­˜, GCä¹Ÿæ¸…ç†ä¸äº†ã€‚è¯¦æƒ…è§<a href="https://blog.csdn.net/renfufei/article/details/77585294" target="_blank" rel="noopener">OutOfMemoryErrorç³»åˆ—ï¼ˆ2ï¼‰: GC overhead limit exceeded</a></li><li><code>java.lang.OutOfMemoryError: PermGen space</code>ï¼Œjava æ°¸ä¹…ä»£æº¢å‡ºï¼Œä¹Ÿå°±æ˜¯æ–¹æ³•åŒºæº¢å‡ºï¼Œjdk 7 ä¹‹å‰ã€‚è¯¦æƒ…è§<a href="https://blog.csdn.net/renfufei/article/details/77994177" target="_blank" rel="noopener">OutOfMemoryErrorç³»åˆ—ï¼ˆ3ï¼‰: Permgen space</a></li><li><code>java.lang.OutOfMemoryError: Metaspace</code>ï¼Œç›¸å½“äº jdk 7ä»¥å‰çš„ <code>java.lang.OutOfMemoryError: PermGen space</code>ã€‚è¯¦æƒ…è§<a href="https://blog.csdn.net/renfufei/article/details/78061354" target="_blank" rel="noopener">OutOfMemoryErrorç³»åˆ—ï¼ˆ4ï¼‰: Metaspace</a></li><li><code>java.lang.StackOverflowError</code>ï¼Œä¸ä¼šæŠ› OOM ERRORï¼Œä½†ä¹Ÿæ˜¯æ¯”è¾ƒå¸¸è§çš„ Java å†…å­˜æº¢å‡º</li></ul><h3 id="æŸ¥çœ‹åº”ç”¨è¿›ç¨‹idï¼ˆpidï¼‰åŠå¯åŠ¨-VM-å‚æ•°"><a href="#æŸ¥çœ‹åº”ç”¨è¿›ç¨‹idï¼ˆpidï¼‰åŠå¯åŠ¨-VM-å‚æ•°" class="headerlink" title="æŸ¥çœ‹åº”ç”¨è¿›ç¨‹idï¼ˆpidï¼‰åŠå¯åŠ¨ VM å‚æ•°"></a>æŸ¥çœ‹åº”ç”¨è¿›ç¨‹idï¼ˆpidï¼‰åŠå¯åŠ¨ VM å‚æ•°</h3><p><code>jps -v</code> æŸ¥æ‰¾åº”ç”¨è¿›ç¨‹ id </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jps -v</span><br><span class="line"></span><br><span class="line">29591 Jps -Dapplication.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.191.b12-1.el7_6.x86_64 -Xms8m</span><br><span class="line">9066 Bootstrap -Djava.util.logging.config.file=/xxx/tomcat/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Xms512m -Xmx2048m -Djdk.tls.ephemeralDHKeySize=2048 -Xms4096m -Xmx10240m -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/xxx/dump -Djava.protocol.handler.pkgs=org.apache.catalina.webresources -Dorg.apache.catalina.security.SecurityListener.UMASK=0027 -Dignore.endorsed.dirs= -Dcatalina.base=/xxx/tomcat -Dcatalina.home=/xxx/lib/tomcat -Djava.io.tmpdir=/xxx/tomcat/temp</span><br></pre></td></tr></table></figure><p><code>jinfo -flags &lt;pid&gt;</code> æŸ¥çœ‹ VM å¯åŠ¨å‚æ•°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">jinfo -flags 9066</span><br><span class="line"></span><br><span class="line">Attaching to process ID 9066, please <span class="built_in">wait</span>...</span><br><span class="line">Debugger attached successfully.</span><br><span class="line">Server compiler detected.</span><br><span class="line">JVM version is 25.191-b12</span><br><span class="line">Non-default VM flags: -XX:CICompilerCount=3 -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=null -XX:InitialHeapSize=4294967296 -XX:MaxHeapSize=10737418240 -XX:MaxNewSize=3578789888 -XX:MinHeapDeltaBytes=524288 -XX:NewSize=1431306240 -XX:OldSize=2863661056 -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseParallelGC</span><br><span class="line">Command line:  -Djava.util.logging.config.file=/xxx/tomcat/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Xms512m -Xmx2048m -Djdk.tls.ephemeralDHKeySize=2048 -Xms4096m -Xmx10240m -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/xxx/dump -Djava.protocol.handler.pkgs=org.apache.catalina.webresources -Dorg.apache.catalina.security.SecurityListener.UMASK=0027 -Dignore.endorsed.dirs= -Dcatalina.base=/xxx/tomcat -Dcatalina.home=/xxx/lib/tomcat -Djava.io.tmpdir=/xxx/tomcat/temp</span><br></pre></td></tr></table></figure><p><code>jmap -heap &lt;pid&gt;</code>   æŸ¥çœ‹ VM å¯åŠ¨å‚æ•°ï¼Œä»¥åŠå †å†…å­˜æƒ…å†µ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">jmap -heap 9066</span><br><span class="line"></span><br><span class="line">Attaching to process ID 9066, please <span class="built_in">wait</span>...</span><br><span class="line">Debugger attached successfully.</span><br><span class="line">Server compiler detected.</span><br><span class="line">JVM version is 25.191-b12</span><br><span class="line"></span><br><span class="line">using thread-local object allocation.</span><br><span class="line">Parallel GC with 4 thread(s)</span><br><span class="line"></span><br><span class="line">Heap Configuration:</span><br><span class="line">   MinHeapFreeRatio         = 0</span><br><span class="line">   MaxHeapFreeRatio         = 100</span><br><span class="line">   MaxHeapSize              = 10737418240 (10240.0MB)</span><br><span class="line">   NewSize                  = 1431306240 (1365.0MB)</span><br><span class="line">   MaxNewSize               = 3578789888 (3413.0MB)</span><br><span class="line">   OldSize                  = 2863661056 (2731.0MB)</span><br><span class="line">   NewRatio                 = 2</span><br><span class="line">   SurvivorRatio            = 8</span><br><span class="line">   MetaspaceSize            = 21807104 (20.796875MB)</span><br><span class="line">   CompressedClassSpaceSize = 1073741824 (1024.0MB)</span><br><span class="line">   MaxMetaspaceSize         = 17592186044415 MB</span><br><span class="line">   G1HeapRegionSize         = 0 (0.0MB)</span><br><span class="line"></span><br><span class="line">Heap Usage:</span><br><span class="line">Exception <span class="keyword">in</span> thread <span class="string">"main"</span> java.lang.reflect.InvocationTargetException</span><br><span class="line">        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class="line">        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class="line">        at java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class="line">        at sun.tools.jmap.JMap.runTool(JMap.java:201)</span><br><span class="line">        at sun.tools.jmap.JMap.main(JMap.java:130)</span><br><span class="line">Caused by: java.lang.RuntimeException: unknown CollectedHeap <span class="built_in">type</span> : class sun.jvm.hotspot.gc_interface.CollectedHeap</span><br><span class="line">        at sun.jvm.hotspot.tools.HeapSummary.run(HeapSummary.java:157)</span><br><span class="line">        at sun.jvm.hotspot.tools.Tool.startInternal(Tool.java:260)</span><br><span class="line">        at sun.jvm.hotspot.tools.Tool.start(Tool.java:223)</span><br><span class="line">        at sun.jvm.hotspot.tools.Tool.execute(Tool.java:118)</span><br><span class="line">        at sun.jvm.hotspot.tools.HeapSummary.main(HeapSummary.java:50)</span><br><span class="line">        ... 6 more</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æŠ¥é”™è§£å†³ <a href="https://stackoverflow.com/questions/20109503/exception-when-taking-a-heapdump-using-jmap" target="_blank" rel="noopener">Exception when taking a heapdump using JMAP</a></p><p>è§£å†³å†è¿è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">jmap -heap 9066</span><br><span class="line"></span><br><span class="line">Attaching to process ID 9066, please <span class="built_in">wait</span>...</span><br><span class="line">Debugger attached successfully.</span><br><span class="line">Server compiler detected.</span><br><span class="line">JVM version is 25.191-b12</span><br><span class="line"></span><br><span class="line">using thread-local object allocation.</span><br><span class="line">Parallel GC with 4 thread(s)</span><br><span class="line"></span><br><span class="line">Heap Configuration:</span><br><span class="line">   MinHeapFreeRatio         = 0</span><br><span class="line">   MaxHeapFreeRatio         = 100</span><br><span class="line">   MaxHeapSize              = 10737418240 (10240.0MB)</span><br><span class="line">   NewSize                  = 1431306240 (1365.0MB)</span><br><span class="line">   MaxNewSize               = 3578789888 (3413.0MB)</span><br><span class="line">   OldSize                  = 2863661056 (2731.0MB)</span><br><span class="line">   NewRatio                 = 2</span><br><span class="line">   SurvivorRatio            = 8</span><br><span class="line">   MetaspaceSize            = 21807104 (20.796875MB)</span><br><span class="line">   CompressedClassSpaceSize = 1073741824 (1024.0MB)</span><br><span class="line">   MaxMetaspaceSize         = 17592186044415 MB</span><br><span class="line">   G1HeapRegionSize         = 0 (0.0MB)</span><br><span class="line"></span><br><span class="line">Heap Usage:</span><br><span class="line">PS Young Generation</span><br><span class="line">Eden Space:</span><br><span class="line">   capacity = 1209532416 (1153.5MB)</span><br><span class="line">   used     = 279076032 (266.14764404296875MB)</span><br><span class="line">   free     = 930456384 (887.3523559570312MB)</span><br><span class="line">   23.073051065710338% used</span><br><span class="line">From Space:</span><br><span class="line">   capacity = 112721920 (107.5MB)</span><br><span class="line">   used     = 9442424 (9.004997253417969MB)</span><br><span class="line">   free     = 103279496 (98.49500274658203MB)</span><br><span class="line">   8.376741631086482% used</span><br><span class="line">To Space:</span><br><span class="line">   capacity = 109051904 (104.0MB)</span><br><span class="line">   used     = 0 (0.0MB)</span><br><span class="line">   free     = 109051904 (104.0MB)</span><br><span class="line">   0.0% used</span><br><span class="line">PS Old Generation</span><br><span class="line">   capacity = 2976907264 (2839.0MB)</span><br><span class="line">   used     = 609708576 (581.4634094238281MB)</span><br><span class="line">   free     = 2367198688 (2257.536590576172MB)</span><br><span class="line">   20.481275428806907% used</span><br><span class="line"></span><br><span class="line">67050 interned Strings occupying 6996392 bytes.</span><br></pre></td></tr></table></figure><p>è·å–åˆ°çš„ VM å‚æ•°ï¼Œå¯å…³æ³¨å¦‚ä¸‹å‡ é¡¹å‚æ•°çš„æƒ…å†µ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-XX:+HeapDumpOnOutOfMemoryError  <span class="comment"># æ˜¯å¦å¼€å¯ OOM æ—¶è¾“å‡º dump æ–‡ä»¶ï¼Œ+ è¡¨ç¤ºå¼€å¯</span></span><br><span class="line">-XX:HeapDumpPath=/data/logs      <span class="comment"># è‹¥é…ç½®è¯¥é¡¹ï¼Œdump æ–‡ä»¶è¾“å‡ºåˆ°è¯¥è·¯å¾„ä¸‹</span></span><br><span class="line"></span><br><span class="line">-XX:+PrintGCDetails              <span class="comment"># æ˜¯å¦æ‰“å° GC è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">-XX:+PrintGCTimeStamps           <span class="comment"># æ˜¯å¦æ‰“å° GC æ—¶é—´æˆ³(åŸºå‡†å½¢å¼)</span></span><br><span class="line">-XX:+PrintGCDateStamps           <span class="comment"># æ˜¯å¦æ‰“å° GC æ—¶é—´æˆ³(æ—¥æœŸå½¢å¼)</span></span><br><span class="line">-XX:+PrintTenuringDistribution   <span class="comment"># åœ¨æ¯æ¬¡æ–°ç”Ÿä»£ GC æ—¶ï¼Œè¾“å‡ºå¹¸å­˜åŒºä¸­å¯¹è±¡çš„å¹´é¾„åˆ†å¸ƒ</span></span><br><span class="line">-Xloggc:/data/logs               <span class="comment"># è‹¥é…ç½®è¯¥é¡¹ï¼ŒGC æ—¥å¿—è¾“å‡ºåˆ°è¯¥è·¯å¾„ä¸‹</span></span><br></pre></td></tr></table></figure><p>å¦‚æœåº”ç”¨æ²¡æœ‰å¯ç”¨ç›¸åº”çš„å‚æ•°è¾“å‡ºæ—¥å¿—ï¼Œå¯ä»¥è¿›è¡Œä»¥ä¸‹æ“ä½œæŸ¥çœ‹ç›¸å…³æ—¥å¿—</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.æŸ¥çœ‹åº”ç”¨ GC æ¬¡æ•°åŠå¹³å‡æ¯æ¬¡ GC æ—¶é—´</span></span><br><span class="line">jstat -gc &lt;pid&gt; 5000 <span class="comment"># æ¯ 5 ç§’æ˜¾ç¤ºä¸€æ¬¡ pid çš„è¿›ç¨‹ç”Ÿæˆ GC æƒ…å†µ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.æŸ¥çœ‹ JVM å †å†…å­˜ä¸åŒä»£çš„å…·ä½“ä½¿ç”¨æƒ…å†µ</span></span><br><span class="line">jmap -heap &lt;pid&gt; <span class="comment"># å‚ç…§ä¸Šé¢ä½¿ç”¨</span></span><br></pre></td></tr></table></figure><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://jluncc.github.io/2019/06/10/oom-analysis-1/" target="_blank" rel="noopener">Java OOM åˆ†æ</a></p><p><a href="https://blog.csdn.net/renfufei/article/details/76350794" target="_blank" rel="noopener">OutOfMemoryErrorç³»åˆ—</a></p><p><a href="https://www.sczyh30.com/posts/Java/jvm-metaspace/" target="_blank" rel="noopener">æ·±å…¥æ¢ç©¶ JVM | æ¢ç§˜ Metaspace</a></p>]]></content>
    
    <summary type="html">
    
      åœ¨è¿›è¡Œ java ç¼–ç¨‹çš„æ—¶å€™ï¼Œéš¾å…ä¼šé‡åˆ° java.lang.OutOfMemoryError (ç®€ç§° OOM)ï¼Œä¹Ÿå°±æ˜¯ç¨‹åºå†…å­˜ä¸å¤Ÿç”¨ï¼Œè¿™é‡Œè®©æˆ‘ä»¬ç®€å•çš„äº†è§£ä¸€ä¸‹ OOMã€‚
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
      <category term="jvm" scheme="http://yoursite.com/categories/Java/jvm/"/>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="jvm" scheme="http://yoursite.com/tags/jvm/"/>
    
  </entry>
  
  <entry>
    <title>[è¯‘æ–‡] Spring Security â€“ security none, filters none, access permitAll</title>
    <link href="http://yoursite.com/2019/03/28/Java/spring/security-none-filters-none-access-permitAll/"/>
    <id>http://yoursite.com/2019/03/28/Java/spring/security-none-filters-none-access-permitAll/</id>
    <published>2019-03-27T16:00:00.000Z</published>
    <updated>2020-10-14T01:58:17.357Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ç‰ˆæƒè¯´æ˜ï¼Œæ–‡ç« ç¿»è¯‘è‡³ <a href="https://www.baeldung.com/security-none-filters-none-access-permitAll" target="_blank" rel="noopener">Spring Security â€“ security none, filters none, access permitAll</a></p></blockquote><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>Spring Security æä¾›äº†å‡ ç§å°†è¯·æ±‚æ¨¡å¼é…ç½®ä¸ºä¸å®‰å…¨æˆ–è€…å…è®¸æ‰€æœ‰è®¿é—®çš„æœºåˆ¶ã€‚æ ¹æ®è¿™äº›æœºåˆ¶çš„ä¸åŒï¼Œè¿™å¯èƒ½æ„å‘³ç€æ ¹æœ¬ä¸åœ¨è¿™ä¸ªè·¯å¾„ä¸Šè¿è¡Œå®‰å…¨è¿‡æ»¤å™¨é“¾ï¼Œæˆ–è€…è¿è¡Œäº†å®‰å…¨è¿‡æ»¤å™¨é“¾ä½†å…è®¸è®¿é—®ã€‚</p><h3 id="access-â€permitAllâ€"><a href="#access-â€permitAllâ€" class="headerlink" title="access=â€permitAllâ€"></a><em>access=â€permitAllâ€</em></h3><p>ç»™ <em>&lt;intercept-url></em> æ ‡ç­¾è®¾ç½® <em>access=â€permitAllâ€</em> å…ƒç´ ï¼Œå°†ä¼šç»™æŒ‡å®šè·¯å¾„<strong>å…è®¸</strong>æ‰€æœ‰è¯·æ±‚æˆæƒ:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intercept-url</span> <span class="attr">pattern</span>=<span class="string">"/login*"</span> <span class="attr">access</span>=<span class="string">"permitAll"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ–è€…é€šè¿‡ java é…ç½®:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http.authorizeRequests().antMatchers(<span class="string">"/login*"</span>).permitAll()</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯åœ¨<strong>ä¸ç¦ç”¨å®‰å…¨è¿‡æ»¤å™¨</strong>çš„æƒ…å†µä¸‹å®ç°çš„ï¼Œè¿™äº›è¿‡æ»¤å™¨ä»åœ¨è¿è¡Œï¼Œå› æ­¤ä»»ä½•ä¸ Spring Security ç›¸å…³çš„åŠŸèƒ½ä»ç„¶å¯ä»¥ä½¿ç”¨ã€‚</p><h3 id="filters-â€noneâ€"><a href="#filters-â€noneâ€" class="headerlink" title="filters=â€noneâ€"></a><em>filters=â€noneâ€</em></h3><p>è¿™æ˜¯åœ¨ Spring 3.1 å‰çš„åŠŸèƒ½ï¼Œ<strong>å·²åœ¨ Spring 3.1 ä¸­å¼ƒç”¨å’Œè¢«æ›¿ä»£äº†</strong>ã€‚</p><p>è¿™ä¸ª filter å±æ€§å®Œå…¨ç¦ç”¨æŒ‡å®šçš„è¯·æ±‚è·¯å¾„ä¸Šçš„ Spring Security è¿‡æ»¤å™¨é“¾:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intercept-url</span> <span class="attr">pattern</span>=<span class="string">"/login*"</span> <span class="attr">filters</span>=<span class="string">"none"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>å½“å¤„ç†è¯·æ±‚éœ€è¦ Spring Security çš„æŸäº›åŠŸèƒ½æ—¶ï¼Œè¿™å¯èƒ½ä¼šæœ‰é—®é¢˜ã€‚</p><p>ç”±äºåœ¨ Spring 3.0+ ç‰ˆæœ¬è¿™æ˜¯ä¸€ä¸ªè¢«å¼ƒç”¨çš„åŠŸèƒ½ï¼Œåœ¨ Spring 3.1 ä¸­ä½¿ç”¨å®ƒå°†å¯¼è‡´å¯åŠ¨æ—¶å‡ºç°è¿è¡Œæ—¶å¼‚å¸¸:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SEVERE: Context initialization failed</span><br><span class="line">org.springframework.beans.factory.parsing.BeanDefinitionParsingException: </span><br><span class="line">Configuration problem: The use of "filters='none'" is no longer supported. </span><br><span class="line">Please define a separate &lt;http&gt; element for the pattern you want to exclude </span><br><span class="line">and use the attribute "security='none'".</span><br><span class="line">Offending resource: class path resource [webSecurityConfig.xml]</span><br><span class="line">    at o.s.b.f.p.FailFastProblemReporter.error(FailFastProblemReporter.java:68)</span><br></pre></td></tr></table></figure><h3 id="security-â€noneâ€"><a href="#security-â€noneâ€" class="headerlink" title="security=â€noneâ€"></a><em>security=â€noneâ€</em></h3><p>æ­£å¦‚æˆ‘ä»¬åœ¨ä¸Šé¢çš„é”™è¯¯æ¶ˆæ¯ä¸­çœ‹åˆ°çš„é‚£æ ·ï¼ŒSpring 3.1 ç”¨ä¸€ä¸ªæ–°çš„è¡¨è¾¾å¼æ›¿æ¢ <em>filters =â€œnoneâ€</em>  - <em>security =â€œnoneâ€</em>ã€‚</p><p>èŒƒå›´ä¹Ÿå‘ç”Ÿäº†å˜åŒ– â€”â€” è¿™ä¸å†åœ¨ <em>&lt;intercept-url></em> å…ƒç´ çº§åˆ«æŒ‡å®šã€‚ç›¸åï¼ŒSpring 3.1 å…è®¸å®šä¹‰å¤šä¸ª <em>&lt;http></em> å…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰è‡ªå·±çš„å®‰å…¨è¿‡æ»¤é“¾é…ç½®ã€‚å› æ­¤ï¼Œæ–°çš„å®‰å…¨å±æ€§ç°åœ¨å±äº <em>&lt;http></em> å…ƒç´ çº§åˆ«ã€‚</p><p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå®ƒé•¿è¿™æ ·:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">http</span> <span class="attr">pattern</span>=<span class="string">"/resources/**"</span> <span class="attr">security</span>=<span class="string">"none"</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ–è€…é€šè¿‡ java é…ç½®:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">web.ignoring().antMatchers(<span class="string">"/resources/**"</span>);</span><br></pre></td></tr></table></figure><p>è€Œä¸æ˜¯æ—§çš„:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intercept-url</span> <span class="attr">pattern</span>=<span class="string">"/resources/**"</span> <span class="attr">filters</span>=<span class="string">"none"</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸ <em>filters =â€œnoneâ€</em> ç±»ä¼¼ï¼Œè¿™ä¹Ÿå°†å®Œå…¨ç¦ç”¨è¯¥è¯·æ±‚è·¯å¾„çš„å®‰å…¨è¿‡æ»¤å™¨é“¾ - å› æ­¤ï¼Œå½“åœ¨åº”ç”¨ç¨‹åºä¸­å¤„ç†è¯·æ±‚æ—¶ï¼ŒSpring Security åŠŸèƒ½å°†ä¸å¯ç”¨ã€‚</p><p>å¯¹äºä¸Šé¢çš„ç¤ºä¾‹è€Œè¨€ï¼Œè¿™ä¸æ˜¯é—®é¢˜ï¼Œå…¶ä¸»è¦æ¶‰åŠ<strong>æä¾›é™æ€èµ„æº</strong> - åœ¨å®é™…ä¸­ä¸éœ€è¦åšç‰¹æ®Šå¤„ç†ã€‚ä½†æ˜¯ï¼Œå¦‚æœä»¥æŸç§æ–¹å¼ä»¥ç¼–ç¨‹æ–¹å¼å¤„ç†è¯·æ±‚ - é‚£ä¹ˆå®‰å…¨åŠŸèƒ½ï¼ˆä¾‹å¦‚ï¼Œ<em>requires-channel</em>ï¼Œè®¿é—®å½“å‰ç”¨æˆ·æˆ–è°ƒç”¨å®‰å…¨æ–¹æ³•ï¼‰å°†ä¸å¯ç”¨ã€‚</p><p>å‡ºäºåŒæ ·çš„åŸå› ï¼Œåœ¨å·²ç»é…ç½®äº† <em>security=â€noneâ€</em> çš„ <em>&lt;http></em> å…ƒç´ ä¸ŠæŒ‡å®šé™„åŠ å±æ€§æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºè¯¥è¯·æ±‚è·¯å¾„æ˜¯ä¸å®‰å…¨çš„ï¼Œè¿™äº›å±æ€§å°†è¢«å¿½ç•¥ã€‚</p><p>æˆ–è€…ï¼Œ<em>access=â€™IS_AUTHENTICATED_ANONYMOUSLYâ€™</em>  å¯ç”¨äºå…è®¸åŒ¿åè®¿é—®ã€‚</p><h3 id="Caveats-for-security-â€noneâ€"><a href="#Caveats-for-security-â€noneâ€" class="headerlink" title="Caveats for security=â€noneâ€"></a><em>Caveats for security=â€noneâ€</em></h3><p>å½“ä½¿ç”¨å¤šä¸ª <em>&lt;http></em> å…ƒç´ æ—¶ï¼Œæœ‰äº›é…ç½®äº† <em>security =â€œnoneâ€</em>ï¼Œè¯·è®°ä½ï¼Œå®šä¹‰è¿™äº›å…ƒç´ çš„é¡ºåºå¾ˆé‡è¦ã€‚æˆ‘ä»¬åº”è¯¥é¦–å…ˆä½¿ç”¨ç‰¹å®šçš„ <em>&lt;http></em> è·¯å¾„ï¼Œæœ€åå†ä½¿ç”¨é€šç”¨æ¨¡å¼ã€‚</p><p>å¦è¯·æ³¨æ„ï¼Œå¦‚æœ <em>&lt;http></em> å…ƒç´ <strong>æœªæŒ‡å®šæ¨¡å¼</strong>ï¼Œåˆ™é»˜è®¤æƒ…å†µä¸‹ï¼Œæ˜ å°„åˆ°é€šç”¨åŒ¹é…æ¨¡å¼ - â€œ/** â€ - å› æ­¤ï¼Œæ­¤å…ƒç´ å¿…é¡»æ˜¯æœ€åä¸€ä¸ªã€‚å¦‚æœå…ƒç´ çš„é¡ºåºä¸æ­£ç¡®ï¼Œ<strong>åˆ™å®‰å…¨è¿‡æ»¤å™¨é“¾</strong>çš„<strong>åˆ›å»ºå°†å¤±è´¥</strong>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Caused by: java.lang.IllegalArgumentException: A universal match pattern ('/**') </span><br><span class="line">is defined  before other patterns in the filter chain, causing them to be ignored. </span><br><span class="line">Please check the ordering in your &lt;security:http&gt; namespace or FilterChainProxy bean configuration</span><br><span class="line">    at o.s.s.c.h.DefaultFilterChainValidator.checkPathOrder(DefaultFilterChainValidator.java:49)</span><br><span class="line">    at o.s.s.c.h.DefaultFilterChainValidator.validate(DefaultFilterChainValidator.java:39)</span><br></pre></td></tr></table></figure><h3 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h3><p>æœ¬æ–‡è®¨è®ºäº†å…è®¸ä½¿ç”¨ Spring Security è®¿é—®è·¯å¾„çš„é€‰é¡¹ - é‡ç‚¹å…³æ³¨ <strong>filters =â€œnoneâ€ï¼Œsecurity =â€œnoneâ€ å’Œ access =â€œpermitAllâ€</strong> ä¹‹é—´çš„å·®å¼‚ã€‚</p><p>åƒå¾€å¸¸ä¸€æ ·ï¼Œè¿™äº›ä¾‹å­å¯ä»¥åœ¨ <a href="https://github.com/eugenp/tutorials/tree/master/spring-security-mvc-ldap" target="_blank" rel="noopener">GitHub</a> ä¸Šæ‰¾åˆ°ã€‚</p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://www.baeldung.com/security-none-filters-none-access-permitAll" target="_blank" rel="noopener">Spring Security â€“ security none, filters none, access permitAll</a></li></ul>]]></content>
    
    <summary type="html">
    
      Spring Security æä¾›äº†å‡ ç§å°†è¯·æ±‚æ¨¡å¼é…ç½®ä¸ºä¸å®‰å…¨æˆ–è€…å…è®¸æ‰€æœ‰è®¿é—®çš„æœºåˆ¶ã€‚æ ¹æ®è¿™äº›æœºåˆ¶çš„ä¸åŒï¼Œè¿™å¯èƒ½æ„å‘³ç€æ ¹æœ¬ä¸åœ¨è¿™ä¸ªè·¯å¾„ä¸Šè¿è¡Œå®‰å…¨è¿‡æ»¤å™¨é“¾ï¼Œæˆ–è€…è¿è¡Œäº†å®‰å…¨è¿‡æ»¤å™¨é“¾ä½†å…è®¸è®¿é—®
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
      <category term="Spring" scheme="http://yoursite.com/categories/Java/Spring/"/>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="Spring" scheme="http://yoursite.com/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>Java ä»£ç†ä¸­è½¬ä¸‹è½½ url æ–‡ä»¶</title>
    <link href="http://yoursite.com/2019/03/21/Java/java-proxy-url-file/"/>
    <id>http://yoursite.com/2019/03/21/Java/java-proxy-url-file/</id>
    <published>2019-03-20T16:00:00.000Z</published>
    <updated>2020-10-14T01:58:17.251Z</updated>
    
    <content type="html"><![CDATA[<h3 id="åœºæ™¯æè¿°"><a href="#åœºæ™¯æè¿°" class="headerlink" title="åœºæ™¯æè¿°"></a>åœºæ™¯æè¿°</h3><p>æˆ‘ä»¬æœ‰ä¸€ä¸ªå¤–ç½‘è®¿é—®çš„ java web ç³»ç»Ÿ Aï¼Œè¿™ä¸ªç³»ç»Ÿä¼šå»è¯·æ±‚ä¸€ä¸ªå†…ç½‘ç³»ç»Ÿ B è·å–æ–‡ä»¶æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä¼šè¿”å›ä¸€ä¸ªå†…ç½‘çš„ä¸‹è½½åœ°å€ç»™æˆ‘ä»¬ã€‚å‡å¦‚æˆ‘ä»¬åªæ˜¯æŠŠåœ°å€æä¾›å‡ºå»ï¼Œè¿™ä¸ªæ—¶å€™å¤–ç½‘æ˜¯æ— æ³•ä¸‹è½½åˆ°æ–‡ä»¶çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ A ç³»ç»Ÿå¯¹ B ç³»ç»Ÿè¿”å›çš„æ–‡ä»¶ä¸‹è½½åœ°å€è¿›è¡Œä¸­è½¬ï¼Œä»è€Œæš´éœ²å‡ºåŸºäº A ç³»ç»Ÿçš„å¤–ç½‘ä¸‹è½½åœ°å€ã€‚</p><h3 id="ä»£ç å¼€å‘"><a href="#ä»£ç å¼€å‘" class="headerlink" title="ä»£ç å¼€å‘"></a>ä»£ç å¼€å‘</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * url æ–‡ä»¶ä»£ç†ä¸­è½¬</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> address</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> contentType</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> fileName</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">proxyUrlFile</span><span class="params">(HttpServletResponse response, String address, String contentType, String fileName)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">     InputStream inputStream = <span class="keyword">null</span>;</span><br><span class="line">     ServletOutputStream outputStream = <span class="keyword">null</span>;</span><br><span class="line">     HttpURLConnection httpURLConnection = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">         URL url = <span class="keyword">new</span> URL(address);</span><br><span class="line">         httpURLConnection = (HttpURLConnection) url.openConnection();</span><br><span class="line">         httpURLConnection.connect();</span><br><span class="line">         inputStream = httpURLConnection.getInputStream();</span><br><span class="line"></span><br><span class="line">         outputStream = response.getOutputStream();</span><br><span class="line"></span><br><span class="line">         <span class="keyword">if</span> (contentType != <span class="keyword">null</span>) &#123;</span><br><span class="line">             response.setContentType(contentType);</span><br><span class="line">         &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">             <span class="comment">// è®¾ç½®æ–‡ä»¶ContentTypeç±»å‹ï¼Œè¿™æ ·è®¾ç½®ï¼Œä¼šè‡ªåŠ¨åˆ¤æ–­ä¸‹è½½æ–‡ä»¶ç±»å‹</span></span><br><span class="line">             response.setContentType(<span class="string">"multipart/form-data"</span>);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">if</span> (fileName != <span class="keyword">null</span>) &#123;</span><br><span class="line">             response.setHeader(<span class="string">"Content-disposition"</span>, <span class="string">"attachment; filename=\""</span></span><br><span class="line">                     + <span class="keyword">new</span> String(fileName.getBytes(<span class="string">"utf-8"</span>), <span class="string">"ISO8859-1"</span>)+<span class="string">"\""</span>);</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">         <span class="comment">// åˆ›å»ºä¸€ä¸ªBufferå­—ç¬¦ä¸²</span></span><br><span class="line">         <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">         <span class="comment">// æ¯æ¬¡è¯»å–çš„å­—ç¬¦ä¸²é•¿åº¦ï¼Œå¦‚æœä¸º-1ï¼Œä»£è¡¨å…¨éƒ¨è¯»å–å®Œæ¯•</span></span><br><span class="line">         <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">         <span class="comment">// ä½¿ç”¨ä¸€ä¸ªè¾“å…¥æµä»bufferé‡ŒæŠŠæ•°æ®è¯»å–å‡ºæ¥</span></span><br><span class="line">         <span class="keyword">while</span>((len = inputStream.read(buffer)) != -<span class="number">1</span> )&#123;</span><br><span class="line">             <span class="comment">// ç”¨è¾“å‡ºæµå¾€bufferé‡Œå†™å…¥æ•°æ®ï¼Œä¸­é—´å‚æ•°ä»£è¡¨ä»å“ªä¸ªä½ç½®å¼€å§‹è¯»ï¼Œlenä»£è¡¨è¯»å–çš„é•¿åº¦</span></span><br><span class="line">             outputStream.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">     &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">         log.error(<span class="string">"Proxy URL File error, e = &#123;&#125;"</span>, e);</span><br><span class="line">         <span class="keyword">throw</span> e;</span><br><span class="line">     &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">         <span class="keyword">if</span> (inputStream != <span class="keyword">null</span>) &#123;</span><br><span class="line">             inputStream.close();</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">if</span> (outputStream != <span class="keyword">null</span>) &#123;</span><br><span class="line">             outputStream.flush();</span><br><span class="line">             outputStream.close();</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">if</span> (httpURLConnection != <span class="keyword">null</span>) &#123;</span><br><span class="line">             httpURLConnection.disconnect();</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * url æ–‡ä»¶ä»£ç†ä¸­è½¬</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> url</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/fnd/proxy/url/file"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">proxyFile</span><span class="params">(HttpServletResponse response, @RequestParam(<span class="string">"fileName"</span>)</span> String fileName, @<span class="title">RequestParam</span><span class="params">(<span class="string">"url"</span>)</span> String url) <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        FileOperateUtil.proxyUrlFile(response, url, <span class="keyword">null</span>, fileName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      æœ‰æ—¶å€™ç”±äºç½‘ç»œé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æœåŠ¡å™¨å¯¹åˆ«çš„ç³»ç»Ÿå†…ç½‘çš„æ–‡ä»¶ä¸‹è½½ä¸­è½¬ï¼Œç„¶åæš´éœ²å‡ºå¤–ç½‘ä¸‹è½½åœ°å€ã€‚
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>ADFS å®‰è£…åŠé…ç½®</title>
    <link href="http://yoursite.com/2019/03/11/sso/adfs/adfs-install/"/>
    <id>http://yoursite.com/2019/03/11/sso/adfs/adfs-install/</id>
    <published>2019-03-10T16:00:00.000Z</published>
    <updated>2020-10-14T01:58:17.640Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å®‰è£…å‰å‡†å¤‡"><a href="#å®‰è£…å‰å‡†å¤‡" class="headerlink" title="å®‰è£…å‰å‡†å¤‡"></a>å®‰è£…å‰å‡†å¤‡</h3><p>åœ¨å®‰è£… ADFS ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡å· DCï¼Œå‚è€ƒ <a href="https://blog.joden123.top/2019/03/09/sso/adfs/adds-install/" target="_blank" rel="noopener">ADDS æ´»åŠ¨ç›®å½•å®‰è£…è¯¦è§£</a></p><p><img src="/images/sso/adfs/adfs-install/dc.png" alt="DC"></p><h3 id="å®‰è£…é…ç½®è¯ä¹¦æœåŠ¡"><a href="#å®‰è£…é…ç½®è¯ä¹¦æœåŠ¡" class="headerlink" title="å®‰è£…é…ç½®è¯ä¹¦æœåŠ¡"></a>å®‰è£…é…ç½®è¯ä¹¦æœåŠ¡</h3><h4 id="åœ¨-DC-ä¸Šå®‰è£…-CA"><a href="#åœ¨-DC-ä¸Šå®‰è£…-CA" class="headerlink" title="åœ¨ DC ä¸Šå®‰è£… CA"></a>åœ¨ DC ä¸Šå®‰è£… CA</h4><ul><li>æ‰“å¼€æœåŠ¡å™¨ç®¡ç†å™¨ï¼Œç‚¹å‡» â€œæ·»åŠ è§’è‰²å’ŒåŠŸèƒ½â€</li></ul><p><img src="/images/sso/adfs/adfs-install/step1.png" alt="step 1"></p><ul><li>ä¿æŒé»˜è®¤ï¼Œå¹¶è¿ç»­ç‚¹å‡»ä¸‰æ¬¡â€œä¸‹ä¸€æ­¥â€</li></ul><p><img src="/images/sso/adfs/adfs-install/step2.png" alt="step 2"></p><ul><li>å‹¾é€‰ â€œActive Directory è¯ä¹¦æœåŠ¡â€ï¼Œç„¶åé€‰æ‹©æ·»åŠ æ‰€éœ€çš„åŠŸèƒ½ï¼Œæœ€åç‚¹â€œä¸‹ä¸€æ­¥â€ç»§ç»­</li></ul><p><img src="/images/sso/adfs/adfs-install/step3.png" alt="step 3"></p><ul><li>åŠŸèƒ½é€‰æ‹©é¡µé¢ä¿æŒé»˜è®¤ï¼Œè¿ç»­ç‚¹å‡»2æ¬¡â€œä¸‹ä¸€æ­¥â€</li></ul><p><img src="/images/sso/adfs/adfs-install/step4.png" alt="step 4"></p><ul><li>å‹¾é€‰ CA ç›¸å…³æœåŠ¡, ä¸€ç›´ç‚¹ä¸‹ä¸€æ­¥ï¼Œæœ€åç‚¹å‡»å®‰è£…</li></ul><p><img src="/images/sso/adfs/adfs-install/step5.png" alt="step 5.1"></p><ul><li>å®‰è£…å®Œæˆ</li></ul><p><img src="/images/sso/adfs/adfs-install/step6.png" alt="step 6"></p><h4 id="é…ç½®è¯ä¹¦æœåŠ¡"><a href="#é…ç½®è¯ä¹¦æœåŠ¡" class="headerlink" title="é…ç½®è¯ä¹¦æœåŠ¡"></a>é…ç½®è¯ä¹¦æœåŠ¡</h4><ul><li>CA å®‰è£…å®Œæˆåï¼Œå¦‚å›¾ç‚¹å‡»æç¤ºå›¾æ ‡åï¼Œé€‰æ‹©â€œé…ç½®ç›®æ ‡æœåŠ¡å™¨ä¸Šçš„ Active Directory è¯ä¹¦æœåŠ¡â€</li></ul><p><img src="/images/sso/adfs/adfs-install/step7.png" alt="step 7"></p><ul><li>æ ¹æ®å‘å¯¼è¿›è¡Œé…ç½®</li></ul><p><img src="/images/sso/adfs/adfs-install/step8.png" alt="step 8"></p><ul><li>å‹¾é€‰æ‰€éœ€è¦é…ç½®çš„æœåŠ¡</li></ul><p><img src="/images/sso/adfs/adfs-install/step9.png" alt="step 9"></p><ul><li>é€‰æ‹©ä¼ä¸šæ ¹</li></ul><p><img src="/images/sso/adfs/adfs-install/step10.1.png" alt="step 10.1"></p><p><img src="/images/sso/adfs/adfs-install/step10.2.png" alt="step 10.2"></p><ul><li>åˆ›å»ºæ–°çš„ç§é’¥</li></ul><p><img src="/images/sso/adfs/adfs-install/step11.1.png" alt="step 11.1"></p><p><img src="/images/sso/adfs/adfs-install/step11.2.png" alt="step 11.2"></p><ul><li>æŒ‡å®š CA åç§°</li></ul><p><img src="/images/sso/adfs/adfs-install/step12.png" alt="step 12"></p><ul><li>æŒ‡å®šæœ‰æ•ˆæœŸ</li></ul><p><img src="/images/sso/adfs/adfs-install/step13.png" alt="step 13"></p><ul><li>æŒ‡å®šæ•°æ®åº“ä½ç½®</li></ul><p><img src="/images/sso/adfs/adfs-install/step14.png" alt="step 14"></p><ul><li>ç¡®è®¤é…ç½®ä¿¡æ¯</li></ul><p><img src="/images/sso/adfs/adfs-install/step15.png" alt="step 15"></p><ul><li>é…ç½®å®Œæˆ</li></ul><p><img src="/images/sso/adfs/adfs-install/step16.png" alt="step 16"></p><ul><li>éªŒè¯ CA</li></ul><p><img src="/images/sso/adfs/adfs-install/step17.1.png" alt="step 17.1"></p><p><img src="/images/sso/adfs/adfs-install/step17.2.png" alt="step 17.2"></p><p>ä»¥ä¸Šç¯å¢ƒå‡†å¤‡å¥½åå°±å¯ä»¥é…ç½® ADFS æœåŠ¡å™¨äº†ã€‚åœ¨é…ç½®å‰æˆ‘ä»¬éœ€è¦ç»™è®¡ç®—æœºæˆ–è€…æŒ‡å®šçš„ç”¨æˆ·æˆ–è€…è®¡ç®—æœºæˆæƒè¯ä¹¦é¢å‘ã€‚</p><h3 id="å®‰è£…ADFSæœåŠ¡"><a href="#å®‰è£…ADFSæœåŠ¡" class="headerlink" title="å®‰è£…ADFSæœåŠ¡"></a>å®‰è£…ADFSæœåŠ¡</h3><p>åœ¨å®‰è£… ADFS ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºå’Œé…ç½®è¯ä¹¦</p><h4 id="åˆ›å»ºè¯ä¹¦"><a href="#åˆ›å»ºè¯ä¹¦" class="headerlink" title="åˆ›å»ºè¯ä¹¦"></a>åˆ›å»ºè¯ä¹¦</h4><p>è´¦æˆ·å‡†å¤‡å¥½åï¼Œç„¶åç”³è¯·è¯ä¹¦ï¼Œå…¶å®æœ‰å¾ˆå¸¸è§çš„ä¸¤ç§æ–¹æ³•ï¼Œç¬¬ä¸€ç§å°±æ˜¯é€šè¿‡iisè¿›è¡Œè¯ä¹¦ç”³è¯·ï¼Œç¬¬äºŒç§é€šè¿‡ mmc æ§åˆ¶å°è¿›è¡Œç”³è¯·ï¼Œè¿™é‡Œä½¿ç”¨IISçš„ç”³è¯·æ–¹æ³•ã€‚</p><ul><li>æ‰“å¼€IISç®¡ç†å™¨ï¼Œé€‰æ‹©ã€æœåŠ¡å™¨è¯ä¹¦ã€‘<br>åˆ›å»ºè¯ä¹¦ç”³è¯· </li></ul><p><img src="/images/sso/adfs/adfs-install/step23.1.png" alt="step 23.1"></p><p><img src="/images/sso/adfs/adfs-install/step23.2.png" alt="step 23.2"></p><p><img src="/images/sso/adfs/adfs-install/step23.3.png" alt="step 23.3"></p><p><img src="/images/sso/adfs/adfs-install/step23.4.png" alt="step 23.4"></p><p><img src="/images/sso/adfs/adfs-install/step23.5.png" alt="step 23.5"></p><p>ä¿å­˜åˆ°æ¡Œé¢ä¸Šï¼šcert.txt</p><h4 id="é…ç½®è¯ä¹¦"><a href="#é…ç½®è¯ä¹¦" class="headerlink" title="é…ç½®è¯ä¹¦"></a>é…ç½®è¯ä¹¦</h4><ul><li>æœåŠ¡å™¨æµè§ˆå™¨ï¼Œè¾“å…¥ <a href="http://127.0.0.1/certsrv/" target="_blank" rel="noopener">http://127.0.0.1/certsrv/</a> å¦‚ä¸‹ï¼š</li></ul><p><img src="/images/sso/adfs/adfs-install/step24.1.png" alt="step 24.1"></p><ul><li>é€‰æ‹©ç”³è¯·è¯ä¹¦â€”â€”&gt;é«˜çº§è¯ä¹¦ç”³è¯· </li></ul><p><img src="/images/sso/adfs/adfs-install/step24.2.png" alt="step 24.2"></p><ul><li>é€‰æ‹©ï¼š ä½¿ç”¨ base64 ç¼–ç çš„ CMC æˆ– PKCS #10 æ–‡ä»¶æäº¤ ä¸€ä¸ªè¯ä¹¦ç”³è¯·ï¼Œæˆ–ä½¿ç”¨ base64 ç¼–ç çš„ PKCS #7 æ–‡ä»¶ç»­è®¢è¯ä¹¦ç”³è¯·</li></ul><p><img src="/images/sso/adfs/adfs-install/step24.3.png" alt="step 24.3"></p><ul><li>æ‰“å¼€cert.txt ï¼Œç²˜è´´è¿›å»ï¼Œè¯ä¹¦æ¨¡æ¿é€‰æ‹© webæœåŠ¡å™¨ï¼Œæäº¤ </li></ul><p><img src="/images/sso/adfs/adfs-install/step24.4.png" alt="step 24.4"></p><ul><li>ä¸‹è½½è¯ä¹¦ï¼Œä¿å­˜åˆ°æœ¬åœ°ï¼š</li></ul><p><img src="/images/sso/adfs/adfs-install/step24.5.png" alt="step 24.5"></p><ul><li>å›åˆ°iisç®¡ç†å™¨ï¼Œé€‰æ‹©å®Œæˆè¯ä¹¦ç”³è¯·</li></ul><p><img src="/images/sso/adfs/adfs-install/step24.6.png" alt="step 24.6"></p><p><img src="/images/sso/adfs/adfs-install/step24.7.png" alt="step 24.7"></p><p><img src="/images/sso/adfs/adfs-install/step24.8.png" alt="step 24.8"></p><ul><li><p>å°† default web site çš„ https ç»‘å®šè¯ä¹¦æ”¹ä¸ºåˆšæ‰å®Œæˆçš„è¯ä¹¦</p><blockquote><p>é€‰æ‹© default web site , å³é”® ç¼–è¾‘ç»‘å®šï¼Œé€‰æ‹© httpsï¼ˆæ²¡æœ‰åˆ™æ·»åŠ ï¼‰ ï¼Œ ç‚¹å‡»ç¼–è¾‘ï¼Œé€‰æ‹© ssl è¯ä¹¦:ï¼ˆ è¿™ä¸ªè¯ä¹¦åœ¨å®‰è£…adfsæ—¶ä½¿ç”¨è¯¥è¯ä¹¦ï¼‰ </p></blockquote></li></ul><p><img src="/images/sso/adfs/adfs-install/step25.2.png" alt="step 25.2"></p><h4 id="å¼€å§‹å®‰è£…"><a href="#å¼€å§‹å®‰è£…" class="headerlink" title="å¼€å§‹å®‰è£…"></a>å¼€å§‹å®‰è£…</h4><ul><li>æ‰“å¼€æœåŠ¡å™¨ç®¡ç†å™¨ï¼Œç‚¹å‡» â€œæ·»åŠ è§’è‰²å’ŒåŠŸèƒ½â€</li></ul><p><img src="/images/sso/adfs/adfs-install/step1.png" alt="step 1"></p><ul><li>ä¿æŒé»˜è®¤ï¼Œå¹¶è¿ç»­ç‚¹å‡»ä¸‰æ¬¡â€œä¸‹ä¸€æ­¥â€</li></ul><p><img src="/images/sso/adfs/adfs-install/step2.png" alt="step 2"></p><ul><li>å‹¾é€‰ â€œActive Directory Federation Servicesâ€ å®‰è£…æœåŠ¡è§’è‰²</li></ul><p><img src="/images/sso/adfs/adfs-install/step26.1.png" alt="step 26.1"></p><ul><li>åŠŸèƒ½é€‰æ‹©é¡µé¢ä¿æŒé»˜è®¤ï¼Œè¿ç»­ç‚¹å‡»2æ¬¡â€œä¸‹ä¸€æ­¥â€</li></ul><p><img src="/images/sso/adfs/adfs-install/step26.2.png" alt="step 26.2"></p><ul><li>å®‰è£…</li></ul><p><img src="/images/sso/adfs/adfs-install/step26.3.png" alt="step 26.3"></p><ul><li>å®‰è£…å®Œæˆ</li></ul><p><img src="/images/sso/adfs/adfs-install/step26.4.png" alt="step 26.4"></p><ul><li>ADFS å®‰è£…å®Œæˆåï¼Œå¦‚å›¾ç‚¹å‡»æç¤ºå›¾æ ‡åï¼Œé€‰æ‹©â€œåœ¨æ­¤æœåŠ¡å™¨ä¸Šé…ç½®è”åˆèº«ä»½éªŒè¯æœåŠ¡â€</li></ul><p><img src="/images/sso/adfs/adfs-install/step26.5.png" alt="step 26.5"></p><ul><li>åŠŸèƒ½é€‰æ‹©é¡µé¢ä¿æŒé»˜è®¤ï¼Œè¿ç»­ç‚¹å‡»2æ¬¡â€œä¸‹ä¸€æ­¥â€</li></ul><p><img src="/images/sso/adfs/adfs-install/step26.6.png" alt="step 26.6"></p><ul><li>é€‰æ‹©è¯ä¹¦(ä¸æ˜¯å‰é¢åˆ›å»ºçš„è¯ä¹¦)ï¼Œå¡«å†™æ˜¾ç¤ºçš„åç§°</li></ul><p><img src="/images/sso/adfs/adfs-install/step26.7.png" alt="step 26.7"></p><ul><li>é€‰æ‹© adfs æœåŠ¡å¸å·</li></ul><p><img src="/images/sso/adfs/adfs-install/step26.8.png" alt="step 26.8"></p><ul><li>æŒ‡å®šé…ç½®æ•°æ®åº“</li></ul><p><img src="/images/sso/adfs/adfs-install/step26.10.png" alt="step 26.10"></p><ul><li>ä¸‹ä¸€æ­¥</li></ul><p><img src="/images/sso/adfs/adfs-install/step26.11.png" alt="step 26.11"></p><ul><li>é…ç½®</li></ul><p><img src="/images/sso/adfs/adfs-install/step26.12.png" alt="step 26.12"></p><ul><li>é…ç½®å®Œæˆ</li></ul><p><img src="/images/sso/adfs/adfs-install/step26.13.png" alt="step 26.13"></p><p>è‡³æ­¤ ADFS å®‰è£…é…ç½®å®Œæˆ</p><p><img src="/images/sso/adfs/adfs-install/step27.png" alt="step 27"></p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://blog.51cto.com/gaowenlong/1920117" target="_blank" rel="noopener">Windows Server 2016 å®‰è£…åŠé…ç½® ADFS 4.0</a></p><p><a href="https://blog.csdn.net/xu_guowei/article/details/47781727" target="_blank" rel="noopener">Server2012 ä¸‹ éƒ¨ç½²adfs IFD</a></p>]]></content>
    
    <summary type="html">
    
      æœ¬æ–‡ä»‹ç» Windows Server 2012R2 ä¸‹å®‰è£…æ¥é…ç½® ADFSã€‚ADFS (Active Directory Federation Services) æ´»åŠ¨ç›®å½•è”åˆæœåŠ¡å°†æ´»åŠ¨ç›®å½•æ‹“å±•åˆ° Internetï¼Œå½“ç”¨æˆ·é€šè¿‡æ´»åŠ¨ç›®å½•è®¤è¯æ—¶ï¼ŒåŸŸæ§åˆ¶å™¨æ£€æŸ¥ç”¨æˆ·çš„è¯ä¹¦ã€‚è¯æ˜æ˜¯åˆæ³•ç”¨æˆ·åï¼Œç”¨æˆ·å°±å¯ä»¥éšæ„è®¿é—® Windows ç½‘ç»œçš„ä»»ä½•æˆæƒèµ„æºï¼Œè€Œæ— éœ€åœ¨æ¯æ¬¡è®¿é—®ä¸åŒæœåŠ¡å™¨æ—¶é‡æ–°è®¤è¯ã€‚
    
    </summary>
    
      <category term="SSO" scheme="http://yoursite.com/categories/SSO/"/>
    
      <category term="ADFS" scheme="http://yoursite.com/categories/SSO/ADFS/"/>
    
    
      <category term="SSO" scheme="http://yoursite.com/tags/SSO/"/>
    
      <category term="ADFS" scheme="http://yoursite.com/tags/ADFS/"/>
    
  </entry>
  
  <entry>
    <title>ADDS æ´»åŠ¨ç›®å½•å®‰è£…è¯¦è§£</title>
    <link href="http://yoursite.com/2019/03/09/sso/adfs/adds-install/"/>
    <id>http://yoursite.com/2019/03/09/sso/adfs/adds-install/</id>
    <published>2019-03-08T16:00:00.000Z</published>
    <updated>2020-10-14T01:58:17.622Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å®‰è£…å‰å‡†å¤‡"><a href="#å®‰è£…å‰å‡†å¤‡" class="headerlink" title="å®‰è£…å‰å‡†å¤‡"></a>å®‰è£…å‰å‡†å¤‡</h3><p>ç¡®ä¿åŸŸæ§åˆ¶å™¨ (DC) çš„è®¡ç®—æœºåç¬¦åˆä¼ä¸šå‘½åè§„èŒƒï¼Œå› ä¸º AD å®‰è£…å®Œæˆåå†æ›´æ”¹ DC è®¡ç®—æœºç›¸å¯¹å¤æ‚è€Œä¸”å­˜åœ¨é£é™©ã€‚DC éœ€è¦ä½¿ç”¨å›ºå®šçš„é™æ€IPåœ°å€ï¼Œå¹¶ä¸”æŠŠDNSè®¾ç½®æŒ‡å‘æœ¬æœºIPã€‚</p><p>è¿™å°ç”µè„‘ (å³é”®) â€“&gt; å±æ€§ï¼Œæ›´æ”¹è®¾ç½®ï¼š</p><p><img src="/images/sso/adfs/adds-install/cp-name.png" alt="computer name"></p><p>ç½‘ç»œ (å³é”®) â€“&gt; å±æ€§ â€“&gt; ä»¥å¤ªç½‘ â€“&gt; å±æ€§ â€“&gt; Internet åè®®ç‰ˆæœ¬ 4ï¼ˆTCP/IPV4ï¼‰ â€“&gt; å±æ€§</p><p><img src="/images/sso/adfs/adds-install/network.png" alt="network"></p><h3 id="å¼€å§‹å®‰è£…"><a href="#å¼€å§‹å®‰è£…" class="headerlink" title="å¼€å§‹å®‰è£…"></a>å¼€å§‹å®‰è£…</h3><ul><li>æ‰“å¼€æœåŠ¡å™¨ç®¡ç†å™¨ï¼Œç‚¹å‡» â€œæ·»åŠ è§’è‰²å’ŒåŠŸèƒ½â€</li></ul><p><img src="/images/sso/adfs/adds-install/step1.png" alt="step 1"></p><ul><li>ä¿æŒé»˜è®¤ï¼Œå¹¶è¿ç»­ç‚¹å‡»ä¸‰æ¬¡â€œä¸‹ä¸€æ­¥â€ã€‚</li></ul><p><img src="/images/sso/adfs/adds-install/step2.png" alt="step 2"></p><ul><li>å‹¾é€‰ â€œActiveDirectoryåŸŸæœåŠ¡â€ï¼Œç„¶åé€‰æ‹©æ·»åŠ æ‰€éœ€çš„åŠŸèƒ½ï¼Œæœ€åç‚¹â€œä¸‹ä¸€æ­¥â€ç»§ç»­ã€‚</li></ul><p><img src="/images/sso/adfs/adds-install/step3.png" alt="step 3"></p><ul><li>åŠŸèƒ½é€‰æ‹©é¡µé¢ä¿æŒé»˜è®¤ï¼Œè¿ç»­ç‚¹å‡»2æ¬¡â€œä¸‹ä¸€æ­¥â€ã€‚</li></ul><p><img src="/images/sso/adfs/adds-install/step4.png" alt="step 4"></p><ul><li>å‹¾é€‰è‡ªåŠ¨é‡å¯æœåŠ¡å™¨ï¼Œç‚¹å‡»â€œå®‰è£…â€ã€‚</li></ul><p><img src="/images/sso/adfs/adds-install/step5.1.png" alt="step 5.1"></p><p><img src="/images/sso/adfs/adds-install/step5.2.png" alt="step 5.2"></p><ul><li>å®ŒæˆADDSå®‰è£…åï¼Œå¦‚å›¾ç‚¹å‡»æç¤ºå›¾æ ‡åï¼Œé€‰æ‹©â€œå°†æ­¤æœåŠ¡å™¨æå‡ä¸ºåŸŸæ§åˆ¶å™¨â€ã€‚</li></ul><p><img src="/images/sso/adfs/adds-install/step6.png" alt="step 6"></p><ul><li>ç”±äºè¿™æ˜¯ç¬¬ä¸€å°åŸŸæ§åˆ¶å™¨(DC)ï¼Œä¹Ÿå«æ—æ ¹åŸŸã€‚é€‰æ‹©â€œæ·»åŠ æ–°æ—â€ï¼Œç„¶åè¾“å…¥æ ¹åŸŸåã€‚</li></ul><p><img src="/images/sso/adfs/adds-install/step7.png" alt="step 7"></p><ul><li>é€‰æ‹©æ—å’ŒåŸŸåŠŸèƒ½çº§åˆ«ï¼Œå‹¾é€‰DNS(ADéœ€è¦é«˜åº¦é›†æˆDNS)ï¼Œå¹¶è¾“å…¥ç›®å½•è¿˜åŸæ¨¡å¼å¯†ç ã€‚</li></ul><p><img src="/images/sso/adfs/adds-install/step8.png" alt="step 8"></p><ul><li>ç”±äºç°åœ¨è¿˜æ²¡æœ‰DNSæœåŠ¡å™¨ï¼Œæ‰€ä»¥ä¼šæç¤ºæ— æ³•åˆ›å»ºå§”æ´¾ã€‚ç›´æ¥â€œä¸‹ä¸€æ­¥â€ã€‚</li></ul><p><img src="/images/sso/adfs/adds-install/step9.png" alt="step 9"></p><ul><li>NetBIOSåä»¥åŠADDSæ•°æ®åº“ã€æ—¥å¿—ã€Sysvolä¿å­˜ä½ç½®ï¼Œå¦‚æœä¼ä¸šæ²¡æœ‰ç‰¹æ®Šè¦æ±‚ï¼Œä¸€èˆ¬ä¿æŒé»˜è®¤å³å¯ã€‚</li></ul><p><img src="/images/sso/adfs/adds-install/step10.1.png" alt="step 10.1"></p><p><img src="/images/sso/adfs/adds-install/step10.2.png" alt="step 10.2"></p><ul><li>æ£€æŸ¥é…ç½®æ— è¯¯åç‚¹å‡»â€œä¸‹ä¸€æ­¥â€ï¼Œç„¶åç‚¹å‡»â€œå®‰è£…â€ï¼Œç­‰å¾…å®‰è£…å®Œæˆåé‡å¯å³å¯ã€‚</li></ul><p><img src="/images/sso/adfs/adds-install/step11.1.png" alt="step 11.1"></p><p><img src="/images/sso/adfs/adds-install/step11.2.png" alt="step 11.2"></p><p>è‡³æ­¤å®Œæˆ <code>ActiveDirectory</code> çš„å…¨éƒ¨å®‰è£…ã€‚å·²ç»å¯ä»¥å¯¹å¤–æä¾›æœåŠ¡äº†ã€‚</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://blog.51cto.com/labixiaoniu/1253454" target="_blank" rel="noopener">Active Directoryç®¡ç†ä¹‹ä¸€:æ´»åŠ¨ç›®å½•å®‰è£…è¯¦è§£</a></p>]]></content>
    
    <summary type="html">
    
      æœ¬æ–‡æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ windows server 2012 R2  å®‰è£… ADDS æœåŠ¡
    
    </summary>
    
      <category term="SSO" scheme="http://yoursite.com/categories/SSO/"/>
    
      <category term="ADFS" scheme="http://yoursite.com/categories/SSO/ADFS/"/>
    
    
      <category term="SSO" scheme="http://yoursite.com/tags/SSO/"/>
    
      <category term="ADFS" scheme="http://yoursite.com/tags/ADFS/"/>
    
      <category term="ADDS" scheme="http://yoursite.com/tags/ADDS/"/>
    
  </entry>
  
  <entry>
    <title>[è½¬è½½] è·å–è¢«ä»£ç†ç±»çš„çœŸå®ç±»</title>
    <link href="http://yoursite.com/2019/03/07/Java/spring/target-class/"/>
    <id>http://yoursite.com/2019/03/07/Java/spring/target-class/</id>
    <published>2019-03-06T16:00:00.000Z</published>
    <updated>2020-10-14T01:58:17.380Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ç‰ˆæƒè¯´æ˜ï¼Œæ–‡ç« è½¬è½½è‡ª <a href="http://imushan.com/2017/03/13/java/spring/Spring%E7%AC%94%E8%AE%B0-%E8%8E%B7%E5%8F%96%E8%A2%AB%E4%BB%A3%E7%90%86%E7%9A%84%E7%9C%9F%E5%AE%9E%E7%B1%BB/" target="_blank" rel="noopener">Spring ç¬”è®°-è·å–è¢«ä»£ç†çš„çœŸå®ç±»</a></p></blockquote><p>å¯¹ä¸€ä¸ª <code>Autowired</code> è¿›æ¥çš„ç±»è°ƒç”¨ <code>getClass</code>ï¼Œå‘ç°å¾—åˆ°çš„ç±»æ˜¯: <code>com.xxx.search.provider.service.SearchServiceImpl$$EnhancerBySpringCGLIB$$129db519</code>ï¼Œä¸€çœ‹å°±ä¸æ˜¯æ­£ç»ç±»ã€‚ä»åå­—ä¸­å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªæ˜¯è¢«ä»£ç†åçš„ç±»ï¼Œå¯èƒ½å› ä¸ºè¿™ä¸ªç±»è¢«AOPäº†å§ã€‚ä½†æ˜¯æˆ‘åœ¨åå°„æ“ä½œæ˜¯éœ€è¦åŸå§‹çš„ç±»çš„ä¿¡æ¯ï¼Œè¦å¦‚ä½•å¾—åˆ°å‘¢ï¼Ÿ</p><p><code>org.springframework.aop</code> ä¸‹æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„æ¥å£: <code>TargetClassAware</code>, è¿™ä¸ªæ¥å£è¡¨ç¤ºç›®å‰è¿™ä¸ªç±»æ˜¯è¢«ä»£ç†çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ¤æ–­ä¸€ä¸ªå®ä¾‹æ˜¯å¦æ˜¯ <code>TargetClassAware</code> çš„å®ä¾‹æ¥åˆ¤æ–­ä»–æ˜¯å¦æ˜¯ä¸€ä¸ªä»£ç†ç±»ã€‚è€Œä¸” <code>TargetClassAware</code> æ¥å£æä¾›äº† <code>getTargetClass</code> æ–¹æ³•æ¥è·å–çœŸå®ç±»ã€‚å¯ä»¥è¿™ä¹ˆç”¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (aInstance <span class="keyword">instanceof</span> TargetClassAware) &#123;</span><br><span class="line">    aInstance.getTargetClass();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸è¿‡æ›´æ¨èçš„åšæ³•æ˜¯ä½¿ç”¨ <code>org.springframework.aop.support.AopUtils</code> æä¾›çš„ <code>getTargetClass</code> æ–¹æ³•æ¥è·å–çœŸå®ç±»ã€‚å¯ä»¥çœ‹çœ‹å…¶æºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Class&lt;?&gt; getTargetClass(Object candidate) &#123;</span><br><span class="line">    Assert.notNull(candidate, <span class="string">"Candidate object must not be null"</span>);</span><br><span class="line">    Class result = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">if</span>(candidate <span class="keyword">instanceof</span> TargetClassAware) &#123;</span><br><span class="line">        result = ((TargetClassAware)candidate).getTargetClass();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(result == <span class="keyword">null</span>) &#123;</span><br><span class="line">        result = isCglibProxy(candidate)?candidate.getClass().getSuperclass():candidate.getClass();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»£ç é¦–å…ˆåˆ¤æ–­å½“å‰ç±»æ˜¯å¦æ˜¯ <code>TargetClassAware</code> çš„å®ç°ï¼Œå¦‚æœæ˜¯ï¼Œè°ƒç”¨ <code>getTargetClass</code>ï¼Œæ–¹æ³•è¿˜åˆ¤æ–­å½“å‰ç±»æ˜¯å¦æ˜¯ <code>CglibProxy</code>ï¼Œå¦‚æœæ˜¯åŸºäº <code>cglib</code> çš„ä»£ç†ç±»ï¼Œå› ä¸ºæ˜¯åŸºäºç»§æ‰¿æ¥å®ç°ä»£ç†ï¼Œæ‰€ä»¥è·å–çˆ¶ç±»å°±æ˜¯çœŸå®ç±»äº†ã€‚</p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="http://stackoverflow.com/questions/2289211/obtain-real-class-object-for-spring-bean" target="_blank" rel="noopener">java - Obtain real Class object for Spring bean - Stack Overflow</a></li><li><a href="http://docs.spring.io/spring/docs/3.0.x/javadoc-api/org/springframework/aop/support/AopUtils.html#getTargetClass(java.lang.Object" target="_blank" rel="noopener">AopUtils</a>)</li></ul>]]></content>
    
    <summary type="html">
    
      æœ‰æ—¶å€™æˆ‘ä»¬ä½¿ç”¨ getClass è·å–åˆ°çš„ç±»æ˜¯è¢«ä»£ç†çš„ç±»è€Œä¸æ˜¯çœŸå®çš„ç±»ï¼Œé‚£æˆ‘ä»¬æ˜¯æ€ä¹ˆè·å–åˆ°çœŸå®çš„ç±»çš„å‘¢ï¼Ÿ
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
      <category term="Spring" scheme="http://yoursite.com/categories/Java/Spring/"/>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="Spring" scheme="http://yoursite.com/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>oracle cloud å¦‚ä½•è·å–å›¾ç‰‡ url</title>
    <link href="http://yoursite.com/2019/02/20/oracle-cloud/how-to-get-image-url/"/>
    <id>http://yoursite.com/2019/02/20/oracle-cloud/how-to-get-image-url/</id>
    <published>2019-02-20T05:00:00.000Z</published>
    <updated>2020-10-14T01:58:17.480Z</updated>
    
    <content type="html"><![CDATA[<p>ä»¥è·å–ç‰©æ–™å›¾ç‰‡ <code>url</code> ä½œä¸ºä¾‹å­</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">SELECT</span> (<span class="keyword">decode</span>(datatype_code,</span><br><span class="line">                <span class="string">'FILE'</span>,</span><br><span class="line">                (:p_host || <span class="string">'/cs/idcplg?IdcService=GET_FILE&amp;dID='</span>) || dm_version_number,</span><br><span class="line">                <span class="string">'WEB_PAGE'</span>,</span><br><span class="line">                <span class="keyword">url</span>)) <span class="keyword">AS</span> image</span><br><span class="line"> <span class="keyword">FROM</span> fnd_attached_documents d,</span><br><span class="line"> fnd_documents_vl       dv</span><br><span class="line"> <span class="keyword">WHERE</span> d.document_id = d.document_id</span><br><span class="line"> <span class="keyword">AND</span> d.entity_name = <span class="string">'ITEM_ENTITY'</span></span><br><span class="line"> <span class="keyword">AND</span> d.pk1_value = to_char(esi.organization_id)</span><br><span class="line"> <span class="keyword">AND</span> d.pk2_value = to_char(esi.inventory_item_id)</span><br><span class="line"> <span class="keyword">AND</span> <span class="keyword">rownum</span> = <span class="number">1</span>) <span class="keyword">AS</span> item_photo</span><br></pre></td></tr></table></figure><blockquote><p> å…¶ä¸­ <code>p_host</code> ä¸º <code>cloud</code> çš„ä¸»åŸŸå</p></blockquote><p>å…¶ä»–ç±»å‹çš„å›¾ç‰‡ <code>url</code> å¯ä»¥é€šè¿‡å˜æ¢ <code>d.entity_name = &#39;ITEM_ENTITY&#39;</code> è¿›è¡ŒæŸ¥æ‰¾</p>]]></content>
    
    <summary type="html">
    
      oracle cloud ä¸­é€šè¿‡é™„ä»¶æ¥ç®¡ç†å›¾ç‰‡ä¿¡æ¯ï¼Œå…¶ä¸­å›¾ç‰‡ä¿¡æ¯å¯ä»¥æ˜¯å¤–é“¾ url, ä¹Ÿå¯ä»¥æ˜¯ä¸Šä¼ å›¾ç‰‡ä¿¡æ¯ï¼Œcloud ç”Ÿæˆé“¾æ¥ä¿¡æ¯ã€‚
    
    </summary>
    
      <category term="Oracle Cloud" scheme="http://yoursite.com/categories/Oracle-Cloud/"/>
    
    
      <category term="Oracle Cloud" scheme="http://yoursite.com/tags/Oracle-Cloud/"/>
    
      <category term="attachment" scheme="http://yoursite.com/tags/attachment/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•è·å– oracle cloud çš„ PO çš„ shipping method</title>
    <link href="http://yoursite.com/2019/02/20/oracle-cloud/po/how-to-get-shipping-method/"/>
    <id>http://yoursite.com/2019/02/20/oracle-cloud/po/how-to-get-shipping-method/</id>
    <published>2019-02-20T04:00:00.000Z</published>
    <updated>2020-10-14T01:58:17.530Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç‰ˆæœ¬ä¿¡æ¯"><a href="#ç‰ˆæœ¬ä¿¡æ¯" class="headerlink" title="ç‰ˆæœ¬ä¿¡æ¯"></a>ç‰ˆæœ¬ä¿¡æ¯</h3><blockquote><p>Oracle Cloud Application 19B (11.13.19.04.0)</p></blockquote><h3 id="example"><a href="#example" class="headerlink" title="example"></a>example</h3><ul><li>è·å– po å¤´ä¸Šçš„ shipping method</li></ul><p><img src="/images/oracle_cloud/20190826222844.png" alt="po head shipping method"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> po_bip_helper.get_shipping_method(carrierpartyname.party_name,</span><br><span class="line">                                         modeoftransportlookuppeo.meaning,</span><br><span class="line">                                         servicelevellookuppeo.meaning) <span class="keyword">AS</span> shippingmethod</span><br><span class="line">  <span class="keyword">FROM</span> wsh_carriers   carrier,</span><br><span class="line">       hz_parties     carrierpartyname,</span><br><span class="line">       fnd_lookups    modeoftransportlookuppeo,</span><br><span class="line">       fnd_lookups    servicelevellookuppeo,</span><br><span class="line">       po_headers_all header</span><br><span class="line"> <span class="keyword">WHERE</span> (header.mode_of_transport = modeoftransportlookuppeo.lookup_code(+) <span class="keyword">AND</span> modeoftransportlookuppeo.lookup_type(+) = <span class="string">'WSH_MODE_OF_TRANSPORT'</span>)</span><br><span class="line">   <span class="keyword">AND</span> (header.service_level = servicelevellookuppeo.lookup_code(+) <span class="keyword">AND</span> servicelevellookuppeo.lookup_type(+) = <span class="string">'WSH_SERVICE_LEVELS'</span>)</span><br><span class="line">   <span class="keyword">AND</span> header.carrier_id = carrier.carrier_id(+)</span><br><span class="line">   <span class="keyword">AND</span> carrier.carrier_id = carrierpartyname.party_id(+)</span><br><span class="line">   <span class="keyword">AND</span> header.segment1 = <span class="string">'20000028'</span></span><br></pre></td></tr></table></figure><ul><li>è·å– po è¡Œä¸Šçš„ shipping method</li></ul><p><img src="/images/oracle_cloud/20190826223054.png" alt="po line shipping method"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> po_bip_helper.get_shipping_method(carrierpartyname.party_name,</span><br><span class="line">                                         modeoftransportlookuppeo.meaning,</span><br><span class="line">                                         servicelevellookuppeo.meaning) <span class="keyword">AS</span> shippingmethod</span><br><span class="line">  <span class="keyword">FROM</span> wsh_carriers          carrier,</span><br><span class="line">       hz_parties            carrierpartyname,</span><br><span class="line">       fnd_lookups           modeoftransportlookuppeo,</span><br><span class="line">       fnd_lookups           servicelevellookuppeo,</span><br><span class="line">       po_line_locations_all plla</span><br><span class="line"> <span class="keyword">WHERE</span> (plla.mode_of_transport = modeoftransportlookuppeo.lookup_code(+) <span class="keyword">AND</span> modeoftransportlookuppeo.lookup_type(+) = <span class="string">'WSH_MODE_OF_TRANSPORT'</span>)</span><br><span class="line">   <span class="keyword">AND</span> (plla.service_level = servicelevellookuppeo.lookup_code(+) <span class="keyword">AND</span> servicelevellookuppeo.lookup_type(+) = <span class="string">'WSH_SERVICE_LEVELS'</span>)</span><br><span class="line">   <span class="keyword">AND</span> plla.carrier_id = carrier.carrier_id(+)</span><br><span class="line">   <span class="keyword">AND</span> carrier.carrier_id = carrierpartyname.party_id(+)</span><br><span class="line">   <span class="keyword">AND</span> plla.po_header_id = pla.po_header_id</span><br><span class="line">   <span class="keyword">AND</span> plla.po_line_id = pla.po_line_id</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      Oracle Cloud PO ç•Œé¢ä¸Šæ˜¾ç¤ºçš„ shipping method åœ¨åå°æ˜¯é€šè¿‡å‡ ä¸ªå­—æ®µæ¥å­˜å‚¨çš„ï¼Œè¦è·å–è¯¥å­—æ®µå¾—ä½¿ç”¨å‡½æ•°è·å–ã€‚
    
    </summary>
    
      <category term="Oracle Cloud" scheme="http://yoursite.com/categories/Oracle-Cloud/"/>
    
      <category term="PO" scheme="http://yoursite.com/categories/Oracle-Cloud/PO/"/>
    
    
      <category term="Oracle Cloud" scheme="http://yoursite.com/tags/Oracle-Cloud/"/>
    
      <category term="PO" scheme="http://yoursite.com/tags/PO/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•è·å– oracle cloud çš„ Match Approval Level</title>
    <link href="http://yoursite.com/2019/02/20/oracle-cloud/how-to-get-match-approval-level/"/>
    <id>http://yoursite.com/2019/02/20/oracle-cloud/how-to-get-match-approval-level/</id>
    <published>2019-02-19T16:00:00.000Z</published>
    <updated>2020-10-14T01:58:17.505Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç‰ˆæœ¬ä¿¡æ¯"><a href="#ç‰ˆæœ¬ä¿¡æ¯" class="headerlink" title="ç‰ˆæœ¬ä¿¡æ¯"></a>ç‰ˆæœ¬ä¿¡æ¯</h3><p><strong>Oracle Cloud Application</strong></p><p><strong>Revision 13.18.10 (11.13.18.10.0)</strong></p><table><thead><tr><th>Title</th><th>Description</th></tr></thead><tbody><tr><td>Oracle Application Development Framework</td><td>JDEVADF_11.1.1.9.2ADF-REL131810-PROD-BP_GENERIC_181116.1437.7206</td></tr><tr><td>Oracle Middleware Extensions for Applications</td><td>ATGPF_PT.REL13.18.10_GENERIC_181113.1603.REL13BP16.7</td></tr><tr><td>Database Compatibility</td><td>TRUE (REL13BP16.7)</td></tr></tbody></table><h3 id="æç¤º"><a href="#æç¤º" class="headerlink" title="æç¤º"></a>æç¤º</h3><ul><li><p>When Receipt Required Flag is N, then Match Approval level is 2 way.</p></li><li><p>When Receipt Required Flag is Y and Inspection Required Flag is N, then Match Approval Level is 3 way.</p></li><li><p>When Receipt Required Flag is Y and Inspection Required Flag is Y, then Match Approval Level is 4 way.</p></li></ul><blockquote><p>2-way ä¸éœ€è¦æ£€æµ‹æ”¶è´§ receipt_required_flag ä¸º N</p><p>3-way éœ€è¦åœ¨ match invoice çš„æ—¶å€™éªŒæ”¶è´§ æ‰€ä»¥ receipt_required_flag ä¸ºY , inspection_required_flag ä¸º N</p><p>4-way è¿˜è¦æ£€æµ‹éªŒè´§ æ‰€ä»¥ ä¸¤ä¸ªéƒ½ä¸º Y</p></blockquote><h3 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">decode(poz_supplier_sites_v.receipt_required_flag,</span><br><span class="line">       'Y',</span><br><span class="line">       decode(poz_supplier_sites_v.inspection_required_flag,</span><br><span class="line">              'Y',</span><br><span class="line">              '4-Way',</span><br><span class="line">              'N',</span><br><span class="line">              '3-Way'),</span><br><span class="line">       'N',</span><br><span class="line">       '2-Way') AS matching_level</span><br></pre></td></tr></table></figure><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="http://j178.mtgbb.com/?p=713" target="_blank" rel="noopener">http://j178.mtgbb.com/?p=713</a></p>]]></content>
    
    <summary type="html">
    
      oracle cloud ä¸­åå°è¡¨æ˜¯é€šè¿‡ receipt_required_flag inspection_required_flag ä¸¤ä¸ªå­—æ®µçš„å…³ç³»è·å– Match Approval Level çš„å€¼ï¼Œpo, supplier, supplier site è·å–çš„åŸç†åŒæ ·
    
    </summary>
    
      <category term="Oracle Cloud" scheme="http://yoursite.com/categories/Oracle-Cloud/"/>
    
    
      <category term="Oracle Cloud" scheme="http://yoursite.com/tags/Oracle-Cloud/"/>
    
      <category term="Match Approval Level" scheme="http://yoursite.com/tags/Match-Approval-Level/"/>
    
  </entry>
  
  <entry>
    <title>Gitlab æ›´æ–° fork çš„ä»£ç </title>
    <link href="http://yoursite.com/2019/02/18/git/gitlab-update-fork/"/>
    <id>http://yoursite.com/2019/02/18/git/gitlab-update-fork/</id>
    <published>2019-02-17T16:00:00.000Z</published>
    <updated>2020-10-14T01:58:17.431Z</updated>
    
    <content type="html"><![CDATA[<h3 id="æ“ä½œæ­¥éª¤"><a href="#æ“ä½œæ­¥éª¤" class="headerlink" title="æ“ä½œæ­¥éª¤"></a>æ“ä½œæ­¥éª¤</h3><ul><li>å…ˆç¡®å®šæ˜¯å¦å»ºç«‹äº†ä¸»ä»“åº“çš„è¿œç¨‹æ•°æ®æº:</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br></pre></td></tr></table></figure><p><img src="/images/6.png" alt="remote_rep"></p><p>æˆ‘ä»¬å‘ç°åªæœ‰æˆ‘ä»¬è‡ªå·±çš„ä¸¤ä¸ªæº(fetch å’Œ push)ï¼Œé‚£è¿™ä¸ªæ—¶å€™å°±éœ€è¦æ·»åŠ ä¸»ä»“åº“çš„æºã€‚</p><ul><li>æ·»åŠ ä¸»ä»“åº“çš„æº</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add upstream URL</span><br></pre></td></tr></table></figure><blockquote><p>upstream : éšä¾¿èµ·çš„åå­—</p><p>URLï¼š forkçš„ä»“åº“åœ°å€</p><p>å¦‚æœæƒ³åˆ é™¤remoteçš„upstreamæ ‡ç­¾ï¼Œåˆ™å¯ä»¥è¿è¡Œï¼š git remote rm upstream</p></blockquote><p><img src="/images/7.png" alt="remote_rep"></p><ul><li><p>æ›´æ–°ä»£ç </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git fetch upstream</span><br><span class="line">git checkout master</span><br><span class="line">git merge upstream/master</span><br></pre></td></tr></table></figure></li></ul><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://blog.csdn.net/lhh1113/article/details/71038154" target="_blank" rel="noopener">https://blog.csdn.net/lhh1113/article/details/71038154</a></p>]]></content>
    
    <summary type="html">
    
      æœ‰æ—¶å€™æˆ‘ä»¬åœ¨ gitlab fork äº†æŸä¸ªé¡¹ç›®çš„ä»£ç ï¼Œç„¶è€Œæˆ‘ä»¬éœ€è¦æ€ä¹ˆæ›´æ–°æˆ‘ä»¬ fork çš„ä»£ç å‘¢ï¼Ÿ
    
    </summary>
    
      <category term="git" scheme="http://yoursite.com/categories/git/"/>
    
    
      <category term="git" scheme="http://yoursite.com/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>JSTACK åˆ†æçº¿ç¨‹</title>
    <link href="http://yoursite.com/2019/02/11/Java/jstack-cpu/"/>
    <id>http://yoursite.com/2019/02/11/Java/jstack-cpu/</id>
    <published>2019-02-10T16:00:00.000Z</published>
    <updated>2020-10-14T01:58:17.283Z</updated>
    
    <content type="html"><![CDATA[<h3 id="æŸ¥æ‰¾-tomcat-çº¿ç¨‹"><a href="#æŸ¥æ‰¾-tomcat-çº¿ç¨‹" class="headerlink" title="æŸ¥æ‰¾ tomcat çº¿ç¨‹"></a>æŸ¥æ‰¾ tomcat çº¿ç¨‹</h3><p>å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ‰¾ï¼š</p><ul><li><p>jps</p><p>ä¸€èˆ¬Bootstrapéƒ½æ˜¯tomcatçš„</p><p><img src="/images/1.png" alt="JPS"></p></li></ul><ul><li><p>ps -ef |grep tomcat</p><p><img src="/images/2.png" alt="PS"></p></li></ul><h3 id="jstack-dump-å‡ºçº¿ç¨‹"><a href="#jstack-dump-å‡ºçº¿ç¨‹" class="headerlink" title="jstack dump å‡ºçº¿ç¨‹"></a>jstack dump å‡ºçº¿ç¨‹</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jstack 23524 &gt; jstack.txt</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹-tomcat-å†…éƒ¨çº¿ç¨‹"><a href="#æŸ¥çœ‹-tomcat-å†…éƒ¨çº¿ç¨‹" class="headerlink" title="æŸ¥çœ‹ tomcat å†…éƒ¨çº¿ç¨‹"></a>æŸ¥çœ‹ tomcat å†…éƒ¨çº¿ç¨‹</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top -H -p 23524</span><br></pre></td></tr></table></figure><blockquote><p>ï¼ˆshift+p æŒ‰ cpu æ’åºï¼Œshift+m æŒ‰å†…å­˜æ’åºï¼‰ </p></blockquote><p><img src="/images/3.png" alt="tomcat-stack"></p><h3 id="å°†PIDæ¢ç®—æˆ16è¿›åˆ¶ï¼Œç„¶ååœ¨jstack-txtæŸ¥æ‰¾nid-0xæ¢ç®—åçš„æ•°"><a href="#å°†PIDæ¢ç®—æˆ16è¿›åˆ¶ï¼Œç„¶ååœ¨jstack-txtæŸ¥æ‰¾nid-0xæ¢ç®—åçš„æ•°" class="headerlink" title="å°†PIDæ¢ç®—æˆ16è¿›åˆ¶ï¼Œç„¶ååœ¨jstack.txtæŸ¥æ‰¾nid=0xæ¢ç®—åçš„æ•°"></a>å°†PIDæ¢ç®—æˆ16è¿›åˆ¶ï¼Œç„¶ååœ¨jstack.txtæŸ¥æ‰¾nid=0xæ¢ç®—åçš„æ•°</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat jstack.txt | grep 'nid=0x5be9' -B 5 -A 40</span><br></pre></td></tr></table></figure><p><img src="/images/4.png" alt="4.png"></p><blockquote><p>å‘ç°é¢‘ç¹çš„GCï¼Œæ¨æµ‹æ˜¯ä¸æ˜¯æ•°æ®åº“åœ¨é¢‘ç¹çš„å¼€å…³å¯¼è‡´ï¼Œå› æ­¤æ£€æŸ¥ tomcat jndiæ˜¯å¦æ²¡é…ç½®æ•°æ®åº“è¿æ¥æ± å‚æ•°</p></blockquote><h3 id="åŠ ä¸Šè¿æ¥æ± å‚æ•°"><a href="#åŠ ä¸Šè¿æ¥æ± å‚æ•°" class="headerlink" title="åŠ ä¸Šè¿æ¥æ± å‚æ•°"></a>åŠ ä¸Šè¿æ¥æ± å‚æ•°</h3><p><img src="/images/5.png" alt="5.png"></p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p>jstackåˆ†æcpuè´Ÿè½½è¿‡é«˜åŸå› ï¼š</p><p><a href="https://blog.csdn.net/u010248330/article/details/80080605" target="_blank" rel="noopener">https://blog.csdn.net/u010248330/article/details/80080605</a></p><p>jstack: Javaå ç”¨é«˜CPUåˆ†æä¹‹- GC Task Thread:</p><p><a href="https://blog.csdn.net/chenxiusheng/article/details/74007040" target="_blank" rel="noopener">https://blog.csdn.net/chenxiusheng/article/details/74007040</a></p>]]></content>
    
    <summary type="html">
    
      CPU å ç”¨100%ï¼Œå¦‚ä½•æ ¹æ® java çº¿ç¨‹æƒ…å†µå®šä½åˆ°é—®é¢˜æ‰€åœ¨
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="Jstack" scheme="http://yoursite.com/tags/Jstack/"/>
    
  </entry>
  
  <entry>
    <title>MyBatis ä¼ å…¥å‚æ•°ä¸º Listã€Arrayã€Map</title>
    <link href="http://yoursite.com/2019/02/08/Java/MyBatis/mybatis-collection-params/"/>
    <id>http://yoursite.com/2019/02/08/Java/MyBatis/mybatis-collection-params/</id>
    <published>2019-02-07T16:00:00.000Z</published>
    <updated>2020-10-14T01:58:17.148Z</updated>
    
    <content type="html"><![CDATA[<h3 id="foreach-æ ‡ç­¾ç®€å•ä»‹ç»"><a href="#foreach-æ ‡ç­¾ç®€å•ä»‹ç»" class="headerlink" title="foreach æ ‡ç­¾ç®€å•ä»‹ç»"></a>foreach æ ‡ç­¾ç®€å•ä»‹ç»</h3><p>ä¸»è¦ç”¨äºåœ¨SQLè¯­å¥ä¸­æ„å»ºå¾ªç¯ä½“</p><p>æ ‡ç­¾çš„ä¸»è¦å±æ€§æœ‰ <code>item</code>ï¼Œ<code>index</code>ï¼Œ<code>collection</code>ï¼Œ<code>open</code>ï¼Œ<code>separator</code>ï¼Œ<code>close</code>ã€‚</p><table><thead><tr><th>å±æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td>item</td><td>é›†åˆä¸­æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡Œè¿­ä»£æ—¶çš„åˆ«åã€‚è¯¥å‚æ•°ä¸ºå¿…é€‰ã€‚</td></tr><tr><td>index</td><td>æŒ‡å®šä¸€ä¸ªåå­—ï¼Œç”¨äºè¡¨ç¤ºåœ¨è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œæ²¡é”™è¿­ä»£åˆ°çš„ä½ç½®</td></tr><tr><td>open</td><td>è¡¨ç¤ºè¯¥è¯­å¥ä»¥ä»€ä¹ˆå¼€å§‹</td></tr><tr><td>close</td><td>è¡¨ç¤ºè¯¥è¯­å¥ä»¥ä»€ä¹ˆç»“æŸ</td></tr><tr><td>separator</td><td>è¡¨ç¤ºåœ¨æ¯æ¬¡è¿›è¡Œè¿­ä»£ä¹‹é—´ä»¥ä»€ä¹ˆç¬¦å·ä½œä¸ºåˆ†éš”ç¬¦</td></tr><tr><td>collection</td><td>å±æ€§æ˜¯åœ¨ä½¿ç”¨foreachçš„æ—¶å€™æœ€å…³é”®çš„ä¹Ÿæ˜¯æœ€å®¹æ˜“å‡ºé”™çš„ï¼Œè¯¥å±æ€§æ˜¯å¿…é¡»æŒ‡å®šçš„ï¼Œä½†æ˜¯åœ¨ä¸åŒæƒ…å†µä¸‹ï¼Œè¯¥å±æ€§çš„å€¼æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸»è¦æœ‰ä¸€ä¸‹3ç§æƒ…å†µï¼š <br>(1) å¦‚æœä¼ å…¥çš„æ˜¯å•å‚æ•°ä¸”å‚æ•°ç±»å‹æ˜¯ä¸€ä¸ªListçš„æ—¶å€™ï¼Œcollectionå±æ€§å€¼ä¸ºlist .<br>(2) å¦‚æœä¼ å…¥çš„æ˜¯å•å‚æ•°ä¸”å‚æ•°ç±»å‹æ˜¯ä¸€ä¸ªarrayæ•°ç»„çš„æ—¶å€™ï¼Œcollectionçš„å±æ€§å€¼ä¸ºarray .<br>(3) å¦‚æœä¼ å…¥çš„å‚æ•°æ˜¯å¤šä¸ªçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦æŠŠå®ƒä»¬å°è£…æˆä¸€ä¸ªMapäº†ï¼Œå½“ç„¶å•å‚æ•°ä¹Ÿå¯ä»¥å°è£…æˆmapï¼Œå®é™…ä¸Šå¦‚æœä½ åœ¨ä¼ å…¥å‚æ•°çš„æ—¶å€™ï¼Œåœ¨MyBatisé‡Œé¢ä¹Ÿæ˜¯ä¼šæŠŠå®ƒå°è£…æˆä¸€ä¸ªMapçš„ï¼Œmapçš„keyå°±æ˜¯å‚æ•°åï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™collectionå±æ€§å€¼å°±æ˜¯ä¼ å…¥çš„Listæˆ–arrayå¯¹è±¡åœ¨è‡ªå·±å°è£…çš„mapé‡Œé¢çš„key.<br>(4) å¦‚æœå‚æ•°ä½¿ç”¨äº†@Paramæ³¨è§£ï¼Œé‚£å¿…é¡»æ˜¯å‚æ•°å</td></tr></tbody></table><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><h4 id="å»ºè¡¨è¯­å¥"><a href="#å»ºè¡¨è¯­å¥" class="headerlink" title="å»ºè¡¨è¯­å¥"></a>å»ºè¡¨è¯­å¥</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`XXGL_CODE_COMBINATIONS`</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`XXGL_CODE_COMBINATIONS`</span>(</span><br><span class="line">    <span class="string">`COMBINATION_ID`</span> <span class="built_in">bigint</span> AUTO_INCREMENT <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'è¡¨IDï¼Œä¸»é”®ï¼Œä¾›å…¶ä»–è¡¨åšå¤–é”®'</span> ,</span><br><span class="line">    <span class="string">`CODE_COMBINATION_ID`</span>  <span class="built_in">bigint</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> ,</span><br><span class="line">    <span class="string">`ENABLED_FLAG`</span>  <span class="built_in">varchar</span>(<span class="number">1</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'Y/N'</span> ,</span><br><span class="line">    <span class="string">`ACCOUNT_TYPE`</span>  <span class="built_in">varchar</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'è´¦æˆ·ç±»å‹'</span> ,</span><br><span class="line">    <span class="string">`SEGMENT1`</span>  <span class="built_in">varchar</span>(<span class="number">25</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'æ®µå€¼1'</span>,</span><br><span class="line">    <span class="string">`SEGMENT2`</span>  <span class="built_in">varchar</span>(<span class="number">25</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'æ®µå€¼2'</span>,</span><br><span class="line">    <span class="string">`SEGMENT3`</span>  <span class="built_in">varchar</span>(<span class="number">25</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'æ®µå€¼3'</span>,</span><br><span class="line">    <span class="string">`SEGMENT4`</span>  <span class="built_in">varchar</span>(<span class="number">25</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'æ®µå€¼4'</span>,</span><br><span class="line">    <span class="string">`SEGMENT5`</span>  <span class="built_in">varchar</span>(<span class="number">25</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'æ®µå€¼5'</span>,</span><br><span class="line">    <span class="string">`SEGMENT6`</span>  <span class="built_in">varchar</span>(<span class="number">25</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'æ®µå€¼6'</span>,</span><br><span class="line">    <span class="string">`SEGMENT7`</span>  <span class="built_in">varchar</span>(<span class="number">25</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'æ®µå€¼7'</span>,</span><br><span class="line">    <span class="string">`SEGMENT8`</span>  <span class="built_in">varchar</span>(<span class="number">25</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'æ®µå€¼8'</span>,</span><br><span class="line">    <span class="string">`SEGMENT9`</span>  <span class="built_in">varchar</span>(<span class="number">25</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'æ®µå€¼9'</span>,</span><br><span class="line">    <span class="string">`SEGMENT10`</span>  <span class="built_in">varchar</span>(<span class="number">25</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'æ®µå€¼10'</span>,</span><br><span class="line">    <span class="string">`SEGMENT11`</span>  <span class="built_in">varchar</span>(<span class="number">25</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'æ®µå€¼11'</span>,</span><br><span class="line">    <span class="string">`SEGMENT12`</span>  <span class="built_in">varchar</span>(<span class="number">25</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'æ®µå€¼12'</span>,</span><br><span class="line">    <span class="string">`SEGMENT13`</span>  <span class="built_in">varchar</span>(<span class="number">25</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'æ®µå€¼13'</span>,</span><br><span class="line">    <span class="string">`SEGMENT14`</span>  <span class="built_in">varchar</span>(<span class="number">25</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'æ®µå€¼14'</span>,</span><br><span class="line">    <span class="string">`SEGMENT15`</span>  <span class="built_in">varchar</span>(<span class="number">25</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'æ®µå€¼15'</span>,</span><br><span class="line">    <span class="string">`SEGMENT16`</span>  <span class="built_in">varchar</span>(<span class="number">25</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'æ®µå€¼16'</span>,</span><br><span class="line">    <span class="string">`SEGMENT17`</span>  <span class="built_in">varchar</span>(<span class="number">25</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'æ®µå€¼17'</span>,</span><br><span class="line">    <span class="string">`SEGMENT18`</span>  <span class="built_in">varchar</span>(<span class="number">25</span>) <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'æ®µå€¼18'</span>,</span><br><span class="line">    </span><br><span class="line">    PRIMARY <span class="keyword">KEY</span> (<span class="string">`COMBINATION_ID`</span>),</span><br><span class="line">  <span class="keyword">UNIQUE</span> <span class="keyword">KEY</span> <span class="string">`XXGL_CODE_COMBINATIONS_U1`</span> (<span class="string">`COMBINATION_ID`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`XXGL_CODE_COMBINATIONS_N1`</span> (<span class="string">`CODE_COMBINATION_ID`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">1000</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•æ•°æ®"><a href="#æµ‹è¯•æ•°æ®" class="headerlink" title="æµ‹è¯•æ•°æ®"></a>æµ‹è¯•æ•°æ®</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`XXGL_CODE_COMBINATIONS`</span> (</span><br><span class="line"><span class="string">`CODE_COMBINATION_ID`</span>,</span><br><span class="line"><span class="string">`ENABLED_FLAG`</span>,</span><br><span class="line"><span class="string">`ACCOUNT_TYPE`</span>,</span><br><span class="line"><span class="string">`SEGMENT1`</span>,</span><br><span class="line"><span class="string">`SEGMENT2`</span>,</span><br><span class="line"><span class="string">`SEGMENT3`</span>,</span><br><span class="line"><span class="string">`SEGMENT4`</span>,</span><br><span class="line"><span class="string">`SEGMENT5`</span>,</span><br><span class="line"><span class="string">`SEGMENT6`</span>,</span><br><span class="line"><span class="string">`SEGMENT7`</span>,</span><br><span class="line"><span class="string">`SEGMENT8`</span>,</span><br><span class="line"><span class="string">`SEGMENT9`</span>,</span><br><span class="line"><span class="string">`SEGMENT10`</span>,</span><br><span class="line"><span class="string">`SEGMENT11`</span>,</span><br><span class="line"><span class="string">`SEGMENT12`</span>,</span><br><span class="line"><span class="string">`SEGMENT13`</span>,</span><br><span class="line"><span class="string">`SEGMENT14`</span>,</span><br><span class="line"><span class="string">`SEGMENT15`</span>,</span><br><span class="line"><span class="string">`SEGMENT16`</span>,</span><br><span class="line"><span class="string">`SEGMENT17`</span>,</span><br><span class="line"><span class="string">`SEGMENT18`</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">VALUES</span></span><br><span class="line">(</span><br><span class="line"><span class="number">300000003238305</span>,</span><br><span class="line"><span class="string">'Y'</span>,</span><br><span class="line"><span class="string">'E'</span>,</span><br><span class="line"><span class="string">'050'</span>,</span><br><span class="line"><span class="string">'0'</span>,</span><br><span class="line"><span class="string">'71205'</span>,</span><br><span class="line"><span class="string">'S101005'</span>,</span><br><span class="line"><span class="string">'50010'</span>,</span><br><span class="line"><span class="string">'1101'</span>,</span><br><span class="line"><span class="string">'I101'</span>,</span><br><span class="line"><span class="string">'0'</span>,</span><br><span class="line"><span class="string">'0'</span>,</span><br><span class="line"><span class="string">'0'</span>,</span><br><span class="line"><span class="string">'0'</span>,</span><br><span class="line"><span class="string">'0'</span>,</span><br><span class="line"><span class="literal">NULL</span>,</span><br><span class="line"><span class="literal">NULL</span>,</span><br><span class="line"><span class="literal">NULL</span>,</span><br><span class="line"><span class="literal">NULL</span>,</span><br><span class="line"><span class="literal">NULL</span>,</span><br><span class="line"><span class="literal">NULL</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h4 id="å®ä½“ç±»ï¼ˆCodeCombinations-javaï¼‰"><a href="#å®ä½“ç±»ï¼ˆCodeCombinations-javaï¼‰" class="headerlink" title="å®ä½“ç±»ï¼ˆCodeCombinations.javaï¼‰"></a>å®ä½“ç±»ï¼ˆCodeCombinations.javaï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.persistence.GeneratedValue;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"><span class="keyword">import</span> org.hibernate.validator.constraints.Length;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Table;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.NotNull;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by xiaofeng.he on 2018/03/08</span></span><br><span class="line"><span class="comment"> * å¸å·ç»„åˆDTO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Table</span>(name = <span class="string">"XXGL_CODE_COMBINATIONS"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CodeCombinations</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span></span><br><span class="line">    <span class="keyword">private</span> Long combinationId; <span class="comment">// è¡¨IDï¼Œä¸»é”®ï¼Œä¾›å…¶ä»–è¡¨åšå¤–é”®</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@NotNull</span></span><br><span class="line">    <span class="keyword">private</span> Long codeCombinationId; <span class="comment">// ERPä¸­CODE_COMBINATION_ID</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String accountType;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String enabledFlag;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Length</span>(max = <span class="number">25</span>)</span><br><span class="line">    <span class="keyword">private</span> String segment1;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Length</span>(max = <span class="number">25</span>)</span><br><span class="line">    <span class="keyword">private</span> String segment2;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Length</span>(max = <span class="number">25</span>)</span><br><span class="line">    <span class="keyword">private</span> String segment3;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Length</span>(max = <span class="number">25</span>)</span><br><span class="line">    <span class="keyword">private</span> String segment4;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Length</span>(max = <span class="number">25</span>)</span><br><span class="line">    <span class="keyword">private</span> String segment5;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Length</span>(max = <span class="number">25</span>)</span><br><span class="line">    <span class="keyword">private</span> String segment6;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Length</span>(max = <span class="number">25</span>)</span><br><span class="line">    <span class="keyword">private</span> String segment7;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Length</span>(max = <span class="number">25</span>)</span><br><span class="line">    <span class="keyword">private</span> String segment8;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Length</span>(max = <span class="number">25</span>)</span><br><span class="line">    <span class="keyword">private</span> String segment9;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Length</span>(max = <span class="number">25</span>)</span><br><span class="line">    <span class="keyword">private</span> String segment10;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Length</span>(max = <span class="number">25</span>)</span><br><span class="line">    <span class="keyword">private</span> String segment11;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Length</span>(max = <span class="number">25</span>)</span><br><span class="line">    <span class="keyword">private</span> String segment12;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Length</span>(max = <span class="number">25</span>)</span><br><span class="line">    <span class="keyword">private</span> String segment13;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Length</span>(max = <span class="number">25</span>)</span><br><span class="line">    <span class="keyword">private</span> String segment14;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Length</span>(max = <span class="number">25</span>)</span><br><span class="line">    <span class="keyword">private</span> String segment15;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Length</span>(max = <span class="number">25</span>)</span><br><span class="line">    <span class="keyword">private</span> String segment16;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Length</span>(max = <span class="number">25</span>)</span><br><span class="line">    <span class="keyword">private</span> String segment17;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Length</span>(max = <span class="number">25</span>)</span><br><span class="line">    <span class="keyword">private</span> String segment18;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// getter setter...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="java-mapper"><a href="#java-mapper" class="headerlink" title="java mapper"></a>java mapper</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by xiaofeng.he on 2018/03/08</span></span><br><span class="line"><span class="comment"> * è´¦æˆ·ç»„åˆmapper</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CodeCombinationsMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®å¤šä¸ª segment value æŸ¥è¯¢å”¯ä¸€</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> segmentValues</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">CodeCombinations <span class="title">selectOneBySegmentArray</span><span class="params">(@Param(<span class="string">"segmentValues"</span>)</span> String[] segmentValues)</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®å¤šä¸ª segment value æŸ¥è¯¢å”¯ä¸€</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> segmentValues</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">CodeCombinations <span class="title">selectOneBySegmentList</span><span class="params">(List&lt;String&gt; segmentValues)</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®å¤šä¸ª segment value æŸ¥è¯¢å”¯ä¸€</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> params</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">CodeCombinations <span class="title">selectOneBySegmentMap</span><span class="params">(Map&lt;String, Object&gt; params)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="xml-mapper"><a href="#xml-mapper" class="headerlink" title="xml mapper"></a>xml mapper</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"xxx.mapper.CodeCombinationsMapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"BaseResultMap"</span> <span class="attr">type</span>=<span class="string">"xxx.dto.CodeCombinations"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"COMBINATION_ID"</span> <span class="attr">property</span>=<span class="string">"combinationId"</span> <span class="attr">jdbcType</span>=<span class="string">"DECIMAL"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"CODE_COMBINATION_ID"</span> <span class="attr">property</span>=<span class="string">"codeCombinationId"</span> <span class="attr">jdbcType</span>=<span class="string">"DECIMAL"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"ACCOUNT_TYPE"</span> <span class="attr">property</span>=<span class="string">"accountType"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"ENABLED_FLAG"</span> <span class="attr">property</span>=<span class="string">"enabledFlag"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"SEGMENT1"</span> <span class="attr">property</span>=<span class="string">"segment1"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"SEGMENT2"</span> <span class="attr">property</span>=<span class="string">"segment2"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"SEGMENT3"</span> <span class="attr">property</span>=<span class="string">"segment3"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"SEGMENT4"</span> <span class="attr">property</span>=<span class="string">"segment4"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"SEGMENT5"</span> <span class="attr">property</span>=<span class="string">"segment5"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"SEGMENT6"</span> <span class="attr">property</span>=<span class="string">"segment6"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"SEGMENT7"</span> <span class="attr">property</span>=<span class="string">"segment7"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"SEGMENT8"</span> <span class="attr">property</span>=<span class="string">"segment8"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"SEGMENT9"</span> <span class="attr">property</span>=<span class="string">"segment9"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"SEGMENT10"</span> <span class="attr">property</span>=<span class="string">"segment10"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"SEGMENT11"</span> <span class="attr">property</span>=<span class="string">"segment11"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"SEGMENT12"</span> <span class="attr">property</span>=<span class="string">"segment12"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"SEGMENT13"</span> <span class="attr">property</span>=<span class="string">"segment13"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"SEGMENT14"</span> <span class="attr">property</span>=<span class="string">"segment14"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"SEGMENT15"</span> <span class="attr">property</span>=<span class="string">"segment15"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"SEGMENT16"</span> <span class="attr">property</span>=<span class="string">"segment16"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"SEGMENT17"</span> <span class="attr">property</span>=<span class="string">"segment17"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"SEGMENT18"</span> <span class="attr">property</span>=<span class="string">"segment18"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!--Array:forech ä¸­çš„ collection å±æ€§ç±»å‹æ˜¯ Array, collection çš„å€¼å¿…é¡»æ˜¯:array, item çš„å€¼å¯ä»¥éšæ„, mapper æ¥å£ä¸­å‚æ•°åå­—éšæ„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectOneBySegmentArray"</span> <span class="attr">resultMap</span>=<span class="string">"BaseResultMap"</span>&gt;</span></span><br><span class="line">        select c.* from XXGL_CODE_COMBINATIONS c</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            and c.ENABLED_FLAG = 'Y'</span><br><span class="line">            <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"segmentValues"</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- ä½¿ç”¨äº†@Param åcollectionä¸èƒ½å¡«arrayï¼Œè¦å¡«å†™åˆ«å --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"segmentValues"</span> <span class="attr">item</span>=<span class="string">"segmentValue"</span> <span class="attr">index</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">                        and c.SEGMENT$&#123;index+1&#125; = #&#123;segmentValue&#125;</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">                    and 1=2</span><br><span class="line">                <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--List:forech ä¸­çš„ collection å±æ€§ç±»å‹æ˜¯ List, collection çš„å€¼å¿…é¡»æ˜¯:list, item çš„å€¼å¯ä»¥éšæ„, mapper æ¥å£ä¸­å‚æ•°åå­—éšæ„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectOneBySegmentList"</span> <span class="attr">resultMap</span>=<span class="string">"BaseResultMap"</span>&gt;</span></span><br><span class="line">        select c.* from XXGL_CODE_COMBINATIONS c</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            and c.ENABLED_FLAG = 'Y'</span><br><span class="line">            <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"list"</span> <span class="attr">item</span>=<span class="string">"segmentValue"</span> <span class="attr">index</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">                        and c.SEGMENT$&#123;index+1&#125; = #&#123;segmentValue&#125;</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">                    and 1=2</span><br><span class="line">                <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!--Map:ä¸å•å• forech ä¸­çš„ collection å±æ€§æ˜¯ map.key,å…¶å®ƒæ‰€æœ‰å±æ€§éƒ½æ˜¯ map.key, æ¯”å¦‚ä¸‹é¢çš„ enabledFlag --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectOneBySegmentMap"</span> <span class="attr">resultMap</span>=<span class="string">"BaseResultMap"</span>&gt;</span></span><br><span class="line">        select c.* from XXGL_CODE_COMBINATIONS c</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            and c.ENABLED_FLAG = #&#123;enabledFlag&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"segmentArray"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"segmentArray"</span> <span class="attr">item</span>=<span class="string">"segmentValue"</span> <span class="attr">index</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">                        and c.SEGMENT$&#123;index+1&#125; = #&#123;segmentValue&#125;</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">                    and 1=2</span><br><span class="line">                <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"segmentList"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"segmentList"</span> <span class="attr">item</span>=<span class="string">"segmentValue"</span> <span class="attr">index</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">                        /* 2 */</span><br><span class="line">                        and c.SEGMENT$&#123;index+1&#125; = #&#123;segmentValue&#125;</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">                    and 1=2</span><br><span class="line">                <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•-controller"><a href="#æµ‹è¯•-controller" class="headerlink" title="æµ‹è¯• controller"></a>æµ‹è¯• controller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> xxx.dto.CodeCombinations;</span><br><span class="line"><span class="keyword">import</span> xxx.mapper.CodeCombinationsMapper;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CodeCombinationsMapper codeCombinationsMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/test/code/combination/selectBySegments"</span>)</span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;CodeCombinations&gt; <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String[] a = &#123;<span class="string">"050"</span>, <span class="string">"0"</span>, <span class="string">"71205"</span>, <span class="string">"S101005"</span>, <span class="string">"50010"</span>, <span class="string">"1101"</span>, <span class="string">"I101"</span>&#125;;</span><br><span class="line"></span><br><span class="line">        CodeCombinations codeCombinations1 = codeCombinationsMapper.selectOneBySegments(a);</span><br><span class="line">        CodeCombinations codeCombinations2 = codeCombinationsMapper.selectOneBySegmentList(Arrays.asList(a));</span><br><span class="line">        Map&lt;String, Object&gt; params = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        params.put(<span class="string">"enabledFlag"</span>, <span class="string">"Y"</span>);</span><br><span class="line">        params.put(<span class="string">"segmentArray"</span>, a);</span><br><span class="line">        params.put(<span class="string">"segmentList"</span>, Arrays.asList(a));</span><br><span class="line">        CodeCombinations codeCombinations3 = codeCombinationsMapper.selectOneBySegmentMap(params);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Arrays.asList(codeCombinations1, codeCombinations2, codeCombinations3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•ç»“æœ"><a href="#æµ‹è¯•ç»“æœ" class="headerlink" title="æµ‹è¯•ç»“æœ"></a>æµ‹è¯•ç»“æœ</h4><p><strong>log</strong></p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>-<span class="number">02</span>-<span class="number">08</span> <span class="number">22</span>:<span class="number">40</span>:<span class="number">40</span><span class="variable">.523</span> DEBUG [<span class="number">10001</span>] [e5c47fa7c79b461a806c2d6135d485c2] xxx<span class="variable">.mapper</span><span class="variable">.CodeCombinationsMapper</span><span class="variable">.selectOneBySegments</span> - ==&gt;  Preparing: select c.* from XXGL_CODE_COMBINATIONS c WHERE c<span class="variable">.ENABLED_FLAG</span> = 'Y' <span class="keyword">and</span> c<span class="variable">.SEGMENT1</span> = ? <span class="keyword">and</span> c<span class="variable">.SEGMENT2</span> = ? <span class="keyword">and</span> c<span class="variable">.SEGMENT3</span> = ? <span class="keyword">and</span> c<span class="variable">.SEGMENT4</span> = ? <span class="keyword">and</span> c<span class="variable">.SEGMENT5</span> = ? <span class="keyword">and</span> c<span class="variable">.SEGMENT6</span> = ? <span class="keyword">and</span> c<span class="variable">.SEGMENT7</span> = ? </span><br><span class="line"><span class="number">2019</span>-<span class="number">02</span>-<span class="number">08</span> <span class="number">22</span>:<span class="number">40</span>:<span class="number">40</span><span class="variable">.524</span> DEBUG [<span class="number">10001</span>] [e5c47fa7c79b461a806c2d6135d485c2] xxx<span class="variable">.mapper</span><span class="variable">.CodeCombinationsMapper</span><span class="variable">.selectOneBySegments</span> - ==&gt; Parameters: <span class="number">050</span>(String), <span class="number">0</span>(String), <span class="number">71205</span>(String), S101005(String), <span class="number">50010</span>(String), <span class="number">1101</span>(String), I101(String)</span><br><span class="line"><span class="number">2019</span>-<span class="number">02</span>-<span class="number">08</span> <span class="number">22</span>:<span class="number">40</span>:<span class="number">40</span><span class="variable">.532</span> DEBUG [<span class="number">10001</span>] [e5c47fa7c79b461a806c2d6135d485c2] xxx<span class="variable">.mapper</span><span class="variable">.CodeCombinationsMapper</span><span class="variable">.selectOneBySegments</span> - &lt;==      Total: <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="number">2019</span>-<span class="number">02</span>-<span class="number">08</span> <span class="number">22</span>:<span class="number">40</span>:<span class="number">43</span><span class="variable">.259</span> DEBUG [<span class="number">10001</span>] [e5c47fa7c79b461a806c2d6135d485c2] xxx<span class="variable">.mapper</span><span class="variable">.CodeCombinationsMapper</span><span class="variable">.selectOneBySegmentList</span> - ==&gt;  Preparing: select c.* from XXGL_CODE_COMBINATIONS c WHERE c<span class="variable">.ENABLED_FLAG</span> = 'Y' <span class="keyword">and</span> c<span class="variable">.SEGMENT1</span> = ? <span class="keyword">and</span> c<span class="variable">.SEGMENT2</span> = ? <span class="keyword">and</span> c<span class="variable">.SEGMENT3</span> = ? <span class="keyword">and</span> c<span class="variable">.SEGMENT4</span> = ? <span class="keyword">and</span> c<span class="variable">.SEGMENT5</span> = ? <span class="keyword">and</span> c<span class="variable">.SEGMENT6</span> = ? <span class="keyword">and</span> c<span class="variable">.SEGMENT7</span> = ? </span><br><span class="line"><span class="number">2019</span>-<span class="number">02</span>-<span class="number">08</span> <span class="number">22</span>:<span class="number">40</span>:<span class="number">43</span><span class="variable">.259</span> DEBUG [<span class="number">10001</span>] [e5c47fa7c79b461a806c2d6135d485c2] xxx<span class="variable">.mapper</span><span class="variable">.CodeCombinationsMapper</span><span class="variable">.selectOneBySegmentList</span> - ==&gt; Parameters: <span class="number">050</span>(String), <span class="number">0</span>(String), <span class="number">71205</span>(String), S101005(String), <span class="number">50010</span>(String), <span class="number">1101</span>(String), I101(String)</span><br><span class="line"><span class="number">2019</span>-<span class="number">02</span>-<span class="number">08</span> <span class="number">22</span>:<span class="number">40</span>:<span class="number">43</span><span class="variable">.263</span> DEBUG [<span class="number">10001</span>] [e5c47fa7c79b461a806c2d6135d485c2] xxx<span class="variable">.mapper</span><span class="variable">.CodeCombinationsMapper</span><span class="variable">.selectOneBySegmentList</span> - &lt;==      Total: <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="number">2019</span>-<span class="number">02</span>-<span class="number">08</span> <span class="number">22</span>:<span class="number">40</span>:<span class="number">44</span><span class="variable">.284</span> DEBUG [<span class="number">10001</span>] [e5c47fa7c79b461a806c2d6135d485c2] xxx<span class="variable">.mapper</span><span class="variable">.CodeCombinationsMapper</span><span class="variable">.selectOneBySegmentMap</span> - ==&gt;  Preparing: select c.* from XXGL_CODE_COMBINATIONS c WHERE c<span class="variable">.ENABLED_FLAG</span> = ? <span class="keyword">and</span> c<span class="variable">.SEGMENT1</span> = ? <span class="keyword">and</span> c<span class="variable">.SEGMENT2</span> = ? <span class="keyword">and</span> c<span class="variable">.SEGMENT3</span> = ? <span class="keyword">and</span> c<span class="variable">.SEGMENT4</span> = ? <span class="keyword">and</span> c<span class="variable">.SEGMENT5</span> = ? <span class="keyword">and</span> c<span class="variable">.SEGMENT6</span> = ? <span class="keyword">and</span> c<span class="variable">.SEGMENT7</span> = ? <span class="comment">/* 2 */</span> <span class="keyword">and</span> c<span class="variable">.SEGMENT1</span> = ? <span class="comment">/* 2 */</span> <span class="keyword">and</span> c<span class="variable">.SEGMENT2</span> = ? <span class="comment">/* 2 */</span> <span class="keyword">and</span> c<span class="variable">.SEGMENT3</span> = ? <span class="comment">/* 2 */</span> <span class="keyword">and</span> c<span class="variable">.SEGMENT4</span> = ? <span class="comment">/* 2 */</span> <span class="keyword">and</span> c<span class="variable">.SEGMENT5</span> = ? <span class="comment">/* 2 */</span> <span class="keyword">and</span> c<span class="variable">.SEGMENT6</span> = ? <span class="comment">/* 2 */</span> <span class="keyword">and</span> c<span class="variable">.SEGMENT7</span> = ? </span><br><span class="line"><span class="number">2019</span>-<span class="number">02</span>-<span class="number">08</span> <span class="number">22</span>:<span class="number">40</span>:<span class="number">44</span><span class="variable">.284</span> DEBUG [<span class="number">10001</span>] [e5c47fa7c79b461a806c2d6135d485c2] xxx<span class="variable">.mapper</span><span class="variable">.CodeCombinationsMapper</span><span class="variable">.selectOneBySegmentMap</span> - ==&gt; Parameters: Y(String), <span class="number">050</span>(String), <span class="number">0</span>(String), <span class="number">71205</span>(String), S101005(String), <span class="number">50010</span>(String), <span class="number">1101</span>(String), I101(String), <span class="number">050</span>(String), <span class="number">0</span>(String), <span class="number">71205</span>(String), S101005(String), <span class="number">50010</span>(String), <span class="number">1101</span>(String), I101(String)</span><br><span class="line"><span class="number">2019</span>-<span class="number">02</span>-<span class="number">08</span> <span class="number">22</span>:<span class="number">40</span>:<span class="number">44</span><span class="variable">.289</span> DEBUG [<span class="number">10001</span>] [e5c47fa7c79b461a806c2d6135d485c2] xxx<span class="variable">.mapper</span><span class="variable">.CodeCombinationsMapper</span><span class="variable">.selectOneBySegmentMap</span> - &lt;==      Total: <span class="number">1</span></span><br></pre></td></tr></table></figure><p><strong>json</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">"combinationId"</span>: <span class="number">1000</span>,</span><br><span class="line"><span class="attr">"codeCombinationId"</span>: <span class="number">300000003238305</span>,</span><br><span class="line"><span class="attr">"accountType"</span>: <span class="string">"E"</span>,</span><br><span class="line"><span class="attr">"enabledFlag"</span>: <span class="string">"Y"</span>,</span><br><span class="line"><span class="attr">"segment1"</span>: <span class="string">"050"</span>,</span><br><span class="line"><span class="attr">"segment2"</span>: <span class="string">"0"</span>,</span><br><span class="line"><span class="attr">"segment3"</span>: <span class="string">"71205"</span>,</span><br><span class="line"><span class="attr">"segment4"</span>: <span class="string">"S101005"</span>,</span><br><span class="line"><span class="attr">"segment5"</span>: <span class="string">"50010"</span>,</span><br><span class="line"><span class="attr">"segment6"</span>: <span class="string">"1101"</span>,</span><br><span class="line"><span class="attr">"segment7"</span>: <span class="string">"I101"</span>,</span><br><span class="line"><span class="attr">"segment8"</span>: <span class="string">"0"</span>,</span><br><span class="line"><span class="attr">"segment9"</span>: <span class="string">"0"</span>,</span><br><span class="line"><span class="attr">"segment10"</span>: <span class="string">"0"</span>,</span><br><span class="line"><span class="attr">"segment11"</span>: <span class="string">"0"</span>,</span><br><span class="line"><span class="attr">"segment12"</span>: <span class="string">"0"</span>,</span><br><span class="line"><span class="attr">"segment13"</span>: <span class="literal">null</span>,</span><br><span class="line"><span class="attr">"segment14"</span>: <span class="literal">null</span>,</span><br><span class="line"><span class="attr">"segment15"</span>: <span class="literal">null</span>,</span><br><span class="line"><span class="attr">"segment16"</span>: <span class="literal">null</span>,</span><br><span class="line"><span class="attr">"segment17"</span>: <span class="literal">null</span>,</span><br><span class="line"><span class="attr">"segment18"</span>: <span class="literal">null</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">"combinationId"</span>: <span class="number">1000</span>,</span><br><span class="line"><span class="attr">"codeCombinationId"</span>: <span class="number">300000003238305</span>,</span><br><span class="line"><span class="attr">"accountType"</span>: <span class="string">"E"</span>,</span><br><span class="line"><span class="attr">"enabledFlag"</span>: <span class="string">"Y"</span>,</span><br><span class="line"><span class="attr">"segment1"</span>: <span class="string">"050"</span>,</span><br><span class="line"><span class="attr">"segment2"</span>: <span class="string">"0"</span>,</span><br><span class="line"><span class="attr">"segment3"</span>: <span class="string">"71205"</span>,</span><br><span class="line"><span class="attr">"segment4"</span>: <span class="string">"S101005"</span>,</span><br><span class="line"><span class="attr">"segment5"</span>: <span class="string">"50010"</span>,</span><br><span class="line"><span class="attr">"segment6"</span>: <span class="string">"1101"</span>,</span><br><span class="line"><span class="attr">"segment7"</span>: <span class="string">"I101"</span>,</span><br><span class="line"><span class="attr">"segment8"</span>: <span class="string">"0"</span>,</span><br><span class="line"><span class="attr">"segment9"</span>: <span class="string">"0"</span>,</span><br><span class="line"><span class="attr">"segment10"</span>: <span class="string">"0"</span>,</span><br><span class="line"><span class="attr">"segment11"</span>: <span class="string">"0"</span>,</span><br><span class="line"><span class="attr">"segment12"</span>: <span class="string">"0"</span>,</span><br><span class="line"><span class="attr">"segment13"</span>: <span class="literal">null</span>,</span><br><span class="line"><span class="attr">"segment14"</span>: <span class="literal">null</span>,</span><br><span class="line"><span class="attr">"segment15"</span>: <span class="literal">null</span>,</span><br><span class="line"><span class="attr">"segment16"</span>: <span class="literal">null</span>,</span><br><span class="line"><span class="attr">"segment17"</span>: <span class="literal">null</span>,</span><br><span class="line"><span class="attr">"segment18"</span>: <span class="literal">null</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">"combinationId"</span>: <span class="number">1000</span>,</span><br><span class="line"><span class="attr">"codeCombinationId"</span>: <span class="number">300000003238305</span>,</span><br><span class="line"><span class="attr">"accountType"</span>: <span class="string">"E"</span>,</span><br><span class="line"><span class="attr">"enabledFlag"</span>: <span class="string">"Y"</span>,</span><br><span class="line"><span class="attr">"segment1"</span>: <span class="string">"050"</span>,</span><br><span class="line"><span class="attr">"segment2"</span>: <span class="string">"0"</span>,</span><br><span class="line"><span class="attr">"segment3"</span>: <span class="string">"71205"</span>,</span><br><span class="line"><span class="attr">"segment4"</span>: <span class="string">"S101005"</span>,</span><br><span class="line"><span class="attr">"segment5"</span>: <span class="string">"50010"</span>,</span><br><span class="line"><span class="attr">"segment6"</span>: <span class="string">"1101"</span>,</span><br><span class="line"><span class="attr">"segment7"</span>: <span class="string">"I101"</span>,</span><br><span class="line"><span class="attr">"segment8"</span>: <span class="string">"0"</span>,</span><br><span class="line"><span class="attr">"segment9"</span>: <span class="string">"0"</span>,</span><br><span class="line"><span class="attr">"segment10"</span>: <span class="string">"0"</span>,</span><br><span class="line"><span class="attr">"segment11"</span>: <span class="string">"0"</span>,</span><br><span class="line"><span class="attr">"segment12"</span>: <span class="string">"0"</span>,</span><br><span class="line"><span class="attr">"segment13"</span>: <span class="literal">null</span>,</span><br><span class="line"><span class="attr">"segment14"</span>: <span class="literal">null</span>,</span><br><span class="line"><span class="attr">"segment15"</span>: <span class="literal">null</span>,</span><br><span class="line"><span class="attr">"segment16"</span>: <span class="literal">null</span>,</span><br><span class="line"><span class="attr">"segment17"</span>: <span class="literal">null</span>,</span><br><span class="line"><span class="attr">"segment18"</span>: <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="æ„Ÿè°¢"><a href="#æ„Ÿè°¢" class="headerlink" title="æ„Ÿè°¢"></a>æ„Ÿè°¢</h3><p><a href="https://blog.csdn.net/s592652578/article/details/52871884" target="_blank" rel="noopener">https://blog.csdn.net/s592652578/article/details/52871884</a></p>]]></content>
    
    <summary type="html">
    
      MyBatis ä¼ å…¥å‚æ•°ä¸º Listã€Arrayã€Map
    
    </summary>
    
      <category term="Java" scheme="http://yoursite.com/categories/Java/"/>
    
      <category term="MyBatis" scheme="http://yoursite.com/categories/Java/MyBatis/"/>
    
    
      <category term="Java" scheme="http://yoursite.com/tags/Java/"/>
    
      <category term="MyBatis" scheme="http://yoursite.com/tags/MyBatis/"/>
    
  </entry>
  
  <entry>
    <title>èˆªå¤©ä¿¡æ¯é‡‘ç¨ç›˜æ¥å£ js è°ƒç”¨</title>
    <link href="http://yoursite.com/2018/12/02/essay/gold-tax-js/"/>
    <id>http://yoursite.com/2018/12/02/essay/gold-tax-js/</id>
    <published>2018-12-01T16:00:00.000Z</published>
    <updated>2020-10-14T01:58:17.404Z</updated>
    
    <content type="html"><![CDATA[<h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><blockquote><p>æœ€è¿‘é¡¹ç›®è¦æ±‚ä¸å•æœºç‰ˆçš„é‡‘ç¨ç›˜æ¥å£è¿›è¡Œå¯¹æ¥ï¼Œåœ¨è¿™é‡Œç®€å•è®°å½•ä¸€ä¸‹è‡ªå·±çš„å¼€å‘ç»éªŒï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©åˆ°æœ‰éœ€è¦çš„äºº</p><p>PSï¼šæ¥å£ä½¿ç”¨ <code>js</code> å¯¹æ¥ï¼Œä»…æ”¯æŒ <code>ie</code> æµè§ˆå™¨ã€‚</p></blockquote><h3 id="å‰ç½®æ¡ä»¶"><a href="#å‰ç½®æ¡ä»¶" class="headerlink" title="å‰ç½®æ¡ä»¶"></a>å‰ç½®æ¡ä»¶</h3><p>åœ¨è¿›è¡Œå¼€å‘æ—¶å€™éœ€è¦æœ‰ä¸€äº›å‰ç½®æ¡ä»¶</p><ol><li><p><code>ie</code> æµè§ˆå™¨</p><ul><li><p>å¼€å¯ <code>activeX</code> æ§ä»¶</p><p>è®¾ç½® â€“&gt; Internet é€‰é¡¹ â€“&gt; å®‰å…¨ â€“&gt; è‡ªå®šä¹‰çº§åˆ«</p><p>æŠŠ <code>activeX</code> ç›¸å…³è®¾ç½®å‹¾ä¸Š</p><p>å¯å‚è€ƒ: </p></li><li><p>ç®¡ç†å‘˜èº«ä»½è¿è¡Œè°ƒè¯•</p><p>å¦‚æœå¼€ç¥¨è½¯ä»¶å®‰è£…åˆ°æœ¬åœ° <code>Cç›˜</code> éœ€è¦ä½¿ç”¨ç®¡ç†å‘˜æ‰“å¼€ <code>ie</code> æµè§ˆå™¨ï¼Œç„¶åå†è¿›è¡Œè°ƒè¯•</p></li></ul></li><li><p>é‡‘ç¨ç›˜å®‰è£…</p><ul><li>è¦ç¡®ä¿é‡‘ç¨ç›˜å®‰è£…å‡†ç¡®å®‰è£…äº†<code>TaxCardX.dll</code></li></ul></li></ol><h3 id="é€šç”¨-jsä»£ç "><a href="#é€šç”¨-jsä»£ç " class="headerlink" title="é€šç”¨ jsä»£ç "></a>é€šç”¨ <code>js</code>ä»£ç </h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** èˆªä¿¡é‡‘ç¨ç›˜ç›¸å…³function */</span></span><br><span class="line"><span class="keyword">var</span> goldTax = &#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨å‰å…ˆåˆ¤æ–­æ˜¯å¦æ˜¯ieæµè§ˆå™¨</span></span><br><span class="line"><span class="comment"> * @return true/false</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">isIE: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!!<span class="built_in">window</span>.ActiveXObject || <span class="string">"ActiveXObject"</span> <span class="keyword">in</span> <span class="built_in">window</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¼€å¯é‡‘ç¨ç›˜</span></span><br><span class="line"><span class="comment"> * @param certPassword å•æœºç‰ˆä¸ºè¯ä¹¦å£ä»¤  æœåŠ¡å™¨ç‰ˆä¸ºåœ°å€ ç•™ç©ºåˆ™è¯»å–å¼€ç¥¨BINæ–‡ä»¶ä¸‹cert.txt</span></span><br><span class="line"><span class="comment"> * @return </span></span><br><span class="line"><span class="comment"> * &lt;pre&gt;</span></span><br><span class="line"><span class="comment"> *     &#123;</span></span><br><span class="line"><span class="comment"> *        'success': true/false, // æˆåŠŸæˆ–è€…å¤±è´¥</span></span><br><span class="line"><span class="comment"> *        'code': -1/å…¶ä»–, // é”™è¯¯ç ï¼Œ-1 ä¸ºç³»ç»Ÿé”™è¯¯</span></span><br><span class="line"><span class="comment"> *        'msg': 'xxx', // é”™è¯¯ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> *        'data': &#123;&#125; // æ¥å£è¿”å›ç›¸å…³æ•°æ®</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &lt;/pre&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">openCard: <span class="function"><span class="keyword">function</span> (<span class="params">certPassword</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> result = &#123;</span><br><span class="line"><span class="string">'success'</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="string">'code'</span>: <span class="number">-1</span>,</span><br><span class="line"><span class="string">'msg'</span>: <span class="string">''</span>,</span><br><span class="line"><span class="string">'data'</span>: &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            goldTax.card = <span class="keyword">new</span> ActiveXObject(<span class="string">"TaxCardX.GoldTax"</span>);</span><br><span class="line">            <span class="comment">// å•æœºç‰ˆä¸ºè¯ä¹¦å£ä»¤  æœåŠ¡å™¨ç‰ˆä¸ºåœ°å€ ç•™ç©ºåˆ™è¯»å–å¼€ç¥¨BINæ–‡ä»¶ä¸‹cert.txt</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">typeof</span> certPassword != <span class="string">'undefined'</span>) &#123;</span><br><span class="line">            goldTax.card.CertPassword = certPassword;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å¼€å¯é‡‘ç¨ç›˜</span></span><br><span class="line">            goldTax.card.OpenCard();</span><br><span class="line">            result.code = goldTax.card.RetCode;</span><br><span class="line">            result.msg = goldTax.card.RetMsg;</span><br><span class="line">            <span class="comment">// 1011 å¼€å¯æˆåŠŸ</span></span><br><span class="line">            <span class="keyword">if</span> (result.code == <span class="number">1011</span>) &#123;</span><br><span class="line">            result.success = <span class="literal">true</span>;</span><br><span class="line">            result.data = &#123;</span><br><span class="line">            RetCode: goldTax.card.RetCode, <span class="comment">/* RetCode - çŠ¶æ€ç ï¼Œ 1011 å¼€å¯æˆåŠŸ */</span></span><br><span class="line">            RetMsg: goldTax.card.RetMsg, <span class="comment">/* RetMsg çŠ¶æ€ä¿¡æ¯ */</span></span><br><span class="line">            InvLimit: goldTax.card.InvLimit, <span class="comment">/* InvLimit â€“ å¼€ç¥¨é™é¢, é‡‘ç¨å¡å‘ç¥¨å¼€å…·ä»·ç¨åˆè®¡é™é¢ */</span></span><br><span class="line">            TaxCode: goldTax.card.TaxCode, <span class="comment">/* TaxCode æœ¬å•ä½ç¨å· */</span></span><br><span class="line">            TaxClock: goldTax.card.TaxClock, <span class="comment">/* TaxClock â€“ é‡‘ç¨å¡æ—¶é’Ÿ */</span></span><br><span class="line">            MachineNo: goldTax.card.MachineNo, <span class="comment">/* MachineNo â€“ å¼€ç¥¨æœºå·ç ï¼Œä¸»å¼€ç¥¨æœºä¸º 0 */</span></span><br><span class="line">            IsInvEmpty: goldTax.card.IsInvEmpty, <span class="comment">/* IsInvEmpty â€“ æœ‰ç¥¨æ ‡å¿—ï¼Œ0ä¸ºé‡‘ç¨å¡ä¸­æ— å¯å¼€å‘ç¥¨ï¼Œ1ä¸ºæœ‰ç¥¨ */</span></span><br><span class="line">            IsRepReached: goldTax.card.IsRepReached, <span class="comment">/* IsRepReached â€“ æŠ„ç¨æ ‡å¿—ï¼Œ0ä¸ºæœªåˆ°æŠ„ç¨æœŸï¼Œ1ä¸ºå·²åˆ°æŠ„ç¨æœŸ */</span></span><br><span class="line">            IsLockReached: goldTax.card.IsLockReached, <span class="comment">/* IsLockReached â€“ é”æ­»æ ‡å¿—ï¼Œ0ä¸ºæœªåˆ°é”æ­»æœŸï¼Œ1ä¸ºå·²åˆ°é”æ­»æœŸ */</span></span><br><span class="line">            &#125;;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            result.success = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            result.success = <span class="literal">false</span>;</span><br><span class="line">            result.code = <span class="number">-1</span>;</span><br><span class="line">            result.msg = <span class="string">'ActiveX Error, '</span> + e.description;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å…³é—­é‡‘ç¨ç›˜</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     * &lt;pre&gt;</span></span><br><span class="line"><span class="comment"> *     &#123;</span></span><br><span class="line"><span class="comment"> *        'success': true/false, // æˆåŠŸæˆ–è€…å¤±è´¥</span></span><br><span class="line"><span class="comment"> *        'code': -1/å…¶ä»–, // é”™è¯¯ç ï¼Œ-1 ä¸ºç³»ç»Ÿé”™è¯¯</span></span><br><span class="line"><span class="comment"> *        'msg': 'xxx' // é”™è¯¯ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &lt;/pre&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    closeCard: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = &#123;</span><br><span class="line"><span class="string">'success'</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="string">'code'</span>: <span class="number">-1</span>,</span><br><span class="line"><span class="string">'msg'</span>: <span class="string">''</span></span><br><span class="line">&#125;;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> goldTax.card != <span class="string">'undefined'</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">    goldTax.card.closeCard();</span><br><span class="line">    result.code = goldTax.card.RetCode;</span><br><span class="line">            result.msg = goldTax.card.RetMsg;</span><br><span class="line">    <span class="comment">// RetCode 9000 è°ƒç”¨æˆåŠŸï¼Œå…¶ä»–å¤±è´¥</span></span><br><span class="line">    <span class="keyword">if</span> (result.code == <span class="number">9000</span>) &#123;</span><br><span class="line">    result.success = <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result.success = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    result.success = <span class="literal">false</span>;</span><br><span class="line">            result.code = <span class="number">-1</span>;</span><br><span class="line">            result.msg = <span class="string">'ActiveX Error, '</span> + e.description;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢åº“å­˜å‘ç¥¨</span></span><br><span class="line"><span class="comment">     * @param invKind å‘ç¥¨ç§ç±»</span></span><br><span class="line"><span class="comment">  * @return </span></span><br><span class="line"><span class="comment"> * &lt;pre&gt;</span></span><br><span class="line"><span class="comment"> *     &#123;</span></span><br><span class="line"><span class="comment"> *        'success': true/false, // æˆåŠŸæˆ–è€…å¤±è´¥</span></span><br><span class="line"><span class="comment"> *        'code': -1/å…¶ä»–, // é”™è¯¯ç ï¼Œ-1 ä¸ºç³»ç»Ÿé”™è¯¯</span></span><br><span class="line"><span class="comment"> *        'msg': 'xxx', // é”™è¯¯ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> *        'data': &#123;&#125; // æ¥å£è¿”å›ç›¸å…³æ•°æ®</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &lt;/pre&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    invoiceInventory: <span class="function"><span class="keyword">function</span>(<span class="params">invKind</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = &#123;</span><br><span class="line"><span class="string">'success'</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="string">'code'</span>: <span class="number">-1</span>,</span><br><span class="line"><span class="string">'msg'</span>: <span class="string">''</span>,</span><br><span class="line"><span class="string">'data'</span>: &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> goldTax.card != <span class="string">'undefined'</span>) &#123;</span><br><span class="line">    goldTax.card.InfoKind = invKind;</span><br><span class="line">    goldTax.card.GetInfo();</span><br><span class="line">    result.code = goldTax.card.RetCode;</span><br><span class="line">            result.msg = goldTax.card.RetMsg;</span><br><span class="line">    <span class="comment">// RetCode 3011 è¯»å–æˆåŠŸï¼Œå…¶ä»–å¤±è´¥</span></span><br><span class="line">    <span class="keyword">if</span> (result.code == <span class="number">3011</span>) &#123;</span><br><span class="line">    result.success = <span class="literal">true</span>;</span><br><span class="line">    result.data = &#123;</span><br><span class="line">    RetCode: goldTax.card.RetCode, <span class="comment">/* RetCode - çŠ¶æ€ç ï¼Œ 3011 è¯»å–æˆåŠŸï¼Œå…¶ä»–å¤±è´¥ */</span></span><br><span class="line">            RetMsg: goldTax.card.RetMsg, <span class="comment">/* RetMsg çŠ¶æ€ä¿¡æ¯ */</span></span><br><span class="line">            InfoTypeCode: goldTax.card.InfoTypeCode, <span class="comment">/* è¦å¼€å…·å‘ç¥¨çš„åä½ä»£ç ã€‚ä¸ºç©ºæˆ–å…¨ä¸º0æ—¶ï¼Œè¡¨ç¤ºæ— å¯ç”¨å‘ç¥¨ */</span></span><br><span class="line">            InfoNumber: goldTax.card.InfoNumber, <span class="comment">/* è¦å¼€å…·å‘ç¥¨çš„å·ç  */</span></span><br><span class="line">            InvStock: goldTax.card.InvStock, <span class="comment">/* å‰©ä½™çš„å¯ç”¨å‘ç¥¨ä»½æ•° */</span></span><br><span class="line">            TaxClock: goldTax.card.TaxClock <span class="comment">/* é‡‘ç¨ç›˜æ—¶é’Ÿ */</span></span><br><span class="line">    &#125;;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result.success = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result.success = <span class="literal">false</span>;</span><br><span class="line">            result.code = <span class="number">-1</span>;</span><br><span class="line">            result.msg = <span class="string">'Please Open Card First'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">result.success = <span class="literal">false</span>;</span><br><span class="line">            result.code = <span class="number">-1</span>;</span><br><span class="line">            result.msg = <span class="string">'ActiveX Error, '</span> + e.description;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘ç¥¨æ ¡éªŒ</span></span><br><span class="line"><span class="comment">     * @param o ä¼ å…¥å‘ç¥¨ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * @return </span></span><br><span class="line"><span class="comment"> * &lt;pre&gt;</span></span><br><span class="line"><span class="comment"> *     &#123;</span></span><br><span class="line"><span class="comment"> *        'success': true/false, // æˆåŠŸæˆ–è€…å¤±è´¥</span></span><br><span class="line"><span class="comment"> *        'code': -1/å…¶ä»–, // é”™è¯¯ç ï¼Œ-1 ä¸ºç³»ç»Ÿé”™è¯¯</span></span><br><span class="line"><span class="comment"> *        'msg': 'xxx', // é”™è¯¯ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> *        'data': &#123;&#125; // æ¥å£è¿”å›ç›¸å…³æ•°æ®</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &lt;/pre&gt;</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">    invoiceVeriferify: <span class="function"><span class="keyword">function</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> goldTax.inner.invoice(<span class="number">1</span>, o);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘ç¥¨å¼€å…·</span></span><br><span class="line"><span class="comment">     * @param o ä¼ å…¥å‘ç¥¨ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * @return </span></span><br><span class="line"><span class="comment"> * &lt;pre&gt;</span></span><br><span class="line"><span class="comment"> *     &#123;</span></span><br><span class="line"><span class="comment"> *        'success': true/false, // æˆåŠŸæˆ–è€…å¤±è´¥</span></span><br><span class="line"><span class="comment"> *        'code': -1/å…¶ä»–, // é”™è¯¯ç ï¼Œ-1 ä¸ºç³»ç»Ÿé”™è¯¯</span></span><br><span class="line"><span class="comment"> *        'msg': 'xxx', // é”™è¯¯ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> *        'data': &#123;&#125; // æ¥å£è¿”å›ç›¸å…³æ•°æ®</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &lt;/pre&gt;</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">    invoicing: <span class="function"><span class="keyword">function</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> goldTax.inner.invoice(<span class="number">0</span>, o);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘ç¥¨æ‰“å°</span></span><br><span class="line"><span class="comment">     * @param o ä¼ å…¥å‘ç¥¨ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * @return </span></span><br><span class="line"><span class="comment"> * &lt;pre&gt;</span></span><br><span class="line"><span class="comment"> *     &#123;</span></span><br><span class="line"><span class="comment"> *        'success': true/false, // æˆåŠŸæˆ–è€…å¤±è´¥</span></span><br><span class="line"><span class="comment"> *        'code': -1/å…¶ä»–, // é”™è¯¯ç ï¼Œ-1 ä¸ºç³»ç»Ÿé”™è¯¯</span></span><br><span class="line"><span class="comment"> *        'msg': 'xxx' // é”™è¯¯ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &lt;/pre&gt;</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">    printInv: <span class="function"><span class="keyword">function</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = &#123;</span><br><span class="line"><span class="string">'success'</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="string">'code'</span>: <span class="number">-1</span>,</span><br><span class="line"><span class="string">'msg'</span>: <span class="string">''</span></span><br><span class="line">&#125;;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> goldTax.card != <span class="string">'undefined'</span>) &#123;</span><br><span class="line">    goldTax.card.InfoKind = o.InfoKind; <span class="comment">/* å‘ç¥¨ç§ç±»ï¼ˆ0ï¼šä¸“ç”¨å‘ç¥¨  2ï¼šæ™®é€šå‘ç¥¨  11ï¼šè´§ç‰©è¿è¾“ä¸šå¢å€¼ç¨ä¸“ç”¨å‘ç¥¨  12ï¼šæœºåŠ¨è½¦é”€å”®ç»Ÿä¸€å‘ç¥¨ï¼‰ */</span></span><br><span class="line">    goldTax.card.InfoTypeCode = o.InfoTypeCode; <span class="comment">/* è¦æ‰“å°å‘ç¥¨çš„åä½ä»£ç  */</span></span><br><span class="line">                goldTax.card.InfoNumber = o.InfoNumber; <span class="comment">/* è¦æ‰“å°å‘ç¥¨çš„å·ç  */</span></span><br><span class="line">                goldTax.card.GoodsListFlag = o.GoodsListFlag; <span class="comment">/* é”€è´§æ¸…å•æ ‡å¿—ï¼Œ0 â€“ æ‰“å°å‘ç¥¨ï¼Œ1 â€“ æ‰“å°é”€è´§æ¸…å• */</span></span><br><span class="line">                goldTax.card.InfoShowPrtDlg = o.InfoShowPrtDlg; <span class="comment">/* æ‰“å°æ—¶æ˜¯å¦æ˜¾ç¤ºè¾¹è·ç¡®è®¤å¯¹è¯æ¡†ï¼Œ0 â€“ ä¸å‡ºç°ï¼Œ1 â€“ å‡ºç° */</span></span><br><span class="line">                <span class="comment">// è°ƒç”¨æ¥å£</span></span><br><span class="line">    goldTax.card.PrintInv();</span><br><span class="line">    result.code = goldTax.card.RetCode;</span><br><span class="line">            result.msg = goldTax.card.RetMsg;</span><br><span class="line">    <span class="comment">// RetCode 5011 æ‰“å°æˆåŠŸï¼Œ5001 â€“ æœªæ‰¾åˆ°å‘ç¥¨æˆ–æ¸…å•ï¼Œ5012 â€“ æœªæ‰“å°ï¼Œ5013 â€“ æ‰“å°å¤±è´¥</span></span><br><span class="line">    <span class="keyword">if</span> (result.code == <span class="number">5011</span>) &#123;</span><br><span class="line">    result.success = <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result.success = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result.success = <span class="literal">false</span>;</span><br><span class="line">            result.code = <span class="number">-1</span>;</span><br><span class="line">            result.msg = <span class="string">'Please Open Card First'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            result.success = <span class="literal">false</span>;</span><br><span class="line">            result.code = <span class="number">-1</span>;</span><br><span class="line">            result.msg = <span class="string">'ActiveX Error, '</span> + e.description;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å·²å¼€å‘ç¥¨ä½œåºŸ</span></span><br><span class="line"><span class="comment">     * @param o ä¼ å…¥å‘ç¥¨ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * @return </span></span><br><span class="line"><span class="comment"> * &lt;pre&gt;</span></span><br><span class="line"><span class="comment"> *     &#123;</span></span><br><span class="line"><span class="comment"> *        'success': true/false, // æˆåŠŸæˆ–è€…å¤±è´¥</span></span><br><span class="line"><span class="comment"> *        'code': -1/å…¶ä»–, // é”™è¯¯ç ï¼Œ-1 ä¸ºç³»ç»Ÿé”™è¯¯</span></span><br><span class="line"><span class="comment"> *        'msg': 'xxx' // é”™è¯¯ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &lt;/pre&gt;</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">    cancelInv: <span class="function"><span class="keyword">function</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = &#123;</span><br><span class="line"><span class="string">'success'</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="string">'code'</span>: <span class="number">-1</span>,</span><br><span class="line"><span class="string">'msg'</span>: <span class="string">''</span></span><br><span class="line">&#125;;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> goldTax.card != <span class="string">'undefined'</span>) &#123;</span><br><span class="line">    goldTax.card.InfoKind = o.InfoKind; <span class="comment">/* å‘ç¥¨ç§ç±»ï¼ˆ0ï¼šä¸“ç”¨å‘ç¥¨  2ï¼šæ™®é€šå‘ç¥¨  11ï¼šè´§ç‰©è¿è¾“ä¸šå¢å€¼ç¨ä¸“ç”¨å‘ç¥¨  12ï¼šæœºåŠ¨è½¦é”€å”®ç»Ÿä¸€å‘ç¥¨ï¼‰ */</span></span><br><span class="line">    goldTax.card.InfoTypeCode = o.InfoTypeCode; <span class="comment">/* è¦ä½œåºŸå‘ç¥¨çš„åä½æˆ–åäºŒä½ä»£ç  */</span></span><br><span class="line">                goldTax.card.InfoNumber = o.InfoNumber; <span class="comment">/* è¦ä½œåºŸå‘ç¥¨çš„å·ç  */</span></span><br><span class="line">                <span class="comment">// è°ƒç”¨æ¥å£</span></span><br><span class="line">    goldTax.card.CancelInv();</span><br><span class="line">    result.code = goldTax.card.RetCode;</span><br><span class="line">            result.msg = goldTax.card.RetMsg;</span><br><span class="line">    <span class="comment">// RetCode 6011 æ‰“å°æˆåŠŸï¼Œ6001 â€“ å½“æœˆå‘ç¥¨åº“æœªæ‰¾åˆ°è¯¥å‘ç¥¨ï¼Œ6002 â€“ è¯¥å‘ç¥¨å·²ç»ä½œåºŸï¼Œ6012 â€“ ä½œåºŸå¤±è´¥ï¼Œ6013 â€“ ä½œåºŸå¤±è´¥(å¼‚å¸¸)</span></span><br><span class="line">    <span class="keyword">if</span> (result.code == <span class="number">6011</span>) &#123;</span><br><span class="line">    result.success = <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result.success = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result.success = <span class="literal">false</span>;</span><br><span class="line">            result.code = <span class="number">-1</span>;</span><br><span class="line">            result.msg = <span class="string">'Please Open Card First'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            result.success = <span class="literal">false</span>;</span><br><span class="line">            result.code = <span class="number">-1</span>;</span><br><span class="line">            result.msg = <span class="string">'ActiveX Error, '</span> + e.description;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// å†…éƒ¨æ–¹æ³•</span></span><br><span class="line">    inner: &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * invoice æ¥å£</span></span><br><span class="line"><span class="comment">     * @param checkEWM é»˜è®¤ä¸º0ï¼ˆ0: å‘ç¥¨å¼€å…·, 1: å‘ç¥¨æ ¡éªŒ, 2: ç©ºç™½ä½œåºŸ)</span></span><br><span class="line"><span class="comment">     * @param o ä¼ å…¥å‘ç¥¨ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     * @return </span></span><br><span class="line"><span class="comment"> * &lt;pre&gt;</span></span><br><span class="line"><span class="comment"> *     &#123;</span></span><br><span class="line"><span class="comment"> *        'success': true/false, // æˆåŠŸæˆ–è€…å¤±è´¥</span></span><br><span class="line"><span class="comment"> *        'code': -1/å…¶ä»–, // é”™è¯¯ç ï¼Œ-1 ä¸ºç³»ç»Ÿé”™è¯¯</span></span><br><span class="line"><span class="comment"> *        'msg': 'xxx', // é”™è¯¯ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> *        'data': &#123;&#125; // æ¥å£è¿”å›ç›¸å…³æ•°æ®</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &lt;/pre&gt;</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">    invoice: <span class="function"><span class="keyword">function</span>(<span class="params">checkEWM, o</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> result = &#123;</span><br><span class="line"><span class="string">'success'</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="string">'code'</span>: <span class="number">-1</span>,</span><br><span class="line"><span class="string">'msg'</span>: <span class="string">''</span>,</span><br><span class="line"><span class="string">'data'</span>: &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> goldTax.card != <span class="string">'undefined'</span>) &#123;</span><br><span class="line">    <span class="comment">// CheckEWMå€¼é»˜è®¤ä¸º0ï¼ˆä¸º1æ—¶ç”¨äºå‘ç¥¨æ ¡éªŒã€‚</span></span><br><span class="line">    <span class="comment">// æ³¨æ„ï¼šä¸€æ—¦CheckEWMå€¼ç½®1ç”¨äºå‘ç¥¨æ ¡éªŒä¹‹åï¼Œ</span></span><br><span class="line">    <span class="comment">//å¦‚æœè¦å†è¿›è¡Œå‘ç¥¨å¼€å…·å¿…é¡»æ‰‹åŠ¨å°†CheckEWMå€¼ç½®ä¸º0ï¼Œå¦åˆ™Invoice()æ–¹æ³•çš„åŠŸèƒ½å°†ä¸€ç›´å¤„äºå‘ç¥¨æ ¡éªŒçŠ¶æ€ï¼‰</span></span><br><span class="line">    goldTax.card.CheckEWM = checkEWM; </span><br><span class="line">    goldTax.card.InvInfoInit(); <span class="comment">/* åˆå§‹åŒ–å‘ç¥¨æŠ¬å¤´ä¿¡æ¯ */</span></span><br><span class="line">    goldTax.card.InfoKind = o.InfoKind; <span class="comment">/* å¢å€¼ç¨æ™®é€šå‘ç¥¨2 ä¸“ç¥¨0 */</span></span><br><span class="line">    goldTax.card.InfoClientName = o.InfoClientName; <span class="comment">/* è´­æ–¹åç§° */</span></span><br><span class="line">                goldTax.card.InfoClientTaxCode = o.InfoClientTaxCode; <span class="comment">/* è´­æ–¹ç¨å· */</span></span><br><span class="line">                goldTax.card.InfoClientBankAccount = o.InfoClientBankAccount; <span class="comment">/* è´­æ–¹å¼€æˆ·è¡ŒåŠè´¦å· */</span></span><br><span class="line">                goldTax.card.InfoClientAddressPhone = o.InfoClientAddressPhone; <span class="comment">/* è´­æ–¹åœ°å€ç”µè¯ */</span></span><br><span class="line">                goldTax.card.InfoSellerBankAccount = o.InfoSellerBankAccount; <span class="comment">/* é”€æ–¹å¼€æˆ·è¡ŒåŠè´¦å· */</span></span><br><span class="line">                goldTax.card.InfoSellerAddressPhone = o.InfoSellerAddressPhone; <span class="comment">/* é”€æ–¹åœ°å€ç”µè¯ */</span></span><br><span class="line">                <span class="comment">// å¦‚æœæ˜¯å¤šå•†å“å¤šç¨ç‡ ç¨ç‡åº”è¯¥æ”¾åˆ°ä¸‹é¢å•†å“ä¿¡æ¯å¾ªç¯é‡Œ</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">typeof</span> o.InfoTaxRate != <span class="string">'undefined'</span> &amp;&amp; o.InfoTaxRate) &#123; </span><br><span class="line">                goldTax.card.InfoTaxRate = o.InfoTaxRate; <span class="comment">/* ç¨ç‡,(å·²æˆæƒçš„ç¨ç‡ï¼Œ 17% ä¼ 17) */</span></span><br><span class="line">                &#125;</span><br><span class="line">                goldTax.card.InfoNotes = o.InfoNotes; <span class="comment">/* å¤‡æ³¨ */</span></span><br><span class="line">                goldTax.card.InfoInvoicer = o.InfoInvoicer; <span class="comment">/* å¼€ç¥¨äºº */</span></span><br><span class="line">                <span class="comment">// å¤æ ¸äººï¼Œå¯ä¸ºç©º</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">typeof</span> o.InfoChecker != <span class="string">'undefined'</span> &amp;&amp; o.InfoChecker) &#123;</span><br><span class="line">                goldTax.card.InfoChecker = o.InfoChecker;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// æ”¶æ¬¾äººï¼Œå¯ä¸ºç©º</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">typeof</span> o.InfoCashier != <span class="string">'undefined'</span> &amp;&amp; o.InfoCashier) &#123;</span><br><span class="line">                goldTax.card.InfoCashier = o.InfoCashier;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// å¦‚ä¸ä¸ºç©ºï¼Œåˆ™å¼€å…·é”€è´§æ¸…å•ï¼Œæ­¤ä¸ºå‘ç¥¨ä¸Šå•†å“åç§°æ çš„æ¸…å•ä¿¡æ¯ï¼Œåº”ä¸ºâ€œ(è¯¦è§é”€è´§æ¸…å•)â€å­—æ ·</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">typeof</span> o.InfoListName != <span class="string">'undefined'</span> &amp;&amp; o.InfoListName) &#123; </span><br><span class="line">                goldTax.card.InfoListName = o.InfoListName;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// æ¸…ç©ºå•†å“æ˜ç»†åˆ—è¡¨</span></span><br><span class="line">                goldTax.card.ClearInvList(); </span><br><span class="line">                <span class="comment">// éå†è¡Œ</span></span><br><span class="line">                $.each(o.InvList, <span class="function"><span class="keyword">function</span>(<span class="params">i, v</span>) </span>&#123;</span><br><span class="line">                goldTax.card.InvListInit(); <span class="comment">/* åˆå§‹åŒ–å‘ç¥¨æ˜ç»†ä¿¡æ¯å„é¡¹å±æ€§ */</span></span><br><span class="line">                goldTax.card.ListGoodsName = v.ListGoodsName; <span class="comment">/* å•†å“æˆ–åŠ³åŠ¡åç§° */</span></span><br><span class="line">                goldTax.card.ListTaxItem = v.ListTaxItem; <span class="comment">/* ç¨ç›®ï¼Œ4ä½æ•°å­—ï¼Œå•†å“æ‰€å±ç±»åˆ« */</span></span><br><span class="line">                goldTax.card.ListStandard = v.ListStandard; <span class="comment">/* è§„æ ¼å‹å· */</span></span><br><span class="line">                <span class="comment">// è®¡é‡å•ä½ï¼Œå¦‚è®¡é‡å•ä½ä¸ºç©ºï¼Œåˆ™å¿½ç•¥æ•°é‡å’Œå•ä»·</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">typeof</span> v.ListUnit != <span class="string">'undefined'</span> &amp;&amp; v.ListUnit) &#123;</span><br><span class="line">                goldTax.card.ListUnit = v.ListUnit;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// å»ºè®®ä¼ å…¥æ•°é‡å’Œå«ç¨å•ä»·æˆ–å«ç¨é‡‘é¢ ç”±æ¥å£è®¡ç®—å¸¦å°æ•°çš„ç¨é¢ è§„é¿è¯¯å·®</span></span><br><span class="line">                goldTax.card.ListNumber = v.ListNumber; <span class="comment">// æ•°é‡</span></span><br><span class="line">                goldTax.card.ListPrice = v.ListPrice; <span class="comment">// å•ä»·</span></span><br><span class="line">                <span class="comment">// é‡‘é¢ï¼Œå¯ä»¥ä¸ä¼ (ä¸º0)ï¼Œç”±æ¥å£è½¯ä»¶è®¡ç®—ï¼Œå¦‚ä¼ å…¥åˆ™åº”ç¬¦åˆè®¡ç®—å…³ç³»</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">typeof</span> v.ListAmount != <span class="string">'undefined'</span> &amp;&amp; v.ListAmount ) &#123;</span><br><span class="line">                goldTax.card.ListAmount = v.ListAmount;</span><br><span class="line">                &#125;</span><br><span class="line">                goldTax.card.ListPriceKind = v.ListPriceKind; <span class="comment">/* å«ç¨ä»·æ ‡å¿—ï¼Œå•ä»·å’Œé‡‘é¢çš„ç§ç±»ï¼Œ 0ä¸ºä¸å«ç¨ä»·ï¼Œ1ä¸ºå«ç¨ä»· */</span></span><br><span class="line">                <span class="comment">// ç¨é¢å¯ä»¥ä¸ä¼ (ä¸º0)ï¼Œç”±æ¥å£è½¯ä»¶è®¡ç®—ï¼Œå¦‚ä¼ å…¥åˆ™åº”ç¬¦åˆè®¡ç®—å…³ç³»</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">typeof</span> v.ListTaxAmount != <span class="string">'undefined'</span> &amp;&amp; v.ListTaxAmount) &#123;</span><br><span class="line">                goldTax.card.ListTaxAmount = v.ListTaxAmount;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// æ·»åŠ ä¸€è¡Œ</span></span><br><span class="line">                goldTax.card.AddInvList();</span><br><span class="line">                &#125;);</span><br><span class="line">                <span class="comment">// è°ƒç”¨æ¥å£</span></span><br><span class="line">    goldTax.card.Invoice();</span><br><span class="line">    result.code = goldTax.card.RetCode;</span><br><span class="line">            result.msg = goldTax.card.RetMsg;</span><br><span class="line">    <span class="comment">// RetCode 4011 å¼€ç¥¨æˆåŠŸï¼Œå…¶ä»–å¤±è´¥</span></span><br><span class="line">    <span class="keyword">if</span> (result.code == <span class="number">4011</span>) &#123;</span><br><span class="line">    result.success = <span class="literal">true</span>;</span><br><span class="line">    result.data = &#123;</span><br><span class="line">    RetCode: goldTax.card.RetCode, <span class="comment">/* RetCode - çŠ¶æ€ç ï¼Œ 3011 è¯»å–æˆåŠŸï¼Œå…¶ä»–å¤±è´¥ */</span></span><br><span class="line">            RetMsg: goldTax.card.RetMsg, <span class="comment">/* RetMsg çŠ¶æ€ä¿¡æ¯ */</span></span><br><span class="line">            InfoAmount: goldTax.card.InfoAmount , <span class="comment">/* åˆè®¡ä¸å«ç¨é‡‘é¢ */</span></span><br><span class="line">            InfoTaxAmount: goldTax.card.InfoTaxAmount, <span class="comment">/* åˆè®¡ç¨é¢ */</span></span><br><span class="line">            InfoInvDate: goldTax.card.InfoInvDate, <span class="comment">/* å¼€ç¥¨æ—¥æœŸ */</span></span><br><span class="line">            InfMonth: goldTax.card.InfMonth, <span class="comment">/* æ‰€å±æœˆä»½ */</span></span><br><span class="line">            InfoTypeCode: goldTax.card.InfoTypeCode, <span class="comment">/* å‘ç¥¨åä½ä»£ç  */</span></span><br><span class="line">            InfoNumber: goldTax.card.InfoNumber, <span class="comment">/* å‘ç¥¨å·ç  */</span></span><br><span class="line">            GoodsListFlag: goldTax.card.GoodsListFlag <span class="comment">/* é”€è´§æ¸…å•æ ‡å¿—ï¼Œ0 â€“ æ— é”€è´§æ¸…å•ï¼Œ1 â€“ æœ‰é”€è´§æ¸…å• */</span></span><br><span class="line">    &#125;;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result.success = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result.success = <span class="literal">false</span>;</span><br><span class="line">            result.code = <span class="number">-1</span>;</span><br><span class="line">            result.msg = <span class="string">'Please Open Card First'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            result.success = <span class="literal">false</span>;</span><br><span class="line">            result.code = <span class="number">-1</span>;</span><br><span class="line">            result.msg = <span class="string">'ActiveX Error, '</span> + e.description;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ç›¸å…³èµ„æ–™"><a href="#ç›¸å…³èµ„æ–™" class="headerlink" title="ç›¸å…³èµ„æ–™"></a>ç›¸å…³èµ„æ–™</h3><p><code>CSDN</code> éœ€è¦ç§¯åˆ†ä¸‹è½½ <a href="https://download.csdn.net/download/qq_36894469/9891113" target="_blank" rel="noopener">é‡‘ç¨ é˜²ä¼ªç¨æ§ ç»„ä»¶æ¥å£ å¼€å‘æ–‡æ¡£ ä»£ç æ¡ˆä¾‹</a></p><p>æ²¡æœ‰ç§¯åˆ†çš„ <a href="https://pan.baidu.com/s/11djfBHQMfhxpsLi3BqOOSA" target="_blank" rel="noopener">æˆ³è¿™é‡Œ</a></p>]]></content>
    
    <summary type="html">
    
      æœ€è¿‘é¡¹ç›®è¦æ±‚ä¸å•æœºç‰ˆçš„é‡‘ç¨ç›˜æ¥å£è¿›è¡Œå¯¹æ¥ï¼Œåœ¨è¿™é‡Œç®€å•è®°å½•ä¸€ä¸‹è‡ªå·±çš„å¼€å‘ç»éªŒï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©åˆ°æœ‰éœ€è¦çš„äºº
    
    </summary>
    
      <category term="éšç¬”" scheme="http://yoursite.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="JavaScript" scheme="http://yoursite.com/tags/JavaScript/"/>
    
      <category term="ActiveX" scheme="http://yoursite.com/tags/ActiveX/"/>
    
      <category term="é‡‘ç¨" scheme="http://yoursite.com/tags/%E9%87%91%E7%A8%8E/"/>
    
  </entry>
  
</feed>
