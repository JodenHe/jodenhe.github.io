<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[linux æ“ä½œç³»ç»Ÿéƒ¨åˆ†å†…æ ¸å‚æ•°é…ç½®]]></title>
    <url>%2F2021%2F11%2F16%2Flinux%2Flinux-sysctl-config%2F</url>
    <content type="text"><![CDATA[ä¸€äº›å¯é…ç½®çš„å†…æ ¸é€‰é¡¹ å‚æ•°é¡¹ æè¿° fs.file-max å†…æ ¸åˆ†é…çš„æœ€å¤§æ–‡ä»¶å¥æŸ„æ•°ã€‚æé™å€¼å’Œå½“å‰å€¼å¯ä»¥é€šè¿‡ /proc/sys/file/nr æ¥æŸ¥çœ‹ã€‚ä¾‹å¦‚ï¼š[joden@localhost ~]$ cat /proc/sys/fs/file-nr1280 0 585816 net.ipv4.ip_local_port_range æœ¬åœ° IP ç«¯å£èŒƒå›´ï¼Œå®šä¹‰ä¸ºä¸€å¯¹å€¼ã€‚è¯¥èŒƒå›´å¿…é¡»ä¸ºå¹¶å‘è¿æ¥æä¾›è¶³å¤Ÿçš„æ¡ç›® net.ipv4.tcp_tw_reuse å½“å¯ç”¨æ—¶ï¼Œå…è®¸å†…æ ¸é‡ç”¨ TIME_WAIT çŠ¶æ€çš„å¥—æ¥å­—ã€‚å½“ç”¨åœ¨ NAT æ—¶ï¼Œæ­¤é€‰é¡¹æ˜¯å¾ˆå±é™©çš„ net.ipv4.tcp_fin_timeout é™ä½æ­¤å€¼åˆ° 5~10 å¯å‡å°‘è¿æ¥å…³é—­çš„æ—¶é—´ï¼Œä¹‹åä¼šåœç•™åœ¨ TIME_WAIT çŠ¶æ€ï¼Œå»ºè®®ç”¨åœ¨æœ‰å¤§é‡å¹¶å‘è¿æ¥çš„åœºæ™¯ net.core.somaxconn ç›‘å¬é˜Ÿåˆ—çš„å¤§å°ï¼ˆåŒä¸€æ—¶é—´å»ºç«‹è¿‡ç¨‹ä¸­æœ‰å¤šå°‘ä¸ªè¿æ¥ï¼‰ã€‚é»˜è®¤ä¸º128ï¼Œå¢å¤§åˆ° 4096 æˆ–æ›´é«˜ï¼Œå¯ä»¥æ”¯æŒå…¥ç«™è¿æ¥çš„çˆ†å‘ï¼Œå¦‚ clients é›†ä½“é‡è¿ net.ipv4.tcp_max_syn_backlog å°šæœªæ”¶åˆ°è¿æ¥å®¢æˆ·ç«¯ç¡®è®¤çš„è¿æ¥è¯·æ±‚çš„æœ€å¤§æ•°é‡ã€‚é»˜è®¤ä¸º128ï¼Œæœ€å¤§å€¼ä¸º65535ã€‚ä¼˜åŒ–ååé‡æ—¶ï¼Œ4096 å’Œ 8192 æ˜¯æ¨èçš„èµ·å§‹å€¼ net.ipv4.tcp_keepalive_* net.ipv4.tcp_keepalive_time, net.ipv4.tcp_keepalive_intvl å’Œ net.ipv4.tcp_keepalive_probes ç”¨äºé…ç½® TCP å­˜æ´»æ—¶é—´ net.ipv4.conf.default.rp_filter å¯ç”¨åå‘åœ°å€è¿‡æ»¤ã€‚å¦‚æœç³»ç»Ÿä¸å…³å¿ƒ IP åœ°å€æ¬ºéª—ï¼Œé‚£ä¹ˆå°±ç¦ç”¨å®ƒ]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AMQP 0-9-1 å¸¸ç”¨å‘½ä»¤]]></title>
    <url>%2F2021%2F11%2F11%2Fother%2Frabbit-mq-amqp%2F</url>
    <content type="text"><![CDATA[AMQP 0-9-1 ä¸­å¸¸ç”¨çš„å‘½ä»¤ä¸ RabbitMQ å®¢æˆ·ç«¯ä¸­æ–¹æ³•çš„æ˜ å°„å…³ç³» åç§° æ˜¯å¦åŒ…å«å†…å®¹ä½“ å¯¹åº”å®¢æˆ·ç«¯çš„æ–¹æ³• ç®€è¦æè¿° Connection.Start å¦ factory.newConnection å»ºç«‹è¿æ¥ç›¸å…³ Connection.Start-OK å¦ factory.newConnection å»ºç«‹è¿æ¥ç›¸å…³ Connection.Tune å¦ factory.newConnection å»ºç«‹è¿æ¥ç›¸å…³ Connection.Tune-OK å¦ factory.newConnection å»ºç«‹è¿æ¥ç›¸å…³ Connection.Open å¦ factory.newConnection å»ºç«‹è¿æ¥ç›¸å…³ Connection.Open-OK å¦ factory.newConnection å»ºç«‹è¿æ¥ç›¸å…³ Connection.Close å¦ connection.close å…³é—­è¿æ¥ Connection.Close-OK å¦ connection.close å…³é—­è¿æ¥ Channel.Open å¦ connection.openChannel å¼€å¯ä¿¡é“ Channel.Open-OK å¦ connection.openChannel å¼€å¯ä¿¡é“ Channel.Close å¦ channel.close å…³é—­ä¿¡é“ Channel.Close-OK å¦ channel.close å…³é—­ä¿¡é“ Exchange.Declare å¦ channel.exchangeDeclare å£°æ˜äº¤æ¢å™¨ Exchange.Declare-OK å¦ channel.exchangeDeclare å£°æ˜äº¤æ¢å™¨ Exchange.Delete å¦ channel.exchangeDelete åˆ é™¤äº¤æ¢å™¨ Exchange.Delete-OK å¦ channel.exchangeDelete åˆ é™¤äº¤æ¢å™¨ Exchange.Bind å¦ channel.exchangeBind äº¤æ¢å™¨ä¸äº¤æ¢å™¨ç»‘å®š Exchange.Bind-OK å¦ channel.exchangeBind äº¤æ¢å™¨ä¸äº¤æ¢å™¨ç»‘å®š Exchange.Unbind å¦ channel.exchangeUnbind äº¤æ¢å™¨ä¸äº¤æ¢å™¨è§£ç»‘ Exchange.Unbind-OK å¦ channel.exchangeUnbind äº¤æ¢å™¨ä¸äº¤æ¢å™¨è§£ç»‘ Queue.Declare å¦ channel.queueDeclare å£°æ˜é˜Ÿåˆ— Queue.Declare-OK å¦ channel.queueDeclare å£°æ˜é˜Ÿåˆ— Queue.Bind å¦ channel.queueBind é˜Ÿåˆ—ä¸äº¤æ¢å™¨ç»‘å®š Queue.Bind-OK å¦ channel.queueBind é˜Ÿåˆ—ä¸äº¤æ¢å™¨ç»‘å®š Queue.Purge å¦ channel.queuePurge æ¸…é™¤é˜Ÿåˆ—ä¸­çš„å†…å®¹ Queue.Purge-OK å¦ channel.queuePurge æ¸…é™¤é˜Ÿåˆ—ä¸­çš„å†…å®¹ Queue.Delete å¦ channel.queueDelete åˆ é™¤é˜Ÿåˆ— Queue.Delete-OK å¦ channel.queueDelete åˆ é™¤é˜Ÿåˆ— Queue.Unbind å¦ channel.queueUnbind é˜Ÿåˆ—ä¸äº¤æ¢å™¨è§£ç»‘ Queue.Unbind-OK å¦ channel.queueUnbind é˜Ÿåˆ—ä¸äº¤æ¢å™¨è§£ç»‘ Basic.Qos å¦ channel.basicQos è®¾ç½®æœªè¢«ç¡®è®¤æ¶ˆè´¹çš„ä¸ªæ•° Basic.Qos-OK å¦ channel.basicQos è®¾ç½®æœªè¢«ç¡®è®¤æ¶ˆè´¹çš„ä¸ªæ•° Basic.Consume å¦ channel.basicConsume æ¶ˆè´¹æ¶ˆæ¯ï¼ˆæ¨æ¨¡å¼ï¼‰ Basic.Consume-OK å¦ channel.basicConsume æ¶ˆè´¹æ¶ˆæ¯ï¼ˆæ¨æ¨¡å¼ï¼‰ Basic.Cancel å¦ channel.basicCancel å–æ¶ˆ Basic.Cancel-OK å¦ channel.basicCancel å–æ¶ˆ Basic.Publish æ˜¯ channel.basicPublish å‘é€æ¶ˆæ¯ Basic.Return æ˜¯ æ—  æœªèƒ½æˆåŠŸè·¯ç”±çš„æ¶ˆæ¯è¿”å› Basic.Deliver æ˜¯ æ—  Broker æ¨é€æ¶ˆæ¯è¿”å› Basic.Get å¦ channel.basicGet æ¶ˆè´¹æ¶ˆæ¯ï¼ˆæ‹‰æ¨¡å¼ï¼‰ Basic.Get-OK æ˜¯ channel.basicGet æ¶ˆè´¹æ¶ˆæ¯ï¼ˆæ‹‰æ¨¡å¼ï¼‰ Basic.Ack å¦ channel.basicAck ç¡®è®¤ Basic.Reject å¦ channel.basicReject æ‹’ç»ï¼ˆå•æ¡æ‹’ç»ï¼‰ Basic.Recover å¦ channel.basicRecover è¯·æ±‚Brokeré‡æ–°å‘é€æœªè¢«ç¡®è®¤çš„æ¶ˆæ¯ Basic.Recover-OK å¦ channel.basicRecover è¯·æ±‚Brokeré‡æ–°å‘é€æœªè¢«ç¡®è®¤çš„æ¶ˆæ¯ Basic.Nack å¦ channel.basicNack æ‹’ç»ï¼ˆå¯æ‰¹é‡æ‹’ç»ï¼‰ Tx.Select å¦ channel.txSelect å¼€å¯äº‹åŠ¡ Tx.Select-OK å¦ channel.txSelect å¼€å¯äº‹åŠ¡ Tx.Commit å¦ channel.txCommit äº‹åŠ¡æäº¤ Tx.Commit-OK å¦ channel.txCommit äº‹åŠ¡æäº¤ Tx.Rollback å¦ channel.txRollback äº‹åŠ¡å›æ»š Tx.Rollback-OK å¦ channel.txRollback äº‹åŠ¡å›æ»š Confirm.Select å¦ channel.confirmSelect å¼€å¯å‘é€ç«¯ç¡®è®¤æ¨¡å¼ Confirm.Select-OK å¦ channel.confirmSelect å¼€å¯å‘é€ç«¯ç¡®è®¤æ¨¡å¼]]></content>
      <categories>
        <category>RabbitMQ</category>
      </categories>
      <tags>
        <tag>RabbitMQ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Rabbit MQ å®‰è£…]]></title>
    <url>%2F2021%2F10%2F09%2Fother%2Frabbit-mq-install%2F</url>
    <content type="text"><![CDATA[å‰è¨€Rabbit MQ æ˜¯ç”± Erlang è¯­è¨€ç¼–å†™çš„ï¼Œä¹Ÿæ­£å› å¦‚æ­¤ï¼Œåœ¨å®‰è£… Rabbit MQ ä¹‹å‰éœ€è¦å®‰è£… Erlang ã€‚å»ºè®®é‡‡ç”¨è¾ƒæ–°ç‰ˆçš„ Erlangï¼Œè¿™æ ·å¯ä»¥è·å¾—è¾ƒå¤šæ›´æ–°å’Œæ”¹è¿›ï¼Œå¯ä»¥åˆ°å®˜ç½‘ (https://www.erlang.org/downloads) ä¸‹è½½ å®‰è£… Erlangå®‰è£…å‰ç½®ä¾èµ– åœ¨å®‰è£… erlang ä¹‹å‰å…ˆå®‰è£…ä¸‹ä¾èµ–æ–‡ä»¶(è¿™ä¸€æ­¥ä¸è¦å¿˜æ‰äº†ï¼Œ ä¸ç„¶åé¢./configureçš„æ—¶å€™è¦æŠ¥é”™) 1[joden@localhost workspace]$ sudo yum install gcc glibc-devel make ncurses-devel openssl-devel xmlto ä¸‹è½½æºç åŒ…è¿›å…¥ Erlang ä¸‹è½½ç½‘å€ï¼Œä¸‹è½½æºç åŒ… è§£å‹å®‰è£…åŒ…ï¼Œå¹¶é…ç½®å®‰è£…ç›®å½•è¿™é‡Œæˆ‘ä»¬å®‰è£…åˆ° /opt/erlang ç›®å½•ä¸‹: 1234[joden@localhost workspace]$ tar -zxvf otp_src_24.1.tar.gz[joden@localhost workspace]$ cd otp_src_24.1[joden@localhost otp_src_24.1]$ ./configure --prefix=/opt/erlang[joden@localhost otp_src_24.1]$ ç¼–è¯‘åŠå®‰è£…12[joden@localhost otp_src_24.1]$ make[joden@localhost otp_src_24.1]$ sudo make install å¦‚æœåœ¨å®‰è£…çš„è¿‡ç¨‹ä¸­å‡ºç°ç±»ä¼¼â€No xxx foundâ€ çš„æç¤ºï¼Œå¯æ ¹æ®æç¤ºä¿¡æ¯å®‰è£…ç›¸åº”çš„åŒ…ï¼Œç„¶åé‡æ–°æ‰§è¡Œï¼Œç›´åˆ°æç¤ºå®‰è£…å®Œæ¯•ä¸ºæ­¢ã€‚ é…ç½®ç¯å¢ƒå˜é‡ä¿®æ”¹ /etc/profile é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ ä¸‹é¢çš„ç¯å¢ƒå˜é‡: 12export ERLANG_HOME=/opt/erlangexport PATH=$PATH:$ERLANG_HOME/bin æœ€åæ‰§è¡Œ source /etc/profile å‘½ä»¤è®©é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ: 12[joden@localhost otp_src_24.1]$ sudo vim /etc/profile[joden@localhost otp_src_24.1]$ source /etc/profile å¯ä»¥è¾“å…¥ erl å‘½ä»¤æ¥éªŒè¯ Erlang æ˜¯å¦å®‰è£…æˆåŠŸï¼Œå¦‚æœå‡ºç°ç±»ä¼¼ä»¥ä¸‹çš„æç¤ºå³è¡¨ç¤ºå®‰è£…æˆåŠŸ: 12345[joden@localhost otp_src_24.1]$ erlErlang/OTP 24 [erts-12.1] [source] [64-bit] [smp:3:3] [ds:3:3:10] [async-threads:1]Eshell V12.1 (abort with ^G)1&gt; å®‰è£… Rabbit MQRabbit MQ çš„å®‰è£…ç›´æ¥å°†ä¸‹è½½çš„å®‰è£…åŒ…è§£å‹åˆ°ç›¸åº”çš„ç›®å½•ä¸‹å³å¯ï¼Œå®˜ç½‘ä¸‹è½½åœ°å€: https://www.rabbitmq.com/install-generic-unix.html è¿™é‡Œé€‰æ‹©å°† Rabbit MQ å®‰è£…åˆ°ä¸ Erlang åŒä¸€ä¸ªç›®å½• (/opt) ä¸‹é¢: 1234[joden@localhost workspace]$ tar -xvf rabbitmq-server-generic-unix-3.9.7.tar.xz[joden@localhost workspace]$ sudo mv rabbitmq_server-3.9.7/ /opt/[joden@localhost workspace]$ cd /opt/[joden@localhost opt]$ sudo mv rabbitmq_server-3.9.7/ rabbitmq åŒæ ·ä¿®æ”¹/etc/profile æ–‡ä»¶ï¼Œ æ·»åŠ ä¸‹é¢çš„ç¯å¢ƒå˜é‡: 12export RABBITMQ_HOME=/opt/rabbitmqexport PATH=$PATH:$RABBITMQ_HOME/sbin æ‰§è¡Œ source /etc/profile å‘½ä»¤è®©é…ç½®æ–‡ä»¶ç”Ÿæ•ˆã€‚ éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ 12[joden@localhost opt]$ rabbitmqctl version3.9.7]]></content>
      <categories>
        <category>RabbitMQ</category>
      </categories>
      <tags>
        <tag>RabbitMQ</tag>
        <tag>software</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[k8s çš„ liveness ä¸ readiness]]></title>
    <url>%2F2021%2F06%2F06%2Fk8s%2Fk8s-readiness-liveness%2F</url>
    <content type="text"><![CDATA[è¯´æ˜liveness å’Œ readiness æ˜¯ k8s ç”¨äºå¥åº·æ¢æµ‹çš„æ¢é’ˆã€‚ ä»–ä»¬æ”¯æŒçš„æ¢æµ‹æ–¹å¼ç›¸åŒï¼Œä¸»è¦åŒ…æ‹¬ï¼š http æ¢æµ‹ æ‰§è¡Œå‘½ä»¤æ¢æµ‹ tcp æ¢æµ‹ åŒºåˆ« liveness ä¸»è¦ç”¨æ¥ç¡®å®šä½•æ—¶é‡å¯å®¹å™¨ readiness ä¸»è¦ç”¨æ¥ç¡®å®šå®¹å™¨æ˜¯å¦å·²ç»å°±ç»ªã€‚ åˆå§‹å€¼ä¸åŒã€‚ liveness çš„åˆå§‹å€¼ä¸ºæˆåŠŸã€‚è¿™æ ·é˜²æ­¢åœ¨åº”ç”¨è¿˜æ²¡æœ‰æˆåŠŸå¯åŠ¨å‰ï¼Œå°±è¢«è¯¯æ€ã€‚å¦‚æœåœ¨è§„å®šæ—¶é—´å†…è¿˜æœªæˆåŠŸå¯åŠ¨ï¼Œæ‰å°†å…¶è®¾ç½®ä¸ºå¤±è´¥ï¼Œä»è€Œè§¦å‘å®¹å™¨é‡å»ºã€‚ readiness çš„åˆå§‹å€¼ä¸ºå¤±è´¥ã€‚è¿™æ ·é˜²æ­¢åº”ç”¨è¿˜æ²¡æœ‰æˆåŠŸå¯åŠ¨å‰å°±å‘åº”ç”¨è¿›è¡Œæµé‡çš„å¯¼å…¥ã€‚å¦‚æœåœ¨è§„å®šæ—¶é—´å†…å¯åŠ¨æˆåŠŸï¼Œæ‰å°†å…¶è®¾ç½®ä¸ºæˆåŠŸï¼Œä»è€Œå°†æµé‡å‘åº”ç”¨å¯¼å…¥ã€‚ liveness ä¸ readiness äºŒè€…ä½œç”¨ä¸èƒ½ç›¸äº’æ›¿ä»£ã€‚ åªé…ç½®äº† livenessï¼Œé‚£ä¹ˆåœ¨å®¹å™¨å¯åŠ¨ï¼Œåº”ç”¨è¿˜æ²¡æœ‰æˆåŠŸå°±ç»ªä¹‹å‰ï¼Œè¿™ä¸ªæ—¶å€™ pod æ˜¯ ready çš„ï¼ˆå› ä¸ºå®¹å™¨æˆåŠŸå¯åŠ¨äº†ï¼‰ã€‚é‚£ä¹ˆæµé‡å°±ä¼šè¢«å¼•å…¥åˆ°å®¹å™¨çš„åº”ç”¨ä¸­ï¼Œå¯èƒ½ä¼šå¯¼è‡´è¯·æ±‚å¤±è´¥ã€‚è™½ç„¶åœ¨ liveness æ£€æŸ¥å¤±è´¥åï¼Œé‡å¯å®¹å™¨ï¼Œæ­¤æ—¶ pod çš„ ready çš„ condition ä¼šå˜ä¸º falseã€‚ä½†æ˜¯å‰é¢ä¼šæœ‰ä¸€äº›æµé‡å› ä¸ºé”™è¯¯çŠ¶æ€å¯¼å…¥ã€‚ åªé…ç½®äº† readiness æ˜¯æ— æ³•è§¦å‘å®¹å™¨é‡å¯çš„ã€‚ å‚è€ƒè¯¦è§£k8sä¸­çš„livenesså’Œreadinessçš„åŸç†å’ŒåŒºåˆ«]]></content>
      <categories>
        <category>k8s</category>
      </categories>
      <tags>
        <tag>k8s</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[centos7 æ­å»º k8s é›†ç¾¤]]></title>
    <url>%2F2021%2F02%2F27%2Fk8s%2Fk8s-cluster%2F</url>
    <content type="text"><![CDATA[è¯´æ˜åˆ›å»ºä¸‰ä¸ª centos èŠ‚ç‚¹ï¼š 123192.168.56.101 k8s-master192.168.56.102 k8s-nnode1192.168.56.103 k8s-nnode2 è™šæ‹Ÿæœºå®‰è£…æ•™ç¨‹å‚è€ƒï¼švirtualbox ä¸‹ centos7 ç½‘ç»œé…ç½® å…¶ä¸­ master èŠ‚ç‚¹éœ€è¦è‡³å°‘ 2 æ ¸ 2G é…ç½® æ‰€æœ‰èŠ‚ç‚¹ ä»¥ä¸‹æ“ä½œéœ€è¦åœ¨æ‰€æœ‰èŠ‚ç‚¹è¿è¡Œï¼Œè¿™é‡Œä»¥ master èŠ‚ç‚¹ä¸ºä¾‹ ä¿®æ”¹ä¸»æœºå ç›¸åº”èŠ‚ç‚¹å«ç›¸åº”çš„åå­—ï¼Œè¿™é‡Œä»¥ master èŠ‚ç‚¹ä¸ºä¾‹ 1hostnamectl set-hostname k8s-master ä¿®æ”¹åé‡å¯æœåŠ¡å™¨åç”Ÿæ•ˆ å…³é—­é˜²ç«å¢™1systemctl stop firewalld.service å…³é—­é˜²ç«å¢™è‡ªå¯åŠ¨1systemctl disable firewalld.service å…³é—­ selinux1setenforce 0 å…³é—­ swap1swapoff -a vim /etc/fstab ï¼Œæ³¨é‡Šæ‰swapæŒ‚è½½è¿™ä¸€è¡Œå¯ä»¥æ°¸ä¹…å…³é—­swapåˆ†åŒº æ·»åŠ ä¸»æœºåä¸ IP å¯¹åº”çš„å…³ç³»vim /etc/hosts æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š 123192.168.56.101 k8s-master192.168.56.102 k8s-node1192.168.56.103 k8s-node2 å°†æ¡¥æ¥çš„ IPV4 æµé‡ä¼ é€’åˆ° iptables çš„é“¾1234cat &gt; /etc/sysctl.d/k8s.conf &lt;&lt; EOFnet.bridge.bridge-nf-call-ip6tables = 1net.bridge.bridge-nf-call-iptables = 1EOF æ‰§è¡Œå®Œå†è¿è¡Œ 1sysctl --system å®‰è£… docker å¸è½½æ—§çš„ docker 12345678sudo yum remove docker \docker-client \docker-client-latest \docker-common \docker-latest \docker-latest-logrotate \docker-logrotate \docker-engine å®‰è£…ç»„ä»¶ 123sudo yum install -y yum-utils \device-mapper-persistent-data \lvm2 æ·»åŠ  docker å®‰è£…æº 123sudo yum-config-manager \--add-repo \https://download.docker.com/linux/centos/docker-ce.repo å®‰è£… docker 1sudo yum install docker-ce docker-ce-cli containerd.io å®‰è£…æˆåŠŸåï¼ŒæŸ¥çœ‹ docker ç‰ˆæœ¬ 1docker --version ä¿®æ”¹ Cgroupfs ä¸º Systemd (docker æ–‡ä»¶é©±åŠ¨é»˜è®¤ç”± cgroupfs æ”¹æˆ systemdï¼Œä¸k8sä¿æŒä¸€è‡´é¿å… conflict) 12mkdir -p /etc/dockervim /etc/docker/daemon.json å†…å®¹ï¼š 123&#123; "exec-opts": ["native.cgroupdriver=systemd"]&#125; è®¾ç½®å¼€æœºå¯åŠ¨ 12systemctl enable dockersystemctl start docker æŸ¥çœ‹æ–‡ä»¶é©±åŠ¨ 1docker info | grep Driver Kubernetes yumæºé…ç½®vim /etc/yum.repos.d/kubernetes.repoï¼Œæ·»åŠ æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š 12345[kubernetes]name=Kubernetes Repobaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/gpgcheck=0enabled=1 å®‰è£… k8s1yum install -y docker-ce kubelet kubeadm kubectl è®¾ç½® k8s å¼€æœºå¯åŠ¨ 1systemctl enable kubelet å¯åŠ¨ k8s åå° daemon 1systemctl start kubelet master èŠ‚ç‚¹è¿è¡Œ ä»¥ä¸‹æ“ä½œåªåœ¨ master èŠ‚ç‚¹è¿è¡Œï¼Œå¦‚æœæ“ä½œå¤±è´¥ï¼Œå¯ä»¥é€šè¿‡å…ˆæ‰§è¡Œ rm -rf $HOME/.kube å’Œ kubeadm reset å‘½ä»¤æ¥æ¸…ç†ç¯å¢ƒé‡æ–°å®‰è£… éƒ¨ç½² Kubernetes Master1234kubeadm init --kubernetes-version=1.20.4 \ --apiserver-advertise-address=192.168.56.101 \ --image-repository registry.aliyuncs.com/google_containers \ --service-cidr=192.168.56.0/16 --pod-network-cidr=10.122.0.0/16 apiserver-advertise-address çš„åœ°å€ä¸ºå½“å‰èŠ‚ç‚¹çš„ ip åœ°å€ service-cidr è®¾ç½®æˆå½“å‰èŠ‚ç‚¹çš„ç½‘æ®µå³å¯ è®°å½•ç”Ÿæˆçš„æœ€åéƒ¨åˆ†å†…å®¹ï¼Œæ­¤å†…å®¹éœ€è¦åœ¨å…¶å®ƒèŠ‚ç‚¹åŠ å…¥ Kubernetes é›†ç¾¤ä¹‹å‰å°±æ‰§è¡Œã€‚æ ¹æ® init åçš„æç¤ºï¼Œåˆ›å»ºkubectl é…ç½®æ–‡ä»¶ 1234mkdir -p $HOME/.kubesudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/configsudo chown $(id -u):$(id -g) $HOME/.kube/configexport KUBECONFIG=$HOME/.kube/config æŸ¥çœ‹ docker é•œåƒï¼š 1sudo docker images ä¸‹é¢å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ kubectl å‘½ä»¤äº† 1kubectl get node å®‰è£… calico ç½‘ç»œ1kubectl apply -f https://docs.projectcalico.org/manifests/calico.yaml æŸ¥çœ‹ calico ç½‘ç»œæ˜¯å¦åˆ›å»ºæˆåŠŸï¼š 1kubectl get pods -n kube-system å†æ¬¡æŸ¥çœ‹ nodeï¼Œå¯ä»¥çœ‹åˆ° master èŠ‚ç‚¹çŠ¶æ€ä¸º ready è‡³æ­¤ï¼Œk8s masterèŠ‚ç‚¹åˆ›å»ºå®Œæ¯• node èŠ‚ç‚¹è¿è¡Œ Node èŠ‚ç‚¹æ‰éœ€è¦è¿›è¡Œçš„æ“ä½œ node èŠ‚ç‚¹åŠ å…¥é›†ç¾¤å‘é›†ç¾¤æ·»åŠ æ–°èŠ‚ç‚¹ï¼Œæ‰§è¡Œåœ¨ kubeadm init è¾“å‡ºçš„ kubeadm join å‘½ä»¤ï¼šå¤åˆ¶ä¸Šé¢å‘½ä»¤ï¼Œåœ¨ node èŠ‚ç‚¹ä¸Šæ‰§è¡Œåœ¨k8s-node1, k8s-node2 æ‰§è¡Œï¼š token å’Œå¯†é’¥åœ¨ä¸»èŠ‚ç‚¹ init ä¼šç”Ÿæˆ å¦‚æœå¿˜è®°è®°å½• token å’Œå¯†é’¥ï¼Œæˆ–è€… token è¿‡æœŸäº†ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è·å–ï¼ˆåœ¨ master èŠ‚ç‚¹è¿è¡Œï¼‰ å…ˆè·å– token 1234#å¦‚æœè¿‡æœŸå¯å…ˆæ‰§è¡Œæ­¤å‘½ä»¤kubeadm token create #é‡æ–°ç”Ÿæˆtoken#åˆ—å‡ºtokenkubeadm token list | awk -F" " '&#123;print $1&#125;' |tail -n 1 è·å– CA å…¬é’¥çš„å“ˆå¸Œå€¼ 1openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der 2&gt;/dev/null | openssl dgst -sha256 -hex | sed 's/^ .* //' ä»èŠ‚ç‚¹åŠ å…¥é›†ç¾¤ ï¼ˆk8s-node1 å’Œ k8s-node2 æ‰§è¡Œï¼‰ 1kubeadm join 192.168.56.101:6443 --token tokenå¡«è¿™é‡Œ --discovery-token-ca-cert-hash sha256:å“ˆå¸Œå€¼å¡«è¿™é‡Œ 192.168.56.101:6443 â€”&gt; k8s-master èŠ‚ç‚¹çš„ ip å’Œç«¯å£ æœ€ç»ˆè¿è¡Œå‘½ä»¤ 1kubeadm join 192.168.56.101:6443 --token ljd4iy.mk633re8cfq42ybu --discovery-token-ca-cert-hash sha256:344376e98d61c6fb52d35ab369e13dcc49c4222972d4b5f821aea4f589fe593f åœ¨ k8s-master æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹æ•°ï¼š 1kubectl get nodes æµ‹è¯• k8s åˆ›å»º nginx å®ä¾‹ï¼Œå¹¶æš´éœ²ç«¯å£ï¼š 123kubectl create deployment nginx --image=nginxkubectl expose deployment nginx --port=80 --type=NodePortkubectl get pod,svc éªŒè¯ åœ¨ web æµè§ˆå™¨è¾“å…¥ä»¥ä¸‹åœ°å€ï¼Œä¼šè¿”å› nginx æ¬¢è¿ç•Œé¢ http://192.168.56.101:32409/ (è¯¥ç«¯å£ä¸ºä¸Šå›¾æ‰€æ˜¾ç¤º) åœ¨ linux èŠ‚ç‚¹ç”¨ curl è®¿é—®ï¼Œä¼šè¿”å› nginx html æ¬¢è¿é¡µé¢çš„å†…å®¹ node èŠ‚ç‚¹é…ç½® kubectl é…ç½®å¦‚æœæƒ³ node èŠ‚ç‚¹ä¹Ÿå¯ä»¥ä½¿ç”¨ kubectl éœ€è¦è¿›è¡Œ master èŠ‚ç‚¹å¤åˆ¶ config æ–‡ä»¶åˆ° node èŠ‚ç‚¹ åœ¨ k8s-node1 å’Œ k8s-node2 èŠ‚ç‚¹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ 1234sudo scp root@192.168.56.101:/etc/kubernetes/admin.conf /etc/kubernetes/admin.confmkdir -p $HOME/.kubesudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/configsudo chown $(id -u):$(id -g) $HOME/.kube/config å‚è€ƒå¦‚ä½•ä»é›¶å¼€å§‹æ­å»ºä¸€ä¸ªå®Œæ•´çš„K8Sé›†ç¾¤â€”â€”-åŸºäºCentOS 8ç³»ç»Ÿ kubeadmç”Ÿæˆçš„tokené‡æ–°è·å– CentOS7 éƒ¨ç½²K8Sé›†ç¾¤æˆåŠŸåï¼Œé‡å¯å°±ä¸èƒ½ç”¨äº†ï¼Ÿï¼Ÿï¼Ÿk8sç¯å¢ƒè‡ªå¯åŠ¨]]></content>
      <categories>
        <category>k8s</category>
      </categories>
      <tags>
        <tag>k8s</tag>
        <tag>cluster</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[virtualbox ä¸‹ centos7 ç½‘ç»œé…ç½®]]></title>
    <url>%2F2021%2F02%2F27%2Fvirtualbox%2Fcentos7%2Fcentos7-network%2F</url>
    <content type="text"><![CDATA[å®‰è£… centos7 è™šæ‹Ÿæœº é€‰ä¸­å·¥å…·â€“ç‚¹å‡»æ–°å»ºâ€“å¡«å†™è™šæ‹Ÿæœºåç§°â€“ç±»å‹é€‰æ‹©Linuxâ€“ç‰ˆæœ¬é€‰Red Hat (64-bit)â€“ä¸‹ä¸€æ­¥ è®¾ç½®å†…å­˜å¤§å°ï¼ˆå¯ä»¥æŒ‰é»˜è®¤æ¥ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©åˆé€‚çš„å†…å­˜å¤§å°ï¼Œé»˜è®¤ä¸º1Gï¼‰ï¼Œä¸‹ä¸€æ­¥ åˆ›å»ºè™šæ‹Ÿç¡¬ç›˜ï¼Œåˆ›å»º é€‰æ‹©è™šæ‹Ÿç¡¬ç›˜æ–‡ä»¶ç±»å‹ï¼Œå†ç‚¹å‡»ä¸‹ä¸€æ­¥ è¿™é‡Œé€‰æ‹©ç¡¬ç›˜å®¹é‡åŠ¨æ€åˆ†é…ï¼Œä¸‹ä¸€æ­¥ é€‰æ‹©åˆé€‚çš„æ–‡ä»¶å­˜å‚¨ä½ç½®å’Œå¤§å°ï¼Œç‚¹å‡»åˆ›å»º è®¾ç½®è™šæ‹Ÿæœº é€‰ä¸­åˆšåˆšåˆ›å»ºçš„è™šæ‹Ÿæœºï¼Œç‚¹å‡»è®¾ç½® è®¾ç½®å®‰è£…é•œåƒï¼ˆå»å®˜ç½‘ä¸‹è½½centos7çš„å®‰è£…é•œåƒå³å¯ï¼Œè¿™é‡Œä¸è¿›è¡Œèµ˜è¿°ï¼‰ å¯ä»¥åœ¨é˜¿é‡Œç«™ç‚¹ä¸‹è½½ï¼Œé€Ÿåº¦è¾ƒå¿« http://mirrors.aliyun.com/centos/7/isos/x86_64/ é€‰æ‹©CentOS-7-x86_64-Minimal-2009.isoå³å¯ï¼Œæˆ–è€…å…¶ä»–çš„ é…ç½®ç½‘ç»œé©±åŠ¨ï¼ˆæœ¬æ–‡å…³é”®ï¼‰ ç½‘å¡1é€‰æ‹©é»˜è®¤ NAT è¿æ¥æ–¹å¼ï¼Œå¹¶è®°ä¸‹ MAC åœ°å€ï¼ˆåç»­ä¼šç”¨åˆ°ï¼‰ ç½‘å¡2å¯ç”¨ç½‘ç»œè¿æ¥â€“é€‰æ‹© â€œä»…ä¸»æœº(Host-Only)ç½‘ç»œâ€ è¿æ¥æ–¹å¼ï¼Œè®°ä¸‹ MAC åœ°å€ï¼ˆåç»­ä¼šç”¨åˆ°ï¼‰ ç‚¹å‡» ok è¿›è¡Œè™šæ‹Ÿæœºå¯åŠ¨å®‰è£…å³å¯ï¼Œå®‰è£…è¿‡ç¨‹å’Œæ™®é€šçš„ç³»ç»Ÿå®‰è£…ä¸€æ ·ï¼ŒæŒ‰ç€æç¤ºä¸€æ­¥æ­¥æ¥å°±è¡Œ å¯åŠ¨è¿›æ¥ä¼šæç¤ºä½ é€‰æ‹©å¯åŠ¨ç›˜ï¼Œé€‰æ‹©åˆšåˆšé…ç½®çš„å®‰è£…é•œåƒå³å¯ å…¶ä½™æ­¥éª¤ä¸å†å±•å¼€ è®¾ç½®è”ç½‘ï¼ˆæœ¬æ–‡å…³é”®ï¼‰ å‚è€ƒï¼šhttps://www.jianshu.com/p/044fc0b85521 å…³é”®æ“ä½œï¼š è¿›å…¥cd /etc/sysconfig/network-scripts/ç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°ç›®å‰åªæœ‰ifcfg-enp0s3å’Œifcfg-enp0s8é…ç½®æ–‡ä»¶ï¼ˆå¦‚æœå®‰è£…centos7æ²¡æœ‰é€‰æ‹©ä¸¤ä¸ªç½‘å¡çš„è¯ï¼Œåº”è¯¥åªæœ‰ifcfg-enp0s3 ä¸€ä¸ªé…ç½®æ–‡ä»¶,å¦‚æœåªæœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œåˆ™å¦å¤–ä¸€ä¸ªå°±ç”¨è¿™ä¸ªcopyè¿‡æ¥æ”¹ï¼Œéœ€è¦æ›´æ”¹UUIDçš„å€¼ï¼‰ ç¼–è¾‘ ifcfg-enp0s3 è®¾ç½®ç½‘å¡1ï¼Œè®¾ç½®åŠ¨æ€ ip è¿›è¡Œè”ç½‘ï¼Œä½¿å¾—èƒ½æœåŠ¡å™¨è®¿é—®å¤–ç½‘ 1# vi ifcfg-enp0s3 é¦–è¡Œæ·»åŠ ç½‘å¡1çš„ MAC åœ°å€ ç¼–è¾‘ ifcfg-enp0s8 è®¾ç½®ç½‘å¡2ï¼Œå›ºå®š ipï¼Œåç»­ ssh é€šè¿‡æ­¤ ip è¿æ¥ 1# vi ifcfg-enp0s8 é¦–è¡Œæ·»åŠ ç½‘å¡2çš„ MAC åœ°å€ï¼Œè®¾ç½®é™æ€ip é‡å¯ç½‘ç»œ 1# service network restart æµ‹è¯•éªŒè¯ 1# ping baidu.com è¿™æ—¶å€™è¦æ˜¯å¯ä»¥ä¸Šç½‘ï¼Œé‚£è®¾ç½®okï¼Œå¦‚ä½•è¿˜æ˜¯ä¸è¡Œå°±ç»§ç»­ä¸‹ä¸€æ­¥æ“ä½œ å…ˆæŠŠè™šæ‹Ÿæœºå…³é—­ï¼Œé‡æ–°è®¾ç½®ç½‘å¡1çš„è¿æ¥æ–¹å¼ ç®¡ç†â€“å…¨å±€è®¾å®š ç½‘ç»œâ€“æ·»åŠ  NAT ç½‘ç»œâ€“OK é€‰ä¸­è™šæ‹Ÿæœºï¼Œç‚¹å‡»è®¾ç½®ï¼Œè¿›è¡Œç½‘å¡1è¿æ¥æ–¹å¼é…ç½® é€‰æ‹© NAT ç½‘ç»œ å¹¶é€‰æ‹© åˆšåˆšåˆ›å»ºçš„ NAT ç½‘ç»œ NatNetwork ç‚¹å‡» OK é‡æ–°å¯åŠ¨è™šæ‹Ÿæœºå†è¿›è¡ŒéªŒè¯å³å¯ å‡å¦‚è¿˜æ˜¯æ— æ³• ping é€š baidu.comï¼Œå°è¯• ping ç™¾åº¦çš„ ip ï¼ˆå¯ä»¥é€šè¿‡ä¸€ä¸ªå¯ä»¥ä¸Šç½‘çš„ç”µè„‘ ping åŸŸåè·å– ipï¼‰ ip èƒ½é€šä½†æ˜¯åŸŸåæ— æ³•è§£æï¼Œéœ€è¦é‡æ–°ç¼–è¾‘ ifcfg-enp0s3 åœ¨æœ«å°¾æ·»åŠ  DNSæœåŠ¡å™¨ 12DNS1=8.8.8.8DNS2=114.114.114.114 å†è¿›è¡Œæµ‹è¯•]]></content>
      <categories>
        <category>virtualbox</category>
        <category>centos7</category>
      </categories>
      <tags>
        <tag>virtualbox</tag>
        <tag>centos7</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQL äº‹åŠ¡éš”ç¦»çº§åˆ«]]></title>
    <url>%2F2020%2F11%2F05%2Fdatabase%2Fmysql%2Ftransaction-isolation%2F</url>
    <content type="text"><![CDATA[äº‹åŠ¡åŸºæœ¬è¦ç´  äº‹åŠ¡å¹¶å‘å‡ ç§é—®é¢˜ è„è¯» è„è¯»æ˜¯æŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡å¤„ç†è¿‡ç¨‹é‡Œè¯»å–äº†å¦ä¸€ä¸ªæœªæäº¤çš„äº‹åŠ¡ä¸­çš„æ•°æ®ã€‚ å½“ä¸€ä¸ªäº‹åŠ¡æ­£åœ¨å¤šæ¬¡ä¿®æ”¹æŸä¸ªæ•°æ®ï¼Œè€Œåœ¨è¿™ä¸ªäº‹åŠ¡ä¸­è¿™å¤šæ¬¡çš„ä¿®æ”¹éƒ½è¿˜æœªæäº¤ï¼Œè¿™æ—¶ä¸€ä¸ªå¹¶å‘çš„äº‹åŠ¡æ¥è®¿é—®è¯¥æ•°æ®ï¼Œå°±ä¼šé€ æˆä¸¤ä¸ªäº‹åŠ¡å¾—åˆ°çš„æ•°æ®ä¸ä¸€è‡´ã€‚ä¾‹å¦‚ï¼šç”¨æˆ·Aå‘ç”¨æˆ·Bè½¬è´¦100å…ƒï¼Œå¯¹åº”SQLå‘½ä»¤å¦‚ä¸‹ 12update account set money=money + 100 where name='B'; (æ­¤æ—¶Aé€šçŸ¥B)update account set money=money - 100 where name='A'; å½“åªæ‰§è¡Œç¬¬ä¸€æ¡ SQL æ—¶ï¼ŒAé€šçŸ¥BæŸ¥çœ‹è´¦æˆ·ï¼ŒBå‘ç°ç¡®å®é’±å·²åˆ°è´¦ï¼ˆæ­¤æ—¶å³å‘ç”Ÿäº†è„è¯»ï¼‰ï¼Œè€Œä¹‹åæ— è®ºç¬¬äºŒæ¡SQLæ˜¯å¦æ‰§è¡Œï¼Œåªè¦è¯¥äº‹åŠ¡ä¸æäº¤ï¼Œåˆ™æ‰€æœ‰æ“ä½œéƒ½å°†å›æ»šï¼Œé‚£ä¹ˆå½“Bä»¥åå†æ¬¡æŸ¥çœ‹è´¦æˆ·æ—¶å°±ä¼šå‘ç°é’±å…¶å®å¹¶æ²¡æœ‰è½¬ã€‚ ä¸å¯é‡å¤è¯» ä¸å¯é‡å¤è¯»æ˜¯æŒ‡åœ¨å¯¹äºæ•°æ®åº“ä¸­çš„æŸä¸ªæ•°æ®ï¼Œä¸€ä¸ªäº‹åŠ¡èŒƒå›´å†…å¤šæ¬¡æŸ¥è¯¢å´è¿”å›äº†ä¸åŒçš„æ•°æ®å€¼ï¼Œè¿™æ˜¯ç”±äºåœ¨æŸ¥è¯¢é—´éš”ï¼Œè¢«å¦ä¸€ä¸ªäº‹åŠ¡ä¿®æ”¹å¹¶æäº¤äº†ã€‚ ä¾‹å¦‚äº‹åŠ¡T1åœ¨è¯»å–æŸä¸€æ•°æ®ï¼Œè€Œäº‹åŠ¡T2ç«‹é©¬ä¿®æ”¹äº†è¿™ä¸ªæ•°æ®å¹¶ä¸”æäº¤äº‹åŠ¡ç»™æ•°æ®åº“ï¼Œäº‹åŠ¡T1å†æ¬¡è¯»å–è¯¥æ•°æ®å°±å¾—åˆ°äº†ä¸åŒçš„ç»“æœï¼Œå‘é€äº†ä¸å¯é‡å¤è¯»ã€‚ ä¸å¯é‡å¤è¯»å’Œè„è¯»çš„åŒºåˆ«æ˜¯ï¼Œè„è¯»æ˜¯æŸä¸€äº‹åŠ¡è¯»å–äº†å¦ä¸€ä¸ªäº‹åŠ¡æœªæäº¤çš„è„æ•°æ®ï¼Œè€Œä¸å¯é‡å¤è¯»åˆ™æ˜¯è¯»å–äº†å‰ä¸€äº‹åŠ¡æäº¤çš„æ•°æ®ã€‚ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸å¯é‡å¤è¯»å¹¶ä¸æ˜¯é—®é¢˜ï¼Œæ¯”å¦‚æˆ‘ä»¬å¤šæ¬¡æŸ¥è¯¢æŸä¸ªæ•°æ®å½“ç„¶ä»¥æœ€åæŸ¥è¯¢å¾—åˆ°çš„ç»“æœä¸ºä¸»ã€‚ä½†åœ¨å¦ä¸€äº›æƒ…å†µä¸‹å°±æœ‰å¯èƒ½å‘ç”Ÿé—®é¢˜ï¼Œä¾‹å¦‚å¯¹äºåŒä¸€ä¸ªæ•°æ®Aå’ŒBä¾æ¬¡æŸ¥è¯¢å°±å¯èƒ½ä¸åŒï¼ŒAå’ŒBå°±å¯èƒ½æ‰“èµ·æ¥äº†â€¦â€¦ å¹»è¯» å¹»è¯»æ˜¯äº‹åŠ¡éç‹¬ç«‹æ‰§è¡Œæ—¶å‘ç”Ÿçš„ä¸€ç§ç°è±¡ã€‚ä¾‹å¦‚äº‹åŠ¡T1å¯¹ä¸€ä¸ªè¡¨ä¸­æ‰€æœ‰çš„è¡Œçš„æŸä¸ªæ•°æ®é¡¹åšäº†ä»â€œ1â€ä¿®æ”¹ä¸ºâ€œ2â€çš„æ“ä½œï¼Œè¿™æ—¶äº‹åŠ¡T2åˆå¯¹è¿™ä¸ªè¡¨ä¸­æ’å…¥äº†ä¸€è¡Œæ•°æ®é¡¹ï¼Œè€Œè¿™ä¸ªæ•°æ®é¡¹çš„æ•°å€¼è¿˜æ˜¯ä¸ºâ€œ1â€å¹¶ä¸”æäº¤ç»™æ•°æ®åº“ã€‚è€Œæ“ä½œäº‹åŠ¡T1çš„ç”¨æˆ·å¦‚æœå†æŸ¥çœ‹åˆšåˆšä¿®æ”¹çš„æ•°æ®ï¼Œä¼šå‘ç°è¿˜æœ‰ä¸€è¡Œæ²¡æœ‰ä¿®æ”¹ï¼Œå…¶å®è¿™è¡Œæ˜¯ä»äº‹åŠ¡T2ä¸­æ·»åŠ çš„ï¼Œå°±å¥½åƒäº§ç”Ÿå¹»è§‰ä¸€æ ·ï¼Œè¿™å°±æ˜¯å‘ç”Ÿäº†å¹»è¯»ã€‚ å¹»è¯»å’Œä¸å¯é‡å¤è¯»éƒ½æ˜¯è¯»å–äº†å¦ä¸€æ¡å·²ç»æäº¤çš„äº‹åŠ¡ï¼ˆè¿™ç‚¹å°±è„è¯»ä¸åŒï¼‰ï¼Œæ‰€ä¸åŒçš„æ˜¯ä¸å¯é‡å¤è¯»æŸ¥è¯¢çš„éƒ½æ˜¯åŒä¸€ä¸ªæ•°æ®é¡¹ï¼Œè€Œå¹»è¯»é’ˆå¯¹çš„æ˜¯ä¸€æ‰¹æ•°æ®æ•´ä½“ï¼ˆæ¯”å¦‚æ•°æ®çš„ä¸ªæ•°ï¼‰ã€‚ å°ç»“ ä¸å¯é‡å¤è¯»çš„å’Œå¹»è¯»å¾ˆå®¹æ˜“æ··æ·†ï¼Œä¸å¯é‡å¤è¯»ä¾§é‡äºä¿®æ”¹ï¼Œå¹»è¯»ä¾§é‡äºæ–°å¢æˆ–åˆ é™¤ã€‚è§£å†³ä¸å¯é‡å¤è¯»çš„é—®é¢˜åªéœ€é”ä½æ»¡è¶³æ¡ä»¶çš„è¡Œï¼Œè§£å†³å¹»è¯»éœ€è¦é”è¡¨ éš”ç¦»çº§åˆ« é”æ–¹å¼å®ç°éš”ç¦»æ€§ æŸ¥çœ‹åŸå›¾]]></content>
      <categories>
        <category>database</category>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>transaction</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[UML ç±»å…³ç³»â€”â€”ä¾èµ–ã€å…³è”ã€èšåˆã€ç»„åˆã€æ³›åŒ–]]></title>
    <url>%2F2020%2F10%2F24%2Fuml%2Fclass-diagram-relationships%2F</url>
    <content type="text"><![CDATA[ç±»å…³ç³»æ¶‰åŠä¾èµ–ã€å…³è”ã€èšåˆã€ç»„åˆå’Œæ³›åŒ–è¿™äº”ç§å…³ç³»ï¼Œè€¦åˆåº¦ä¾æ¬¡é€’å¢ã€‚ å…³äºè€¦åˆåº¦ï¼Œå¯ä»¥ç®€å•åœ°ç†è§£ä¸ºå½“ä¸€ä¸ªç±»å‘ç”Ÿå˜æ›´æ—¶ï¼Œå¯¹å…¶ä»–ç±»é€ æˆçš„å½±å“ç¨‹åº¦ï¼Œå½±å“è¶Šå°åˆ™è€¦åˆåº¦è¶Šå¼±ï¼Œå½±å“è¶Šå¤§è€¦åˆåº¦è¶Šå¼ºã€‚ æ€ç»´å¯¼å›¾ æŸ¥çœ‹åŸå›¾ å‚è€ƒè®¤è¯† UML ç±»å…³ç³»â€”â€”ä¾èµ–ã€å…³è”ã€èšåˆã€ç»„åˆã€æ³›åŒ–]]></content>
      <categories>
        <category>UML</category>
      </categories>
      <tags>
        <tag>UML</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[windows ä¸‹ä»¥local systemç”¨æˆ·è¿è¡Œç¨‹åº]]></title>
    <url>%2F2020%2F10%2F16%2Fwindows%2Frun_with_local_system%2F</url>
    <content type="text"><![CDATA[èƒŒæ™¯æœ€è¿‘åœ¨ä½¿ç”¨ windows æœåŠ¡å™¨éƒ¨ç½²å¾®æœåŠ¡çš„æ—¶å€™ï¼Œå¯åŠ¨çš„ java ç¨‹åºç»å¸¸ä¼šè¢«æ— æ•…æ€æ­»ï¼Œåé¢ç»è¿‡å¤šæ¬¡éªŒè¯ï¼Œå‘ç°æ˜¯è´¦å·è¢« sign off å¯¼è‡´ä»¥æ”¹è´¦å·å¯åŠ¨çš„ç¨‹åºä¹Ÿä¸€å¾‹è¢«æ€æ­»äº†ã€‚è¿™ä¸ªæ—¶å€™å°±æƒ³åˆ°ä¸€ä¸ªè§£å†³æ–¹æ³•ï¼ŒæŠŠ java ç¨‹åºæ³¨å†Œæˆ windows çš„æœåŠ¡è¿è¡Œå°±å¯ä»¥é¿å…è´¦å·è¢«æ³¨é”€è€Œå¯¼è‡´è¿›ç¨‹è¢«æ€æ­»çš„é—®é¢˜äº†ï¼ˆå¦‚ä½•æ³¨å†ŒæˆæœåŠ¡å¯ä»¥å‚ç…§ nssm æ³¨å†Œ windows æœåŠ¡ï¼‰ã€‚ ç”±äºæ¶‰åŠåˆ°çš„æœåŠ¡æ¯”è¾ƒå¤šï¼Œè€Œä¸”å‰æœŸå·²ç»å®šå¥½ä½¿ç”¨è„šæœ¬å¯åœçš„æ–¹å¼è¿›è¡Œè¿ç»´äº†ï¼Œå› æ­¤å•ä¸ªæ³¨å†ŒæˆæœåŠ¡éœ€è¦èŠ±è´¹çš„æ—¶é—´æ¯”è¾ƒå¤šï¼Œä¹Ÿä¸å¤ªå¥½è¿ç»´ç®¡ç†ï¼Œé‚£ä¹ˆè¿˜å¯ä»¥é€šè¿‡ä»€ä¹ˆæ–¹å¼è§£å†³å‘¢ï¼Ÿ é€šè¿‡è§‚å¯Ÿ windows æœåŠ¡ä¸æˆ‘å†™çš„è„šæœ¬å¯åŠ¨æœåŠ¡æ–¹å¼çš„å·®å¼‚ï¼Œä¸éš¾å‘ç°ï¼Œä»…ä»…æ˜¯å¯åŠ¨è´¦å·ä¸ä¸€æ ·ï¼ŒæœåŠ¡æ˜¯ä»¥ SYSTEM ç”¨æˆ·å¯åŠ¨çš„ï¼Œè€Œ SYSTEM æ˜¯æœ€é«˜æƒé™çš„ç”¨æˆ·ï¼Œå› æ­¤å®¿ä¸»ç”¨æˆ·æ³¨é”€ä¸å½±å“ä»¥ SYSTEM ç”¨æˆ·è¿è¡Œå¯åŠ¨çš„ç¨‹åºã€‚ é‚£ç°åœ¨çš„é—®é¢˜å°±æ˜¯è¯¥æ€ä¹ˆä»¥ SYSTEM ç”¨æˆ·è¿è¡Œç¨‹åºäº†ã€‚ å€ŸåŠ© PSTools å·¥å…·åŒ…ä»¥ LocalSystem ç”¨æˆ·è¿è¡Œç¨‹åº å¯ä»¥é€šè¿‡è¯¥é“¾æ¥è¿›è¡Œå·¥å…·çš„ä¸‹è½½ https://docs.microsoft.com/en-us/sysinternals/downloads/pstoolsï¼Œé‡Œé¢ä¹Ÿç”¨å·¥å…·çš„ä»‹ç»ã€‚æˆ‘ä»¬ä¸»è¦ä½¿ç”¨åˆ°å·¥å…·åŒ…ä¸­çš„ PsExec.exe ï¼ˆå¦‚æœæ˜¯64ä½ç³»ç»Ÿä¹Ÿå¯ä»¥ä½¿ç”¨ PsExec64.exeï¼‰ ä»¥ LocalSystem è´¦æˆ·è¿è¡Œ xxx.jar 1psexec.exe -s java -jar xxx.jar -s å°±æ˜¯ä»¥ system èº«ä»½è¿è¡Œ è¿˜æœ‰æ›´å¤šå¯é€‰å‚æ•°ä¾‹å¦‚ï¼š-i ä»¥äº¤äº’æ¨¡å¼è¿è¡Œï¼Œå°±æ˜¯å¯ä»¥çœ‹åˆ° java çš„é»‘çª—å£ï¼›-d æ‰§è¡Œå‘½ä»¤åè¿”å›ï¼Œä¸ç­‰å¾…å‘½ä»¤ç»“æŸã€‚æ›´å…·ä½“çš„å‚æ•°å¯ä»¥é€šè¿‡å‘½ä»¤ psexec /h æŸ¥çœ‹ æ‰€æœ‰çš„pstoolç¬¬ä¸€æ¬¡è¿è¡Œæ—¶éƒ½ä¼šå¼¹æ¡†ã€‚å¯ä»¥ç”¨ â€“accepteula è¿™ä¸ªå‚æ•° å¦‚ä½•åœ¨å½“å‰ç”¨æˆ·ä¸‹æŸ¥æ‰¾ LocalSystem è´¦å·è¿è¡Œç¨‹åºçš„ pid ?ç”±äºä½¿ç”¨è„šæœ¬ç»´æŠ¤å„æœåŠ¡ jar åŒ…çš„å¯åœï¼Œé‚£ä¹ˆè§£å†³äº†æ€ä¹ˆä»¥ LocalSystem èº«ä»½è¿è¡Œç¨‹åºäº†ï¼Œä½†æ˜¯ä»¥å‰çš„è„šæœ¬ä¸­ä½¿ç”¨ jps -l | find &quot;xxx&quot; æ¥æŸ¥æ‰¾ xxx ç¨‹åºçš„ pid çš„æ“ä½œå·²ç»ä¸å†é€‚ç”¨äº†ï¼Œé‚£ä¹ˆåº”è¯¥æ€ä¹ˆæ›¿æ¢è¿™æ®µè„šæœ¬ä»£ç å‘¢ï¼Ÿ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è·å– pid 1wmic process where "commandline like '%xxx%' and name='java.exe'" get processid | findStr "[0-9]"]]></content>
      <categories>
        <category>windows</category>
      </categories>
      <tags>
        <tag>windows</tag>
        <tag>local system</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nssm æ³¨å†Œ windows æœåŠ¡]]></title>
    <url>%2F2020%2F06%2F03%2Fwindows%2Fnssm_services%2F</url>
    <content type="text"><![CDATA[èƒŒæ™¯åœ¨ Windows æœåŠ¡å™¨ä¸­å¯ç”¨ jar åº”ç”¨ï¼Œé€šå¸¸ä½¿ç”¨çš„å‘½ä»¤æ˜¯ 1java -jar xx.jar ä½†æ˜¯è¿™ç§æƒ…å†µå¯åŠ¨äº†ï¼Œæˆ‘ä»¬éœ€è¦ä¿æŒå‘½ä»¤æç¤ºæ¡†çš„æ‰“å¼€çŠ¶æ€ï¼Œæ‰€ä»¥èŒç”Ÿäº†ä¸ªæƒ³æ³•ï¼Œè¦æ˜¯æˆ‘ä»¬å°†å¯åŠ¨batè„šæœ¬æ³¨å†Œæˆwindows æœåŠ¡æ˜¯ä¸æ˜¯å°±å¯ä»¥ä¼˜é›…çš„ç®¡ç†æˆ‘ä»¬çš„ java åº”ç”¨äº†ã€‚ NSSM ä»‹ç»NSSM(the Non-Sucking Service Manager)æ˜¯Windowsç¯å¢ƒä¸‹ä¸€æ¬¾å…å®‰è£…çš„æœåŠ¡ç®¡ç†è½¯ä»¶ï¼Œå®ƒå¯ä»¥å°†åº”ç”¨å°è£…æˆæœåŠ¡ï¼Œä½¿ä¹‹åƒwindowsæœåŠ¡å¯ä»¥è®¾ç½®è‡ªåŠ¨å¯åŠ¨ç­‰ã€‚å¹¶ä¸”å¯ä»¥ç›‘æ§ç¨‹åºè¿è¡ŒçŠ¶æ€ï¼Œç¨‹åºå¼‚å¸¸ä¸­æ–­åè‡ªåŠ¨å¯åŠ¨ï¼Œå®ç°å®ˆæŠ¤è¿›ç¨‹çš„åŠŸèƒ½ã€‚ä¸ä»…æ”¯æŒå›¾å½¢ç•Œé¢æ“ä½œï¼Œä¹Ÿå®Œå…¨æ”¯æŒå‘½ä»¤è¡Œè®¾ç½®ã€‚ NSSM ä¸‹è½½ä¸é…ç½® è¿›å…¥ä¸‹è½½ç•Œé¢ï¼Œé€‰æ‹©æœ€æ–°ç¨³å®šç‰ˆè¿›è¡Œä¸‹è½½ï¼Œhttps://nssm.cc/download è§£å‹åˆ°ç‰¹å®šçš„ç›®å½•ï¼Œä¾‹å¦‚ D:\nssm-2.24ï¼Œæ–‡ä»¶å¤¹é‡Œé¢åˆ win32 å’Œ win64 ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œæ ¹æ®ç³»ç»Ÿçš„ä½æ•°é€‰æ‹©åˆé€‚çš„åº”ç”¨ï¼Œè¿™é‡Œé‡‡ç”¨ win64 é…ç½®ç¯å¢ƒå˜é‡ å°† nssm è§£å‹çš„è·¯å¾„é…ç½®åˆ°ç¯å¢ƒå˜é‡çš„ path é‡Œé¢ï¼Œå¦‚ï¼šD:\nssm-2.24\win64 éªŒè¯å®‰è£… cmd å‘½ä»¤çª—è¾“å…¥ nssm å°†batæ³¨å†ŒæˆæœåŠ¡ æ–°å»ºæ–‡ä»¶ start.bat ç”¨æ¥å¯åŠ¨ jar æ–‡ä»¶ 1234@echo offrem å¯åŠ¨jarjava -jar xx.jar æ–°å»ºæ–‡ä»¶ install.bat ç”¨æ¥æ³¨å†ŒæœåŠ¡ 1234567891011121314151617181920212223@echo offrem å½“å‰è·¯å¾„set currpath=%cd%rem æœåŠ¡åï¼Œè‡ªå·±ä¿®æ”¹set servicename=xxxrem æœåŠ¡æè¿°set servicedesc=xxxxrem å¯åŠ¨è·¯å¾„ï¼Œå¯¹åº”start.batè·¯å¾„set binpath=%currpath%\start.batrem å¯åŠ¨å‚æ•°set appParams=rem æ³¨å†ŒæœåŠ¡nssm install %servicename% %binpath%rem ä¿®æ”¹æœåŠ¡æè¿°sc description %servicename% %servicedesc%rem ä¿®æ”¹æ³¨å†Œè¡¨set regpath=HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\%servicename%\Parameters\reg add %regpath% /v AppParameters /t REG_SZ /d "%appParams%" /freg add %regpath%\AppExit\ /t REG_SZ /d "Ignore" /f åŒå‡» install.batï¼Œå³å¯]]></content>
      <categories>
        <category>windows</category>
        <category>services</category>
      </categories>
      <tags>
        <tag>windows service</tag>
        <tag>nssm</tag>
        <tag>æœåŠ¡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[windows ä¸‹ cronolog è¿›è¡Œæ—¥å¿—åˆ‡å‰²]]></title>
    <url>%2F2020%2F06%2F03%2FJava%2Fcronolog-win%2F</url>
    <content type="text"><![CDATA[è½¯ä»¶åŒ…ä¸‹è½½åœ°å€1é“¾æ¥: https://pan.baidu.com/s/1xhhBKCthOxZuYBhEL4pb-Q æå–ç : 9mxj jar åŒ…æ—¥å¿—åˆ†å‰² ä»¥ springboot çš„jarä¸ºä¾‹ï¼Œå…¶ä»– jar åŒ…ç±»ä¼¼ windows ç¯å¢ƒ ä»ä¸Šè¿°åœ°å€ğŸ‘†ä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„ cronolog åŒ… è§£å‹å­˜æ”¾åˆ°æŒ‡å®šç›®å½•ï¼Œä¾‹å¦‚ d:\cronolog æ‰§è¡Œ jar å¯åŠ¨å‘½ä»¤ 1java -jar xxx.jar | d:\cronolog\cronolog.exe æ—¥å¿—è¾“å‡ºè·¯å¾„\xxx-%%Y%%m%%d.log è¦æ˜¯æƒ³åç«¯è¿è¡Œå¯ä»¥ç¼–å†™batå¯åŠ¨è„šæœ¬ 12345@echo offjavaw -jar xxx.jar | d:\cronolog\cronolog.exe æ—¥å¿—è¾“å‡ºè·¯å¾„\xxx-%%Y%%m%%d.logexit linux ç¯å¢ƒ ä¸‹è½½å®‰è£…åŒ… cronolog-1.6.2.tar.gz 123wget http://cronolog.org/download/cronolog-1.6.2.tar.gz # æˆ–è€…wget https://files.cnblogs.com/files/crazyzero/cronolog-1.6.2.tar.gz è§£å‹ 1tar zxvf cronolog-1.6.2.tar.gz å®‰è£… 1234cd cronolog-1.6.2./configuremakesudo make install éªŒè¯ 12which cronolog# è¾“å‡º /usr/local/sbin/cronolog æ‰§è¡Œ jar å¯åŠ¨å‘½ä»¤ 1java -jar xxx.jar | /usr/local/sbin/cronolog æ—¥å¿—è¾“å‡ºè·¯å¾„/xxx-%Y%m%d.log è¦æ˜¯æƒ³åç«¯è¿è¡Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ 1nohub java -jar xxx.jar | /usr/local/sbin/cronolog æ—¥å¿—è¾“å‡ºè·¯å¾„/xxx-%Y%m%d.log &amp; tomcat è¿›è¡Œæ—¥å¿—åˆ†å‰² è¿™ä¸ªå†…å®¹ç½‘ä¸Šå¾ˆå¤šèµ„æºï¼Œåœ¨æ­¤ä¸å±•å¼€è¯´ï¼Œä¾‹å¦‚ï¼šhttps://blog.csdn.net/fly910905/article/details/78528652]]></content>
      <categories>
        <category>Java</category>
        <category>cronolog</category>
      </categories>
      <tags>
        <tag>log</tag>
        <tag>cronolog</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Windows Server 2016 æ­å»º FTP]]></title>
    <url>%2F2020%2F02%2F12%2Fwindows%2Fwindows_server_2016_ftp%2F</url>
    <content type="text"><![CDATA[å®‰è£… WEB æœåŠ¡å™¨é€šè¿‡æœåŠ¡å™¨æ·»åŠ è§’è‰²å’ŒåŠŸèƒ½å‘å¯¼æ·»åŠ  Web æœåŠ¡å™¨(IIS) æœåŠ¡å™¨ç®¡ç†å™¨ â€”â€” æ·»åŠ è§’è‰²åŠŸèƒ½ â€”â€” Web æœåŠ¡å™¨(IIS) ä¸‹ä¸€æ­¥ ä¸‹ä¸€æ­¥ ä¸‹ä¸€æ­¥ é€‰æ‹© ftp å¹¶ä¸”ç‚¹å‡»ä¸‹ä¸€æ­¥ å®‰è£… å…³é—­ æ·»åŠ  FTP ç«™ç‚¹åœ¨ è®¡ç®—æœºç®¡ç† ä¸­æ ¹æ®æç¤ºæ·»åŠ å³å¯ å¡«å†™è‡ªå®šä¹‰ä¿¡æ¯ï¼Œä¸‹ä¸€æ­¥ å¡«å†™ä¿¡æ¯ï¼Œä¸‹ä¸€æ­¥ æ ¹æ®éœ€è¦é…ç½®æƒé™ä¿¡æ¯ æ‰“å¼€IEæµè§ˆå™¨ï¼Œåœ¨Internet é€‰é¡¹ ä¸­è®¾ç½® ä½¿ç”¨è¢«åŠ¨ FTP é˜²ç«å¢™å¼€æ”¾ç«¯å£åœ¨æœåŠ¡å™¨ç®¡ç†ä¸­æ‰“å¼€ é«˜çº§å®‰å…¨ Windows é˜²ç«å¢™ï¼Œç‚¹å‡» å…¥ç«™è§„åˆ™ â€”â€” æ–°å»ºè§„åˆ™ï¼Œæ ¹æ®æç¤ºæ·»åŠ è¿œç¨‹ç«¯å£ï¼ˆé»˜è®¤ä¸º21ç«¯å£ï¼‰ï¼Œå»ºè®®å°†ç«¯å£è®¾ç½®ä¸ºé 21 ç«¯å£ã€‚ ç™»å½•éªŒè¯åœ¨windowsèµ„æºç®¡ç†å™¨ä¸­è¾“å…¥ä»¥ä¸‹åœ°å€å³å¯ç™»é™†ï¼š 1ftp://ipåœ°å€:ç«¯å£ æˆ–è€… 1ftp://username:password@ipåœ°å€:ç«¯å£ å‚è€ƒWindows Server 2016 æ­å»º FTPç¯å¢ƒ]]></content>
      <categories>
        <category>windows</category>
        <category>ftp</category>
      </categories>
      <tags>
        <tag>windows server</tag>
        <tag>windows server 2016</tag>
        <tag>ftp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•ä½¿ç”¨ webservice å¤‡ä»½æŠ¥è¡¨ catalog å¯¹è±¡]]></title>
    <url>%2F2019%2F08%2F24%2Foracle-cloud%2Fwebservice%2Fbackup-catalog-object%2F</url>
    <content type="text"><![CDATA[æ‰‹åŠ¨å¤‡ä»½å¦‚æœä¸æ˜¯ç»å¸¸éœ€è¦è¿›è¡Œå¤‡ä»½å¯ä»¥é€šè¿‡æ‰‹åŠ¨è¿›è¡Œå¤‡ä»½ï¼Œæ²¡å¿…è¦é€šè¿‡ webservice å¤‡ä»½ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ‰‹åŠ¨æ“ä½œ BIP: Downloading and Uploading Catalog Objects OBIEE: Archiving Objects ps: è¿›å…¥BI Publisher https://xxx.com/xmlpserver webservice å¤‡ä»½å…¶å®åªæ˜¯ç”¨ webservice çš„æ–¹å¼è¿›è¡Œ BIP å¤‡ä»½çš„ä¸¤æ­¥æ“ä½œ ä¸»è¦ä½¿ç”¨ webservice: https://xxx.com/xmlpserver/services/v2/CatalogService?wsdl ä¸­çš„ downloadObject å’Œ uploadObject æˆ–è€… updateObject é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨ downloadObject, è·å– catalog objects ç„¶åæ‰‹åŠ¨é€šè¿‡ BIP ç•Œé¢ä¸Šä¼ è¿˜åŸå³å¯å®Œæˆæ•´ä¸ªå¤‡ä»½è¿˜åŸæµç¨‹äº†ã€‚ç®€å•ä»‹ç»ä¸€ä¸‹æµç¨‹ è¯·æ±‚æŠ¥æ–‡ 123456789&lt;Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/"&gt; &lt;Body&gt; &lt;downloadObject xmlns="http://xmlns.oracle.com/oxp/service/v2"&gt; &lt;reportAbsolutePath&gt;/Custom/Financials/General Ledger&lt;/reportAbsolutePath&gt; &lt;userID&gt;****&lt;/userID&gt; &lt;password&gt;***&lt;/password&gt; &lt;/downloadObject&gt; &lt;/Body&gt;&lt;/Envelope&gt; reportAbsolutePath: æŠ¥è¡¨è·¯å¾„ï¼Œå‡è®¾æˆ‘ä»¬è¦å¤‡ä»½å…±äº«ç›®å½•å®¢åˆ¶åŒ–çš„ /Custom/Financials/General Ledger ç›®å½•ï¼Œå¡«å†™ /Custom/Financials/General Ledger userIDï¼šç”¨æˆ·å password: å¯†ç  å“åº”æŠ¥æ–‡ é€šè¿‡è·å–çš„ base64binary Code è§£å¯†ç”Ÿæˆæ–‡ä»¶å°±å®Œæˆäº†æ–‡ä»¶å¤‡ä»½çš„æ­¥éª¤äº† æµ‹è¯•çš„è¯å¯ä»¥é€šè¿‡ https://www.hitoy.org/tool/file_base64.php åœ¨çº¿å¯¹ base64binary Code è½¬æ¢æˆæ–‡ä»¶ï¼Œè¿™é‡Œä¸‹è½½çš„æ˜¯æ–‡ä»¶å¤¹å› æ­¤åç¼€åå†™ xdrz, åç¼€åå¯¹åº”è¯·å¾€ä¸‹çœ‹ æ–‡ä»¶åç¼€åç¡®å®šcatalog å¯¹è±¡æ–‡ä»¶åç¼€åçš„å¯¹åº”å¦‚ä¸‹ï¼Œåœ¨è½¬æ–‡ä»¶æ—¶éœ€è¦ä½¿ç”¨æ­£ç¡®çš„åç¼€åï¼Œä¸ç„¶ BIP ä¸Šä¼ è¿˜åŸæŠ¥é”™ Catalog Object Extension Assigned to Downloaded Files Data Model .xdmz Folder .xdrz Report .xdoz Style Template .xssz Subtemplate .xsbz BIP ä¸Šä¼  catalog å¯¹è±¡è¿›è¡Œè¿˜åŸè¾“å…¥ç½‘å€ https://xxx.com/xmlpserver è¿›å…¥ BIP ç•Œé¢ è¿›å…¥ catalog ç®¡ç†ç•Œé¢ï¼Œä¸‹å›¾ä¸¤ä¸ªæ¡†æ¡†ä½ç½®éƒ½å¯ä»¥è¿›å…¥ è¿›å…¥è¦è¿˜åŸåˆ°çš„ç›®å½•ä¸‹è¿›è¡Œä»¥ä¸‹æ“ä½œ è¿˜åŸæˆåŠŸ æµ‹è¯•ç»“æœåˆ†æåæœŸæµ‹è¯•å‘ç°ï¼Œä¸‹è½½çš„æ–‡ä»¶å¤¹ï¼Œå¦‚æœé‡Œé¢çš„å†…å®¹è¿‡å¤šï¼ˆçŒœæµ‹æ˜¯æ–‡ä»¶å¤¹è¿‡å¤šï¼‰ä¼šå¯¼è‡´uploadçš„æ—¶å€™å¤±è´¥ï¼ŒåŸå› æœªæ˜ï¼Œå¦å¤–å‘ç°é€šè¿‡ä¸‹è½½ä¸Šä¼ çš„æ–¹å¼æ— æ³•ä¿ç•™åŸæ–‡ä»¶çš„æƒé™ç­‰è®¾ç½®ã€‚å› æ­¤ï¼Œæ„Ÿè§‰å¦‚éå¿…è¦è¿˜æ˜¯é€šè¿‡ OBIEE æ–¹å¼è¿›è¡Œå¤‡ä»½å§ï¼ˆä¹Ÿå°±æ˜¯å½’æ¡£ä¸åå½’æ¡£ï¼‰]]></content>
      <categories>
        <category>Oracle Cloud</category>
        <category>webservice</category>
      </categories>
      <tags>
        <tag>Oracle Cloud</tag>
        <tag>catalog</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[oracle cloud ç”¨æˆ·è§’è‰²æƒé™è¡¨å…³ç³»ï¼ˆåºŸå¼ƒï¼‰]]></title>
    <url>%2F2019%2F08%2F23%2Foracle-cloud%2Fuser-role-privilege%2F</url>
    <content type="text"><![CDATA[æ ¹æ® sr å›å¤ï¼Œaseç›¸å…³è¡¨åªæ˜¯ç»™ oracle å†…éƒ¨ä½¿ç”¨ï¼Œè¡¨çš„æ•°æ®å¹¶ä¸å‡†ç¡®ï¼ŒåæœŸå¦‚æœæœ‰æ‰¾åˆ°ç›¸å…³è¡¨å†åšæ›´æ–°å§ï¼Œå¤§å®¶çœ‹åˆ°è¿™ä¸ªç›´æ¥å¿½ç•¥å§ï¼Œæ‰“æ‰°äº† Cloud æŸ¥çœ‹ç”¨æˆ·è§’è‰²æƒé™ è¡¨å…³ç³»ä¸»è¦æ¶‰åŠè¡¨ï¼š å‰ç¼€ASEå¼€å¤´çš„ ASE_USER_VL ç”¨æˆ·è¡¨ ASE_USER_ROLE_MBR ç”¨æˆ·è§’è‰²åˆ†é…è¡¨ ASE_ROLE_VL è§’è‰²è¡¨ ASE_PRIVILEGE_VL æƒé™è¡¨ ASE_PRIV_ROLE_MBR æƒé™è§’è‰²è¡¨ ASE_ROLE_ROLE_MBR è§’è‰²çˆ¶å­å…³ç³»è¡¨ sql æŸ¥è¯¢è§’è‰²çˆ¶å­å…³ç³»12345678910111213141516SELECT t.parent_role_id, pr.code AS parent_role_code, pr.role_name AS parent_role_name, t.leaf, t.ase_role_id, r.code AS role_code, r.role_name FROM (SELECT parent_role_id, connect_by_isleaf leaf, connect_by_root(child_role_id) ase_role_id FROM ase_role_role_mbr CONNECT BY PRIOR ase_role_role_mbr.parent_role_id = ase_role_role_mbr.child_role_id) t, ase_role_vl pr, ase_role_vl r WHERE t.parent_role_id = pr.role_id(+) AND t.ase_role_id = r.role_id ç”¨æˆ·è§’è‰²æŸ¥è¯¢123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107WITH-- è§’è‰²çˆ¶å­å…³ç³»role_role_mbr_ AS (SELECT t.parent_role_id, pr.code AS parent_role_code, pr.role_name AS parent_role_name, t.leaf, t.ase_role_id, r.code AS role_code, r.role_name FROM (SELECT parent_role_id, connect_by_isleaf leaf, connect_by_root(child_role_id) ase_role_id FROM ase_role_role_mbr CONNECT BY PRIOR ase_role_role_mbr.parent_role_id = ase_role_role_mbr.child_role_id) t, ase_role_vl pr, ase_role_vl r WHERE t.parent_role_id = pr.role_id(+) AND t.ase_role_id = r.role_id),-- ç”¨æˆ·è§’è‰²user_role_ AS (SELECT u.user_login, u.user_display_name, -- ä¸å½“å‰æ—¥æœŸæ¯”è¾ƒåˆ¤æ–­æ˜¯å¦æœ‰æ•ˆ decode((SELECT 1 FROM dual WHERE (u.effective_start_date &lt;= SYSDATE OR u.effective_start_date IS NULL) AND (u.effective_end_date &gt;= SYSDATE OR u.effective_end_date IS NULL) -- ä½¿ç”¨suspend åˆ¤æ–­æ˜¯å¦å¤±æ•ˆ AND EXISTS (SELECT 1 FROM per_users pu WHERE pu.user_guid = u.user_guid AND pu.suspended = 'N')), 1, 'Active', 'Inactive') AS is_user_active, u.creation_date AS user_creation_date, u.last_update_date AS user_last_update_date, r.role_id, r.code AS role_code, r.role_name, -- ä¸å½“å‰æ—¥æœŸæ¯”è¾ƒåˆ¤æ–­æ˜¯å¦æœ‰æ•ˆ decode((SELECT 1 FROM dual WHERE (r.effective_start_date &lt;= SYSDATE OR r.effective_start_date IS NULL) AND (r.effective_end_date &gt;= SYSDATE OR r.effective_end_date IS NULL)), 1, 'Active', 'Inactive') AS is_role_active, r.creation_date AS role_creation_date, r.last_update_date AS role_last_update_date, -- ä¸å½“å‰æ—¥æœŸæ¯”è¾ƒåˆ¤æ–­æ˜¯å¦æœ‰æ•ˆ decode((SELECT 1 FROM dual WHERE (ur.effective_start_date &lt;= SYSDATE OR ur.effective_start_date IS NULL) AND (ur.effective_end_date &gt;= SYSDATE OR ur.effective_end_date IS NULL)), 1, 'Active', 'Inactive') AS is_user_role_active, ur.creation_date AS user_role_creation_date, ur.last_update_date AS user_role_last_update_date FROM fusion.ase_user_vl u, fusion.ase_user_role_mbr ur, fusion.ase_role_vl r WHERE u.user_id = ur.user_id AND r.role_id = ur.role_id)-- ä¸»æŸ¥è¯¢SELECT t.user_login, t.user_display_name, t.is_user_active, t.user_creation_date, t.user_last_update_date, t.role_code, t.role_name, rr.parent_role_code, rr.parent_role_name, t.is_role_active, t.role_creation_date, t.role_last_update_date, t.is_user_role_active, t.user_role_creation_date, t.user_role_last_update_date FROM user_role_ t, role_role_mbr_ rr WHERE t.role_id = rr.ase_role_id(+) /* å‚æ•° */ -- ç”¨æˆ·ç™»é™†å AND (t.user_login = :p_user OR :p_user IS NULL) -- è§’è‰²ç¼–ç ï¼ŒåŒ…å«çˆ¶è§’è‰² AND (:p_role_code IS NULL OR t.role_code = :p_role_code OR rr.parent_role_code = :p_role_code) -- ç”¨æˆ·æ˜¯å¦æœ‰æ•ˆ AND (t.is_user_active = :p_user_active OR :p_user_active IS NULL) -- è§’è‰²æ˜¯å¦æœ‰æ•ˆ AND (t.is_role_active = :p_role_active OR :p_role_active IS NULL) -- ç”¨æˆ·è§’è‰²åˆ†é…æ˜¯å¦æœ‰æ•ˆ AND (t.is_user_role_active = :p_user_role_active OR :p_user_role_active IS NULL) -- ç”¨æˆ·åˆ›å»ºæ—¶é—´ AND (t.user_creation_date &gt;= :p_user_creation_date_from OR :p_user_creation_date_from IS NULL) AND (t.user_creation_date &lt;= :p_user_creation_date_to OR :p_user_creation_date_to IS NULL) -- è§’è‰²åˆ›å»ºæ—¶é—´ AND (t.role_creation_date &gt;= :p_role_creation_date_from OR :p_role_creation_date_from IS NULL) AND (t.role_creation_date &lt;= :p_role_creation_date_to OR :p_role_creation_date_to IS NULL) -- ç”¨æˆ·è§’è‰²åˆ›å»ºæ—¶é—´ AND (t.user_role_creation_date &gt;= :p_ur_creation_date_from OR :p_ur_creation_date_from IS NULL) AND (t.user_role_creation_date &lt;= :p_ur_creation_date_to OR :p_ur_creation_date_to IS NULL) å‚è€ƒhttps://community.oracle.com/thread/3924763?parent=MOSC_EXTERNAL&amp;sourceId=MOSC&amp;id=3924763 hen]]></content>
      <categories>
        <category>Oracle Cloud</category>
      </categories>
      <tags>
        <tag>Oracle Cloud</tag>
        <tag>Role-Privileges</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åˆè¯† OOM]]></title>
    <url>%2F2019%2F06%2F20%2FJava%2Fjvm%2Foom-1%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯ OOMOOMï¼ŒOut of Memoryï¼Œä¹Ÿå°±æ˜¯è¶…å‡ºäº†é¢„è®¾å†…å­˜ã€‚ java.lang.OutOfMemoryErrorï¼Œå®˜æ–¹è¯´æ˜ï¼š Thrown when the Java Virtual Machine cannot allocate an object because it is out of memory, and no more memory could be made available by the garbage collector. æ„æ€å°±æ˜¯è¯´ï¼Œå½“ JVM æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜æ¥ä¸ºå¯¹è±¡åˆ†é…ç©ºé—´ï¼Œå¹¶ä¸”åƒåœ¾å›æ”¶å™¨ä¹Ÿå·²ç»æ²¡æœ‰ç©ºé—´å¯å›æ”¶æ—¶ï¼Œå°±ä¼šæŠ›å‡ºè¿™ä¸ªerrorï¼ˆæ³¨ï¼šéexceptionï¼Œå› ä¸ºè¿™ä¸ªé—®é¢˜å·²ç»ä¸¥é‡åˆ°ä¸è¶³ä»¥è¢«åº”ç”¨å¤„ç†ï¼‰ã€‚ ä¸ºä»€ä¹ˆä¼š OOMä¸»è¦åŸå› æœ‰ä¸¤ç‚¹ åˆ†é…å†…å­˜ä¸è¶³ï¼Œå¯ç”¨é€šè¿‡è°ƒæ•´å¯åŠ¨ VM å‚æ•°æ§åˆ¶ã€‚ ç¨‹åºé€»è¾‘é—®é¢˜ï¼Œå ç”¨è¿‡å¤šå†…å­˜å¹¶ä¸”ä½¿ç”¨å®Œæ²¡æœ‰åŠæ—¶é‡Šæ”¾ï¼Œé€ æˆå†…å­˜æ³„éœ²æˆ–è€…å†…å­˜æº¢å‡ºã€‚ å…¶ä¸­ï¼š å†…å­˜æ³„æ¼ï¼šç”³è¯·ä½¿ç”¨å®Œçš„å†…å­˜æ²¡æœ‰é‡Šæ”¾ï¼Œå¯¼è‡´è™šæ‹Ÿæœºä¸èƒ½å†æ¬¡ä½¿ç”¨è¯¥å†…å­˜ï¼Œæ­¤æ—¶è¿™æ®µå†…å­˜å°±æ³„éœ²äº†ï¼Œå› ä¸ºç”³è¯·è€…ä¸ç”¨äº†ï¼Œè€Œåˆä¸èƒ½è¢«è™šæ‹Ÿæœºåˆ†é…ç»™åˆ«äººç”¨ã€‚ï¼ˆå¾€å¾€æ˜¯ç¼–ç ä¸å½“å¯¼è‡´ï¼‰ å†…å­˜æº¢å‡ºï¼šç”³è¯·çš„å†…å­˜è¶…å‡ºäº†JVMèƒ½æä¾›çš„å†…å­˜å¤§å°ï¼Œæ­¤æ—¶ç§°ä¹‹ä¸ºæº¢å‡ºã€‚ JVM å†…å­˜æ¨¡å‹ä¸Šé¢é¢‘ç¹æåˆ°çš„å†…å­˜æŒ‡çš„å°±æ˜¯ JVM å†…å­˜æ¨¡å‹ã€‚ JVM åœ¨è¿è¡Œä¼šç®¡ç†ä»¥ä¸‹çš„å†…å­˜åŒºåŸŸï¼š ç¨‹åºè®¡æ•°å™¨ï¼šå½“å‰çº¿ç¨‹æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ï¼Œçº¿ç¨‹ç§æœ‰ï¼Œè®°å½•æ¯ä¸ªçº¿ç¨‹å½“å‰æ‰§è¡Œå­—èŠ‚ç çš„ä½ç½®ï¼Œå› ä¸ºä¼šæœ‰å¤šä¸ªçº¿ç¨‹æ¥å¹¶å‘æ‰§è¡Œå„ç§ä¸åŒçš„ä»£ç ï¼Œæ‰€æœ‰æ¯ä¸ªçº¿ç¨‹ä¼šæœ‰è‡ªå·±çš„ä¸€ä¸ªç¨‹åºè®¡æ•°å™¨ï¼Œä¸“é—¨è®°å½•è¿™ä¸ªçº¿ç¨‹ç›®å‰æ‰§è¡Œåˆ°å“ªä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤ï¼Œä¹Ÿå°±æ˜¯çº¿ç¨‹ç§æœ‰ï¼› java è™šæ‹Ÿæœºæ ˆï¼šä¿å­˜æ–¹æ³•å†…å±€éƒ¨å˜é‡æ•°æ®çš„åŒºåŸŸï¼Œçº¿ç¨‹ç§æœ‰ã€‚çº¿ç¨‹æ‰§è¡Œäº†ä¸€ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆå°±ä¼šä¸ºè¿™ä¸ªæ–¹æ³•è°ƒç”¨åˆ›å»ºå¯¹åº”çš„ä¸€ä¸ªæ ˆå¸§ã€‚æ ˆå¸§é‡Œæœ‰è¿™ä¸ªæ–¹æ³•çš„å±€éƒ¨å˜é‡è¡¨ ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¸œè¥¿ï¼Œè°ƒç”¨æ‰§è¡Œä»»ä½•æ–¹æ³•çš„æ—¶å€™ï¼Œéƒ½ä¼šç»™æ–¹æ³•åˆ›å»ºæ ˆå¸§ï¼Œç„¶åå…¥æ ˆï¼Œè°ƒç”¨å®Œå†å‡ºæ ˆï¼› æœ¬åœ°æ–¹æ³•æ ˆï¼šç±»ä¼¼â€œjava è™šæ‹Ÿæœºæ ˆâ€ï¼Œä½†æ˜¯ä¸º native æ–¹æ³•çš„è¿è¡Œæä¾›å†…å­˜ç¯å¢ƒï¼Œè°ƒç”¨æœ¬åœ°æ“ä½œç³»ç»Ÿé‡Œé¢çš„ä¸€äº›æ–¹æ³•ï¼Œå¯èƒ½æ˜¯è°ƒç”¨ c è¯­è¨€å†™çš„åº•å±‚ç±»åº“æä¾›çš„å†…å­˜ç¯å¢ƒï¼› java å †å†…å­˜ï¼šå¯¹è±¡å†…å­˜åˆ†é…çš„åœ°æ–¹ï¼Œå†…å­˜åƒåœ¾å›æ”¶çš„ä¸»è¦åŒºåŸŸï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«ã€‚å¯¹è±¡æŒ‰ä¸åŒçš„ â€œç”Ÿå­˜â€ æƒ…å†µåˆ†ä¸ºæ–°ç”Ÿä»£ï¼Œè€å¹´ä»£ç­‰ï¼› æ–¹æ³•åŒº/Metaspaceï¼šJDK 1.8 åå«åš Metaspaceï¼ŒJDK 8 å¼€å§‹æŠŠç±»çš„å…ƒæ•°æ®æ”¾åˆ°æœ¬åœ°å †å†…å­˜(native heap)ä¸­ï¼Œè¿™ä¸€å—åŒºåŸŸå°±å« Metaspaceï¼Œè¯¦æƒ…è§æ·±å…¥æ¢ç©¶ JVM | æ¢ç§˜ Metaspaceï¼› å †å¤–å†…å­˜ï¼šå¹¶ä¸æ˜¯ JVM è¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼Œå¯ç›´æ¥è®¿é—®çš„å†…å­˜ï¼Œæ¯”å¦‚ NIO ä¼šç”¨åˆ°è¿™éƒ¨åˆ†ï¼› OOM ç±»å‹ java.lang.OutOfMemoryError: Java heap spaceï¼Œæ¯”è¾ƒå¸¸è§ï¼Œjava å †å†…å­˜æº¢å‡ºã€‚è¯¦æƒ…è§OutOfMemoryErrorç³»åˆ—ï¼ˆ1ï¼‰: Java heap space java.lang.OutOfMemoryError: GC overhead limit exceededï¼Œç¨‹åºåŸºæœ¬ä¸Šè€—å°½äº†æ‰€æœ‰çš„å¯ç”¨å†…å­˜, GCä¹Ÿæ¸…ç†ä¸äº†ã€‚è¯¦æƒ…è§OutOfMemoryErrorç³»åˆ—ï¼ˆ2ï¼‰: GC overhead limit exceeded java.lang.OutOfMemoryError: PermGen spaceï¼Œjava æ°¸ä¹…ä»£æº¢å‡ºï¼Œä¹Ÿå°±æ˜¯æ–¹æ³•åŒºæº¢å‡ºï¼Œjdk 7 ä¹‹å‰ã€‚è¯¦æƒ…è§OutOfMemoryErrorç³»åˆ—ï¼ˆ3ï¼‰: Permgen space java.lang.OutOfMemoryError: Metaspaceï¼Œç›¸å½“äº jdk 7ä»¥å‰çš„ java.lang.OutOfMemoryError: PermGen spaceã€‚è¯¦æƒ…è§OutOfMemoryErrorç³»åˆ—ï¼ˆ4ï¼‰: Metaspace java.lang.StackOverflowErrorï¼Œä¸ä¼šæŠ› OOM ERRORï¼Œä½†ä¹Ÿæ˜¯æ¯”è¾ƒå¸¸è§çš„ Java å†…å­˜æº¢å‡º æŸ¥çœ‹åº”ç”¨è¿›ç¨‹idï¼ˆpidï¼‰åŠå¯åŠ¨ VM å‚æ•°jps -v æŸ¥æ‰¾åº”ç”¨è¿›ç¨‹ id 1234jps -v29591 Jps -Dapplication.home=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.191.b12-1.el7_6.x86_64 -Xms8m9066 Bootstrap -Djava.util.logging.config.file=/xxx/tomcat/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Xms512m -Xmx2048m -Djdk.tls.ephemeralDHKeySize=2048 -Xms4096m -Xmx10240m -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/xxx/dump -Djava.protocol.handler.pkgs=org.apache.catalina.webresources -Dorg.apache.catalina.security.SecurityListener.UMASK=0027 -Dignore.endorsed.dirs= -Dcatalina.base=/xxx/tomcat -Dcatalina.home=/xxx/lib/tomcat -Djava.io.tmpdir=/xxx/tomcat/temp jinfo -flags &lt;pid&gt; æŸ¥çœ‹ VM å¯åŠ¨å‚æ•° 12345678jinfo -flags 9066Attaching to process ID 9066, please wait...Debugger attached successfully.Server compiler detected.JVM version is 25.191-b12Non-default VM flags: -XX:CICompilerCount=3 -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=null -XX:InitialHeapSize=4294967296 -XX:MaxHeapSize=10737418240 -XX:MaxNewSize=3578789888 -XX:MinHeapDeltaBytes=524288 -XX:NewSize=1431306240 -XX:OldSize=2863661056 -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseParallelGCCommand line: -Djava.util.logging.config.file=/xxx/tomcat/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Xms512m -Xmx2048m -Djdk.tls.ephemeralDHKeySize=2048 -Xms4096m -Xmx10240m -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/xxx/dump -Djava.protocol.handler.pkgs=org.apache.catalina.webresources -Dorg.apache.catalina.security.SecurityListener.UMASK=0027 -Dignore.endorsed.dirs= -Dcatalina.base=/xxx/tomcat -Dcatalina.home=/xxx/lib/tomcat -Djava.io.tmpdir=/xxx/tomcat/temp jmap -heap &lt;pid&gt; æŸ¥çœ‹ VM å¯åŠ¨å‚æ•°ï¼Œä»¥åŠå †å†…å­˜æƒ…å†µ 123456789101112131415161718192021222324252627282930313233343536373839jmap -heap 9066Attaching to process ID 9066, please wait...Debugger attached successfully.Server compiler detected.JVM version is 25.191-b12using thread-local object allocation.Parallel GC with 4 thread(s)Heap Configuration: MinHeapFreeRatio = 0 MaxHeapFreeRatio = 100 MaxHeapSize = 10737418240 (10240.0MB) NewSize = 1431306240 (1365.0MB) MaxNewSize = 3578789888 (3413.0MB) OldSize = 2863661056 (2731.0MB) NewRatio = 2 SurvivorRatio = 8 MetaspaceSize = 21807104 (20.796875MB) CompressedClassSpaceSize = 1073741824 (1024.0MB) MaxMetaspaceSize = 17592186044415 MB G1HeapRegionSize = 0 (0.0MB)Heap Usage:Exception in thread "main" java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at sun.tools.jmap.JMap.runTool(JMap.java:201) at sun.tools.jmap.JMap.main(JMap.java:130)Caused by: java.lang.RuntimeException: unknown CollectedHeap type : class sun.jvm.hotspot.gc_interface.CollectedHeap at sun.jvm.hotspot.tools.HeapSummary.run(HeapSummary.java:157) at sun.jvm.hotspot.tools.Tool.startInternal(Tool.java:260) at sun.jvm.hotspot.tools.Tool.start(Tool.java:223) at sun.jvm.hotspot.tools.Tool.execute(Tool.java:118) at sun.jvm.hotspot.tools.HeapSummary.main(HeapSummary.java:50) ... 6 more ä¸Šé¢æŠ¥é”™è§£å†³ Exception when taking a heapdump using JMAP è§£å†³å†è¿è¡Œ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748jmap -heap 9066Attaching to process ID 9066, please wait...Debugger attached successfully.Server compiler detected.JVM version is 25.191-b12using thread-local object allocation.Parallel GC with 4 thread(s)Heap Configuration: MinHeapFreeRatio = 0 MaxHeapFreeRatio = 100 MaxHeapSize = 10737418240 (10240.0MB) NewSize = 1431306240 (1365.0MB) MaxNewSize = 3578789888 (3413.0MB) OldSize = 2863661056 (2731.0MB) NewRatio = 2 SurvivorRatio = 8 MetaspaceSize = 21807104 (20.796875MB) CompressedClassSpaceSize = 1073741824 (1024.0MB) MaxMetaspaceSize = 17592186044415 MB G1HeapRegionSize = 0 (0.0MB)Heap Usage:PS Young GenerationEden Space: capacity = 1209532416 (1153.5MB) used = 279076032 (266.14764404296875MB) free = 930456384 (887.3523559570312MB) 23.073051065710338% usedFrom Space: capacity = 112721920 (107.5MB) used = 9442424 (9.004997253417969MB) free = 103279496 (98.49500274658203MB) 8.376741631086482% usedTo Space: capacity = 109051904 (104.0MB) used = 0 (0.0MB) free = 109051904 (104.0MB) 0.0% usedPS Old Generation capacity = 2976907264 (2839.0MB) used = 609708576 (581.4634094238281MB) free = 2367198688 (2257.536590576172MB) 20.481275428806907% used67050 interned Strings occupying 6996392 bytes. è·å–åˆ°çš„ VM å‚æ•°ï¼Œå¯å…³æ³¨å¦‚ä¸‹å‡ é¡¹å‚æ•°çš„æƒ…å†µ 12345678-XX:+HeapDumpOnOutOfMemoryError # æ˜¯å¦å¼€å¯ OOM æ—¶è¾“å‡º dump æ–‡ä»¶ï¼Œ+ è¡¨ç¤ºå¼€å¯-XX:HeapDumpPath=/data/logs # è‹¥é…ç½®è¯¥é¡¹ï¼Œdump æ–‡ä»¶è¾“å‡ºåˆ°è¯¥è·¯å¾„ä¸‹-XX:+PrintGCDetails # æ˜¯å¦æ‰“å° GC è¯¦ç»†ä¿¡æ¯-XX:+PrintGCTimeStamps # æ˜¯å¦æ‰“å° GC æ—¶é—´æˆ³(åŸºå‡†å½¢å¼)-XX:+PrintGCDateStamps # æ˜¯å¦æ‰“å° GC æ—¶é—´æˆ³(æ—¥æœŸå½¢å¼)-XX:+PrintTenuringDistribution # åœ¨æ¯æ¬¡æ–°ç”Ÿä»£ GC æ—¶ï¼Œè¾“å‡ºå¹¸å­˜åŒºä¸­å¯¹è±¡çš„å¹´é¾„åˆ†å¸ƒ-Xloggc:/data/logs # è‹¥é…ç½®è¯¥é¡¹ï¼ŒGC æ—¥å¿—è¾“å‡ºåˆ°è¯¥è·¯å¾„ä¸‹ å¦‚æœåº”ç”¨æ²¡æœ‰å¯ç”¨ç›¸åº”çš„å‚æ•°è¾“å‡ºæ—¥å¿—ï¼Œå¯ä»¥è¿›è¡Œä»¥ä¸‹æ“ä½œæŸ¥çœ‹ç›¸å…³æ—¥å¿— 12345# 1.æŸ¥çœ‹åº”ç”¨ GC æ¬¡æ•°åŠå¹³å‡æ¯æ¬¡ GC æ—¶é—´jstat -gc &lt;pid&gt; 5000 # æ¯ 5 ç§’æ˜¾ç¤ºä¸€æ¬¡ pid çš„è¿›ç¨‹ç”Ÿæˆ GC æƒ…å†µ# 2.æŸ¥çœ‹ JVM å †å†…å­˜ä¸åŒä»£çš„å…·ä½“ä½¿ç”¨æƒ…å†µjmap -heap &lt;pid&gt; # å‚ç…§ä¸Šé¢ä½¿ç”¨ å‚è€ƒJava OOM åˆ†æ OutOfMemoryErrorç³»åˆ— æ·±å…¥æ¢ç©¶ JVM | æ¢ç§˜ Metaspace]]></content>
      <categories>
        <category>Java</category>
        <category>jvm</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>jvm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[[è¯‘æ–‡] Spring Security â€“ security none, filters none, access permitAll]]></title>
    <url>%2F2019%2F03%2F28%2FJava%2Fspring%2Fsecurity-none-filters-none-access-permitAll%2F</url>
    <content type="text"><![CDATA[ç‰ˆæƒè¯´æ˜ï¼Œæ–‡ç« ç¿»è¯‘è‡³ Spring Security â€“ security none, filters none, access permitAll æ¦‚è¿°Spring Security æä¾›äº†å‡ ç§å°†è¯·æ±‚æ¨¡å¼é…ç½®ä¸ºä¸å®‰å…¨æˆ–è€…å…è®¸æ‰€æœ‰è®¿é—®çš„æœºåˆ¶ã€‚æ ¹æ®è¿™äº›æœºåˆ¶çš„ä¸åŒï¼Œè¿™å¯èƒ½æ„å‘³ç€æ ¹æœ¬ä¸åœ¨è¿™ä¸ªè·¯å¾„ä¸Šè¿è¡Œå®‰å…¨è¿‡æ»¤å™¨é“¾ï¼Œæˆ–è€…è¿è¡Œäº†å®‰å…¨è¿‡æ»¤å™¨é“¾ä½†å…è®¸è®¿é—®ã€‚ access=â€permitAllâ€ç»™ &lt;intercept-url> æ ‡ç­¾è®¾ç½® access=â€permitAllâ€ å…ƒç´ ï¼Œå°†ä¼šç»™æŒ‡å®šè·¯å¾„å…è®¸æ‰€æœ‰è¯·æ±‚æˆæƒ: 1&lt;intercept-url pattern="/login*" access="permitAll" /&gt; æˆ–è€…é€šè¿‡ java é…ç½®: 1http.authorizeRequests().antMatchers("/login*").permitAll() è¿™æ˜¯åœ¨ä¸ç¦ç”¨å®‰å…¨è¿‡æ»¤å™¨çš„æƒ…å†µä¸‹å®ç°çš„ï¼Œè¿™äº›è¿‡æ»¤å™¨ä»åœ¨è¿è¡Œï¼Œå› æ­¤ä»»ä½•ä¸ Spring Security ç›¸å…³çš„åŠŸèƒ½ä»ç„¶å¯ä»¥ä½¿ç”¨ã€‚ filters=â€noneâ€è¿™æ˜¯åœ¨ Spring 3.1 å‰çš„åŠŸèƒ½ï¼Œå·²åœ¨ Spring 3.1 ä¸­å¼ƒç”¨å’Œè¢«æ›¿ä»£äº†ã€‚ è¿™ä¸ª filter å±æ€§å®Œå…¨ç¦ç”¨æŒ‡å®šçš„è¯·æ±‚è·¯å¾„ä¸Šçš„ Spring Security è¿‡æ»¤å™¨é“¾: 1&lt;intercept-url pattern="/login*" filters="none" /&gt; å½“å¤„ç†è¯·æ±‚éœ€è¦ Spring Security çš„æŸäº›åŠŸèƒ½æ—¶ï¼Œè¿™å¯èƒ½ä¼šæœ‰é—®é¢˜ã€‚ ç”±äºåœ¨ Spring 3.0+ ç‰ˆæœ¬è¿™æ˜¯ä¸€ä¸ªè¢«å¼ƒç”¨çš„åŠŸèƒ½ï¼Œåœ¨ Spring 3.1 ä¸­ä½¿ç”¨å®ƒå°†å¯¼è‡´å¯åŠ¨æ—¶å‡ºç°è¿è¡Œæ—¶å¼‚å¸¸: 1234567SEVERE: Context initialization failedorg.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: The use of "filters='none'" is no longer supported. Please define a separate &lt;http&gt; element for the pattern you want to exclude and use the attribute "security='none'".Offending resource: class path resource [webSecurityConfig.xml] at o.s.b.f.p.FailFastProblemReporter.error(FailFastProblemReporter.java:68) security=â€noneâ€æ­£å¦‚æˆ‘ä»¬åœ¨ä¸Šé¢çš„é”™è¯¯æ¶ˆæ¯ä¸­çœ‹åˆ°çš„é‚£æ ·ï¼ŒSpring 3.1 ç”¨ä¸€ä¸ªæ–°çš„è¡¨è¾¾å¼æ›¿æ¢ filters =â€œnoneâ€ - security =â€œnoneâ€ã€‚ èŒƒå›´ä¹Ÿå‘ç”Ÿäº†å˜åŒ– â€”â€” è¿™ä¸å†åœ¨ &lt;intercept-url> å…ƒç´ çº§åˆ«æŒ‡å®šã€‚ç›¸åï¼ŒSpring 3.1 å…è®¸å®šä¹‰å¤šä¸ª &lt;http> å…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰è‡ªå·±çš„å®‰å…¨è¿‡æ»¤é“¾é…ç½®ã€‚å› æ­¤ï¼Œæ–°çš„å®‰å…¨å±æ€§ç°åœ¨å±äº &lt;http> å…ƒç´ çº§åˆ«ã€‚ åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå®ƒé•¿è¿™æ ·: 1&lt;http pattern="/resources/**" security="none"/&gt; æˆ–è€…é€šè¿‡ java é…ç½®: 1web.ignoring().antMatchers("/resources/**"); è€Œä¸æ˜¯æ—§çš„: 1&lt;intercept-url pattern="/resources/**" filters="none"/&gt; ä¸ filters =â€œnoneâ€ ç±»ä¼¼ï¼Œè¿™ä¹Ÿå°†å®Œå…¨ç¦ç”¨è¯¥è¯·æ±‚è·¯å¾„çš„å®‰å…¨è¿‡æ»¤å™¨é“¾ - å› æ­¤ï¼Œå½“åœ¨åº”ç”¨ç¨‹åºä¸­å¤„ç†è¯·æ±‚æ—¶ï¼ŒSpring Security åŠŸèƒ½å°†ä¸å¯ç”¨ã€‚ å¯¹äºä¸Šé¢çš„ç¤ºä¾‹è€Œè¨€ï¼Œè¿™ä¸æ˜¯é—®é¢˜ï¼Œå…¶ä¸»è¦æ¶‰åŠæä¾›é™æ€èµ„æº - åœ¨å®é™…ä¸­ä¸éœ€è¦åšç‰¹æ®Šå¤„ç†ã€‚ä½†æ˜¯ï¼Œå¦‚æœä»¥æŸç§æ–¹å¼ä»¥ç¼–ç¨‹æ–¹å¼å¤„ç†è¯·æ±‚ - é‚£ä¹ˆå®‰å…¨åŠŸèƒ½ï¼ˆä¾‹å¦‚ï¼Œrequires-channelï¼Œè®¿é—®å½“å‰ç”¨æˆ·æˆ–è°ƒç”¨å®‰å…¨æ–¹æ³•ï¼‰å°†ä¸å¯ç”¨ã€‚ å‡ºäºåŒæ ·çš„åŸå› ï¼Œåœ¨å·²ç»é…ç½®äº† security=â€noneâ€ çš„ &lt;http> å…ƒç´ ä¸ŠæŒ‡å®šé™„åŠ å±æ€§æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºè¯¥è¯·æ±‚è·¯å¾„æ˜¯ä¸å®‰å…¨çš„ï¼Œè¿™äº›å±æ€§å°†è¢«å¿½ç•¥ã€‚ æˆ–è€…ï¼Œaccess=â€™IS_AUTHENTICATED_ANONYMOUSLYâ€™ å¯ç”¨äºå…è®¸åŒ¿åè®¿é—®ã€‚ Caveats for security=â€noneâ€å½“ä½¿ç”¨å¤šä¸ª &lt;http> å…ƒç´ æ—¶ï¼Œæœ‰äº›é…ç½®äº† security =â€œnoneâ€ï¼Œè¯·è®°ä½ï¼Œå®šä¹‰è¿™äº›å…ƒç´ çš„é¡ºåºå¾ˆé‡è¦ã€‚æˆ‘ä»¬åº”è¯¥é¦–å…ˆä½¿ç”¨ç‰¹å®šçš„ &lt;http> è·¯å¾„ï¼Œæœ€åå†ä½¿ç”¨é€šç”¨æ¨¡å¼ã€‚ å¦è¯·æ³¨æ„ï¼Œå¦‚æœ &lt;http> å…ƒç´ æœªæŒ‡å®šæ¨¡å¼ï¼Œåˆ™é»˜è®¤æƒ…å†µä¸‹ï¼Œæ˜ å°„åˆ°é€šç”¨åŒ¹é…æ¨¡å¼ - â€œ/** â€ - å› æ­¤ï¼Œæ­¤å…ƒç´ å¿…é¡»æ˜¯æœ€åä¸€ä¸ªã€‚å¦‚æœå…ƒç´ çš„é¡ºåºä¸æ­£ç¡®ï¼Œåˆ™å®‰å…¨è¿‡æ»¤å™¨é“¾çš„åˆ›å»ºå°†å¤±è´¥ï¼š 12345Caused by: java.lang.IllegalArgumentException: A universal match pattern ('/**') is defined before other patterns in the filter chain, causing them to be ignored. Please check the ordering in your &lt;security:http&gt; namespace or FilterChainProxy bean configuration at o.s.s.c.h.DefaultFilterChainValidator.checkPathOrder(DefaultFilterChainValidator.java:49) at o.s.s.c.h.DefaultFilterChainValidator.validate(DefaultFilterChainValidator.java:39) ç»“è®ºæœ¬æ–‡è®¨è®ºäº†å…è®¸ä½¿ç”¨ Spring Security è®¿é—®è·¯å¾„çš„é€‰é¡¹ - é‡ç‚¹å…³æ³¨ filters =â€œnoneâ€ï¼Œsecurity =â€œnoneâ€ å’Œ access =â€œpermitAllâ€ ä¹‹é—´çš„å·®å¼‚ã€‚ åƒå¾€å¸¸ä¸€æ ·ï¼Œè¿™äº›ä¾‹å­å¯ä»¥åœ¨ GitHub ä¸Šæ‰¾åˆ°ã€‚ å‚è€ƒèµ„æ–™ Spring Security â€“ security none, filters none, access permitAll]]></content>
      <categories>
        <category>Java</category>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java ä»£ç†ä¸­è½¬ä¸‹è½½ url æ–‡ä»¶]]></title>
    <url>%2F2019%2F03%2F21%2FJava%2Fjava-proxy-url-file%2F</url>
    <content type="text"><![CDATA[åœºæ™¯æè¿°æˆ‘ä»¬æœ‰ä¸€ä¸ªå¤–ç½‘è®¿é—®çš„ java web ç³»ç»Ÿ Aï¼Œè¿™ä¸ªç³»ç»Ÿä¼šå»è¯·æ±‚ä¸€ä¸ªå†…ç½‘ç³»ç»Ÿ B è·å–æ–‡ä»¶æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä¼šè¿”å›ä¸€ä¸ªå†…ç½‘çš„ä¸‹è½½åœ°å€ç»™æˆ‘ä»¬ã€‚å‡å¦‚æˆ‘ä»¬åªæ˜¯æŠŠåœ°å€æä¾›å‡ºå»ï¼Œè¿™ä¸ªæ—¶å€™å¤–ç½‘æ˜¯æ— æ³•ä¸‹è½½åˆ°æ–‡ä»¶çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ A ç³»ç»Ÿå¯¹ B ç³»ç»Ÿè¿”å›çš„æ–‡ä»¶ä¸‹è½½åœ°å€è¿›è¡Œä¸­è½¬ï¼Œä»è€Œæš´éœ²å‡ºåŸºäº A ç³»ç»Ÿçš„å¤–ç½‘ä¸‹è½½åœ°å€ã€‚ ä»£ç å¼€å‘12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758/** * url æ–‡ä»¶ä»£ç†ä¸­è½¬ * @param response * @param address * @param contentType * @param fileName * @throws IOException */ public static void proxyUrlFile(HttpServletResponse response, String address, String contentType, String fileName) throws IOException &#123; InputStream inputStream = null; ServletOutputStream outputStream = null; HttpURLConnection httpURLConnection = null; try &#123; URL url = new URL(address); httpURLConnection = (HttpURLConnection) url.openConnection(); httpURLConnection.connect(); inputStream = httpURLConnection.getInputStream(); outputStream = response.getOutputStream(); if (contentType != null) &#123; response.setContentType(contentType); &#125; else &#123; // è®¾ç½®æ–‡ä»¶ContentTypeç±»å‹ï¼Œè¿™æ ·è®¾ç½®ï¼Œä¼šè‡ªåŠ¨åˆ¤æ–­ä¸‹è½½æ–‡ä»¶ç±»å‹ response.setContentType("multipart/form-data"); &#125; if (fileName != null) &#123; response.setHeader("Content-disposition", "attachment; filename=\"" + new String(fileName.getBytes("utf-8"), "ISO8859-1")+"\""); &#125; // åˆ›å»ºä¸€ä¸ªBufferå­—ç¬¦ä¸² byte[] buffer = new byte[1024]; // æ¯æ¬¡è¯»å–çš„å­—ç¬¦ä¸²é•¿åº¦ï¼Œå¦‚æœä¸º-1ï¼Œä»£è¡¨å…¨éƒ¨è¯»å–å®Œæ¯• int len = 0; // ä½¿ç”¨ä¸€ä¸ªè¾“å…¥æµä»bufferé‡ŒæŠŠæ•°æ®è¯»å–å‡ºæ¥ while((len = inputStream.read(buffer)) != -1 )&#123; // ç”¨è¾“å‡ºæµå¾€bufferé‡Œå†™å…¥æ•°æ®ï¼Œä¸­é—´å‚æ•°ä»£è¡¨ä»å“ªä¸ªä½ç½®å¼€å§‹è¯»ï¼Œlenä»£è¡¨è¯»å–çš„é•¿åº¦ outputStream.write(buffer, 0, len); &#125; &#125; catch (Exception e) &#123; log.error("Proxy URL File error, e = &#123;&#125;", e); throw e; &#125; finally &#123; if (inputStream != null) &#123; inputStream.close(); &#125; if (outputStream != null) &#123; outputStream.flush(); outputStream.close(); &#125; if (httpURLConnection != null) &#123; httpURLConnection.disconnect(); &#125; &#125; &#125; æµ‹è¯•123456789101112131415@Controllerpublic class TestController &#123; /** * url æ–‡ä»¶ä»£ç†ä¸­è½¬ * @param response * @param fileName * @param url * @throws IOException */ @RequestMapping("/fnd/proxy/url/file") public void proxyFile(HttpServletResponse response, @RequestParam("fileName") String fileName, @RequestParam("url") String url) throws IOException &#123; FileOperateUtil.proxyUrlFile(response, url, null, fileName); &#125;&#125;]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ADFS å®‰è£…åŠé…ç½®]]></title>
    <url>%2F2019%2F03%2F11%2Fsso%2Fadfs%2Fadfs-install%2F</url>
    <content type="text"><![CDATA[å®‰è£…å‰å‡†å¤‡åœ¨å®‰è£… ADFS ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡å· DCï¼Œå‚è€ƒ ADDS æ´»åŠ¨ç›®å½•å®‰è£…è¯¦è§£ å®‰è£…é…ç½®è¯ä¹¦æœåŠ¡åœ¨ DC ä¸Šå®‰è£… CA æ‰“å¼€æœåŠ¡å™¨ç®¡ç†å™¨ï¼Œç‚¹å‡» â€œæ·»åŠ è§’è‰²å’ŒåŠŸèƒ½â€ ä¿æŒé»˜è®¤ï¼Œå¹¶è¿ç»­ç‚¹å‡»ä¸‰æ¬¡â€œä¸‹ä¸€æ­¥â€ å‹¾é€‰ â€œActive Directory è¯ä¹¦æœåŠ¡â€ï¼Œç„¶åé€‰æ‹©æ·»åŠ æ‰€éœ€çš„åŠŸèƒ½ï¼Œæœ€åç‚¹â€œä¸‹ä¸€æ­¥â€ç»§ç»­ åŠŸèƒ½é€‰æ‹©é¡µé¢ä¿æŒé»˜è®¤ï¼Œè¿ç»­ç‚¹å‡»2æ¬¡â€œä¸‹ä¸€æ­¥â€ å‹¾é€‰ CA ç›¸å…³æœåŠ¡, ä¸€ç›´ç‚¹ä¸‹ä¸€æ­¥ï¼Œæœ€åç‚¹å‡»å®‰è£… å®‰è£…å®Œæˆ é…ç½®è¯ä¹¦æœåŠ¡ CA å®‰è£…å®Œæˆåï¼Œå¦‚å›¾ç‚¹å‡»æç¤ºå›¾æ ‡åï¼Œé€‰æ‹©â€œé…ç½®ç›®æ ‡æœåŠ¡å™¨ä¸Šçš„ Active Directory è¯ä¹¦æœåŠ¡â€ æ ¹æ®å‘å¯¼è¿›è¡Œé…ç½® å‹¾é€‰æ‰€éœ€è¦é…ç½®çš„æœåŠ¡ é€‰æ‹©ä¼ä¸šæ ¹ åˆ›å»ºæ–°çš„ç§é’¥ æŒ‡å®š CA åç§° æŒ‡å®šæœ‰æ•ˆæœŸ æŒ‡å®šæ•°æ®åº“ä½ç½® ç¡®è®¤é…ç½®ä¿¡æ¯ é…ç½®å®Œæˆ éªŒè¯ CA ä»¥ä¸Šç¯å¢ƒå‡†å¤‡å¥½åå°±å¯ä»¥é…ç½® ADFS æœåŠ¡å™¨äº†ã€‚åœ¨é…ç½®å‰æˆ‘ä»¬éœ€è¦ç»™è®¡ç®—æœºæˆ–è€…æŒ‡å®šçš„ç”¨æˆ·æˆ–è€…è®¡ç®—æœºæˆæƒè¯ä¹¦é¢å‘ã€‚ å®‰è£…ADFSæœåŠ¡åœ¨å®‰è£… ADFS ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºå’Œé…ç½®è¯ä¹¦ åˆ›å»ºè¯ä¹¦è´¦æˆ·å‡†å¤‡å¥½åï¼Œç„¶åç”³è¯·è¯ä¹¦ï¼Œå…¶å®æœ‰å¾ˆå¸¸è§çš„ä¸¤ç§æ–¹æ³•ï¼Œç¬¬ä¸€ç§å°±æ˜¯é€šè¿‡iisè¿›è¡Œè¯ä¹¦ç”³è¯·ï¼Œç¬¬äºŒç§é€šè¿‡ mmc æ§åˆ¶å°è¿›è¡Œç”³è¯·ï¼Œè¿™é‡Œä½¿ç”¨IISçš„ç”³è¯·æ–¹æ³•ã€‚ æ‰“å¼€IISç®¡ç†å™¨ï¼Œé€‰æ‹©ã€æœåŠ¡å™¨è¯ä¹¦ã€‘åˆ›å»ºè¯ä¹¦ç”³è¯· ä¿å­˜åˆ°æ¡Œé¢ä¸Šï¼šcert.txt é…ç½®è¯ä¹¦ æœåŠ¡å™¨æµè§ˆå™¨ï¼Œè¾“å…¥ http://127.0.0.1/certsrv/ å¦‚ä¸‹ï¼š é€‰æ‹©ç”³è¯·è¯ä¹¦â€”â€”&gt;é«˜çº§è¯ä¹¦ç”³è¯· é€‰æ‹©ï¼š ä½¿ç”¨ base64 ç¼–ç çš„ CMC æˆ– PKCS #10 æ–‡ä»¶æäº¤ ä¸€ä¸ªè¯ä¹¦ç”³è¯·ï¼Œæˆ–ä½¿ç”¨ base64 ç¼–ç çš„ PKCS #7 æ–‡ä»¶ç»­è®¢è¯ä¹¦ç”³è¯· æ‰“å¼€cert.txt ï¼Œç²˜è´´è¿›å»ï¼Œè¯ä¹¦æ¨¡æ¿é€‰æ‹© webæœåŠ¡å™¨ï¼Œæäº¤ ä¸‹è½½è¯ä¹¦ï¼Œä¿å­˜åˆ°æœ¬åœ°ï¼š å›åˆ°iisç®¡ç†å™¨ï¼Œé€‰æ‹©å®Œæˆè¯ä¹¦ç”³è¯· å°† default web site çš„ https ç»‘å®šè¯ä¹¦æ”¹ä¸ºåˆšæ‰å®Œæˆçš„è¯ä¹¦ é€‰æ‹© default web site , å³é”® ç¼–è¾‘ç»‘å®šï¼Œé€‰æ‹© httpsï¼ˆæ²¡æœ‰åˆ™æ·»åŠ ï¼‰ ï¼Œ ç‚¹å‡»ç¼–è¾‘ï¼Œé€‰æ‹© ssl è¯ä¹¦:ï¼ˆ è¿™ä¸ªè¯ä¹¦åœ¨å®‰è£…adfsæ—¶ä½¿ç”¨è¯¥è¯ä¹¦ï¼‰ å¼€å§‹å®‰è£… æ‰“å¼€æœåŠ¡å™¨ç®¡ç†å™¨ï¼Œç‚¹å‡» â€œæ·»åŠ è§’è‰²å’ŒåŠŸèƒ½â€ ä¿æŒé»˜è®¤ï¼Œå¹¶è¿ç»­ç‚¹å‡»ä¸‰æ¬¡â€œä¸‹ä¸€æ­¥â€ å‹¾é€‰ â€œActive Directory Federation Servicesâ€ å®‰è£…æœåŠ¡è§’è‰² åŠŸèƒ½é€‰æ‹©é¡µé¢ä¿æŒé»˜è®¤ï¼Œè¿ç»­ç‚¹å‡»2æ¬¡â€œä¸‹ä¸€æ­¥â€ å®‰è£… å®‰è£…å®Œæˆ ADFS å®‰è£…å®Œæˆåï¼Œå¦‚å›¾ç‚¹å‡»æç¤ºå›¾æ ‡åï¼Œé€‰æ‹©â€œåœ¨æ­¤æœåŠ¡å™¨ä¸Šé…ç½®è”åˆèº«ä»½éªŒè¯æœåŠ¡â€ åŠŸèƒ½é€‰æ‹©é¡µé¢ä¿æŒé»˜è®¤ï¼Œè¿ç»­ç‚¹å‡»2æ¬¡â€œä¸‹ä¸€æ­¥â€ é€‰æ‹©è¯ä¹¦(ä¸æ˜¯å‰é¢åˆ›å»ºçš„è¯ä¹¦)ï¼Œå¡«å†™æ˜¾ç¤ºçš„åç§° é€‰æ‹© adfs æœåŠ¡å¸å· æŒ‡å®šé…ç½®æ•°æ®åº“ ä¸‹ä¸€æ­¥ é…ç½® é…ç½®å®Œæˆ è‡³æ­¤ ADFS å®‰è£…é…ç½®å®Œæˆ å‚è€ƒWindows Server 2016 å®‰è£…åŠé…ç½® ADFS 4.0 Server2012 ä¸‹ éƒ¨ç½²adfs IFD]]></content>
      <categories>
        <category>SSO</category>
        <category>ADFS</category>
      </categories>
      <tags>
        <tag>SSO</tag>
        <tag>ADFS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ADDS æ´»åŠ¨ç›®å½•å®‰è£…è¯¦è§£]]></title>
    <url>%2F2019%2F03%2F09%2Fsso%2Fadfs%2Fadds-install%2F</url>
    <content type="text"><![CDATA[å®‰è£…å‰å‡†å¤‡ç¡®ä¿åŸŸæ§åˆ¶å™¨ (DC) çš„è®¡ç®—æœºåç¬¦åˆä¼ä¸šå‘½åè§„èŒƒï¼Œå› ä¸º AD å®‰è£…å®Œæˆåå†æ›´æ”¹ DC è®¡ç®—æœºç›¸å¯¹å¤æ‚è€Œä¸”å­˜åœ¨é£é™©ã€‚DC éœ€è¦ä½¿ç”¨å›ºå®šçš„é™æ€IPåœ°å€ï¼Œå¹¶ä¸”æŠŠDNSè®¾ç½®æŒ‡å‘æœ¬æœºIPã€‚ è¿™å°ç”µè„‘ (å³é”®) â€“&gt; å±æ€§ï¼Œæ›´æ”¹è®¾ç½®ï¼š ç½‘ç»œ (å³é”®) â€“&gt; å±æ€§ â€“&gt; ä»¥å¤ªç½‘ â€“&gt; å±æ€§ â€“&gt; Internet åè®®ç‰ˆæœ¬ 4ï¼ˆTCP/IPV4ï¼‰ â€“&gt; å±æ€§ å¼€å§‹å®‰è£… æ‰“å¼€æœåŠ¡å™¨ç®¡ç†å™¨ï¼Œç‚¹å‡» â€œæ·»åŠ è§’è‰²å’ŒåŠŸèƒ½â€ ä¿æŒé»˜è®¤ï¼Œå¹¶è¿ç»­ç‚¹å‡»ä¸‰æ¬¡â€œä¸‹ä¸€æ­¥â€ã€‚ å‹¾é€‰ â€œActiveDirectoryåŸŸæœåŠ¡â€ï¼Œç„¶åé€‰æ‹©æ·»åŠ æ‰€éœ€çš„åŠŸèƒ½ï¼Œæœ€åç‚¹â€œä¸‹ä¸€æ­¥â€ç»§ç»­ã€‚ åŠŸèƒ½é€‰æ‹©é¡µé¢ä¿æŒé»˜è®¤ï¼Œè¿ç»­ç‚¹å‡»2æ¬¡â€œä¸‹ä¸€æ­¥â€ã€‚ å‹¾é€‰è‡ªåŠ¨é‡å¯æœåŠ¡å™¨ï¼Œç‚¹å‡»â€œå®‰è£…â€ã€‚ å®ŒæˆADDSå®‰è£…åï¼Œå¦‚å›¾ç‚¹å‡»æç¤ºå›¾æ ‡åï¼Œé€‰æ‹©â€œå°†æ­¤æœåŠ¡å™¨æå‡ä¸ºåŸŸæ§åˆ¶å™¨â€ã€‚ ç”±äºè¿™æ˜¯ç¬¬ä¸€å°åŸŸæ§åˆ¶å™¨(DC)ï¼Œä¹Ÿå«æ—æ ¹åŸŸã€‚é€‰æ‹©â€œæ·»åŠ æ–°æ—â€ï¼Œç„¶åè¾“å…¥æ ¹åŸŸåã€‚ é€‰æ‹©æ—å’ŒåŸŸåŠŸèƒ½çº§åˆ«ï¼Œå‹¾é€‰DNS(ADéœ€è¦é«˜åº¦é›†æˆDNS)ï¼Œå¹¶è¾“å…¥ç›®å½•è¿˜åŸæ¨¡å¼å¯†ç ã€‚ ç”±äºç°åœ¨è¿˜æ²¡æœ‰DNSæœåŠ¡å™¨ï¼Œæ‰€ä»¥ä¼šæç¤ºæ— æ³•åˆ›å»ºå§”æ´¾ã€‚ç›´æ¥â€œä¸‹ä¸€æ­¥â€ã€‚ NetBIOSåä»¥åŠADDSæ•°æ®åº“ã€æ—¥å¿—ã€Sysvolä¿å­˜ä½ç½®ï¼Œå¦‚æœä¼ä¸šæ²¡æœ‰ç‰¹æ®Šè¦æ±‚ï¼Œä¸€èˆ¬ä¿æŒé»˜è®¤å³å¯ã€‚ æ£€æŸ¥é…ç½®æ— è¯¯åç‚¹å‡»â€œä¸‹ä¸€æ­¥â€ï¼Œç„¶åç‚¹å‡»â€œå®‰è£…â€ï¼Œç­‰å¾…å®‰è£…å®Œæˆåé‡å¯å³å¯ã€‚ è‡³æ­¤å®Œæˆ ActiveDirectory çš„å…¨éƒ¨å®‰è£…ã€‚å·²ç»å¯ä»¥å¯¹å¤–æä¾›æœåŠ¡äº†ã€‚ å‚è€ƒActive Directoryç®¡ç†ä¹‹ä¸€:æ´»åŠ¨ç›®å½•å®‰è£…è¯¦è§£]]></content>
      <categories>
        <category>SSO</category>
        <category>ADFS</category>
      </categories>
      <tags>
        <tag>SSO</tag>
        <tag>ADFS</tag>
        <tag>ADDS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[[è½¬è½½] è·å–è¢«ä»£ç†ç±»çš„çœŸå®ç±»]]></title>
    <url>%2F2019%2F03%2F07%2FJava%2Fspring%2Ftarget-class%2F</url>
    <content type="text"><![CDATA[ç‰ˆæƒè¯´æ˜ï¼Œæ–‡ç« è½¬è½½è‡ª Spring ç¬”è®°-è·å–è¢«ä»£ç†çš„çœŸå®ç±» å¯¹ä¸€ä¸ª Autowired è¿›æ¥çš„ç±»è°ƒç”¨ getClassï¼Œå‘ç°å¾—åˆ°çš„ç±»æ˜¯: com.xxx.search.provider.service.SearchServiceImpl$$EnhancerBySpringCGLIB$$129db519ï¼Œä¸€çœ‹å°±ä¸æ˜¯æ­£ç»ç±»ã€‚ä»åå­—ä¸­å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªæ˜¯è¢«ä»£ç†åçš„ç±»ï¼Œå¯èƒ½å› ä¸ºè¿™ä¸ªç±»è¢«AOPäº†å§ã€‚ä½†æ˜¯æˆ‘åœ¨åå°„æ“ä½œæ˜¯éœ€è¦åŸå§‹çš„ç±»çš„ä¿¡æ¯ï¼Œè¦å¦‚ä½•å¾—åˆ°å‘¢ï¼Ÿ org.springframework.aop ä¸‹æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„æ¥å£: TargetClassAware, è¿™ä¸ªæ¥å£è¡¨ç¤ºç›®å‰è¿™ä¸ªç±»æ˜¯è¢«ä»£ç†çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ¤æ–­ä¸€ä¸ªå®ä¾‹æ˜¯å¦æ˜¯ TargetClassAware çš„å®ä¾‹æ¥åˆ¤æ–­ä»–æ˜¯å¦æ˜¯ä¸€ä¸ªä»£ç†ç±»ã€‚è€Œä¸” TargetClassAware æ¥å£æä¾›äº† getTargetClass æ–¹æ³•æ¥è·å–çœŸå®ç±»ã€‚å¯ä»¥è¿™ä¹ˆç”¨ï¼š 123if (aInstance instanceof TargetClassAware) &#123; aInstance.getTargetClass();&#125; ä¸è¿‡æ›´æ¨èçš„åšæ³•æ˜¯ä½¿ç”¨ org.springframework.aop.support.AopUtils æä¾›çš„ getTargetClass æ–¹æ³•æ¥è·å–çœŸå®ç±»ã€‚å¯ä»¥çœ‹çœ‹å…¶æºç ï¼š 12345678910111213public static Class&lt;?&gt; getTargetClass(Object candidate) &#123; Assert.notNull(candidate, "Candidate object must not be null"); Class result = null; if(candidate instanceof TargetClassAware) &#123; result = ((TargetClassAware)candidate).getTargetClass(); &#125; if(result == null) &#123; result = isCglibProxy(candidate)?candidate.getClass().getSuperclass():candidate.getClass(); &#125; return result;&#125; ä»£ç é¦–å…ˆåˆ¤æ–­å½“å‰ç±»æ˜¯å¦æ˜¯ TargetClassAware çš„å®ç°ï¼Œå¦‚æœæ˜¯ï¼Œè°ƒç”¨ getTargetClassï¼Œæ–¹æ³•è¿˜åˆ¤æ–­å½“å‰ç±»æ˜¯å¦æ˜¯ CglibProxyï¼Œå¦‚æœæ˜¯åŸºäº cglib çš„ä»£ç†ç±»ï¼Œå› ä¸ºæ˜¯åŸºäºç»§æ‰¿æ¥å®ç°ä»£ç†ï¼Œæ‰€ä»¥è·å–çˆ¶ç±»å°±æ˜¯çœŸå®ç±»äº†ã€‚ å‚è€ƒèµ„æ–™ java - Obtain real Class object for Spring bean - Stack Overflow AopUtils)]]></content>
      <categories>
        <category>Java</category>
        <category>Spring</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[oracle cloud å¦‚ä½•è·å–å›¾ç‰‡ url]]></title>
    <url>%2F2019%2F02%2F20%2Foracle-cloud%2Fhow-to-get-image-url%2F</url>
    <content type="text"><![CDATA[ä»¥è·å–ç‰©æ–™å›¾ç‰‡ url ä½œä¸ºä¾‹å­ 123456789101112(SELECT (decode(datatype_code, 'FILE', (:p_host || '/cs/idcplg?IdcService=GET_FILE&amp;dID=') || dm_version_number, 'WEB_PAGE', url)) AS image FROM fnd_attached_documents d, fnd_documents_vl dv WHERE d.document_id = d.document_id AND d.entity_name = 'ITEM_ENTITY' AND d.pk1_value = to_char(esi.organization_id) AND d.pk2_value = to_char(esi.inventory_item_id) AND rownum = 1) AS item_photo å…¶ä¸­ p_host ä¸º cloud çš„ä¸»åŸŸå å…¶ä»–ç±»å‹çš„å›¾ç‰‡ url å¯ä»¥é€šè¿‡å˜æ¢ d.entity_name = &#39;ITEM_ENTITY&#39; è¿›è¡ŒæŸ¥æ‰¾]]></content>
      <categories>
        <category>Oracle Cloud</category>
      </categories>
      <tags>
        <tag>Oracle Cloud</tag>
        <tag>attachment</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•è·å– oracle cloud çš„ PO çš„ shipping method]]></title>
    <url>%2F2019%2F02%2F20%2Foracle-cloud%2Fpo%2Fhow-to-get-shipping-method%2F</url>
    <content type="text"><![CDATA[ç‰ˆæœ¬ä¿¡æ¯ Oracle Cloud Application 19B (11.13.19.04.0) example è·å– po å¤´ä¸Šçš„ shipping method 12345678910111213SELECT po_bip_helper.get_shipping_method(carrierpartyname.party_name, modeoftransportlookuppeo.meaning, servicelevellookuppeo.meaning) AS shippingmethod FROM wsh_carriers carrier, hz_parties carrierpartyname, fnd_lookups modeoftransportlookuppeo, fnd_lookups servicelevellookuppeo, po_headers_all header WHERE (header.mode_of_transport = modeoftransportlookuppeo.lookup_code(+) AND modeoftransportlookuppeo.lookup_type(+) = 'WSH_MODE_OF_TRANSPORT') AND (header.service_level = servicelevellookuppeo.lookup_code(+) AND servicelevellookuppeo.lookup_type(+) = 'WSH_SERVICE_LEVELS') AND header.carrier_id = carrier.carrier_id(+) AND carrier.carrier_id = carrierpartyname.party_id(+) AND header.segment1 = '20000028' è·å– po è¡Œä¸Šçš„ shipping method 1234567891011121314SELECT po_bip_helper.get_shipping_method(carrierpartyname.party_name, modeoftransportlookuppeo.meaning, servicelevellookuppeo.meaning) AS shippingmethod FROM wsh_carriers carrier, hz_parties carrierpartyname, fnd_lookups modeoftransportlookuppeo, fnd_lookups servicelevellookuppeo, po_line_locations_all plla WHERE (plla.mode_of_transport = modeoftransportlookuppeo.lookup_code(+) AND modeoftransportlookuppeo.lookup_type(+) = 'WSH_MODE_OF_TRANSPORT') AND (plla.service_level = servicelevellookuppeo.lookup_code(+) AND servicelevellookuppeo.lookup_type(+) = 'WSH_SERVICE_LEVELS') AND plla.carrier_id = carrier.carrier_id(+) AND carrier.carrier_id = carrierpartyname.party_id(+) AND plla.po_header_id = pla.po_header_id AND plla.po_line_id = pla.po_line_id]]></content>
      <categories>
        <category>Oracle Cloud</category>
        <category>PO</category>
      </categories>
      <tags>
        <tag>Oracle Cloud</tag>
        <tag>PO</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•è·å– oracle cloud çš„ Match Approval Level]]></title>
    <url>%2F2019%2F02%2F20%2Foracle-cloud%2Fhow-to-get-match-approval-level%2F</url>
    <content type="text"><![CDATA[ç‰ˆæœ¬ä¿¡æ¯Oracle Cloud Application Revision 13.18.10 (11.13.18.10.0) Title Description Oracle Application Development Framework JDEVADF_11.1.1.9.2ADF-REL131810-PROD-BP_GENERIC_181116.1437.7206 Oracle Middleware Extensions for Applications ATGPF_PT.REL13.18.10_GENERIC_181113.1603.REL13BP16.7 Database Compatibility TRUE (REL13BP16.7) æç¤º When Receipt Required Flag is N, then Match Approval level is 2 way. When Receipt Required Flag is Y and Inspection Required Flag is N, then Match Approval Level is 3 way. When Receipt Required Flag is Y and Inspection Required Flag is Y, then Match Approval Level is 4 way. 2-way ä¸éœ€è¦æ£€æµ‹æ”¶è´§ receipt_required_flag ä¸º N 3-way éœ€è¦åœ¨ match invoice çš„æ—¶å€™éªŒæ”¶è´§ æ‰€ä»¥ receipt_required_flag ä¸ºY , inspection_required_flag ä¸º N 4-way è¿˜è¦æ£€æµ‹éªŒè´§ æ‰€ä»¥ ä¸¤ä¸ªéƒ½ä¸º Y SQL123456789decode(poz_supplier_sites_v.receipt_required_flag, 'Y', decode(poz_supplier_sites_v.inspection_required_flag, 'Y', '4-Way', 'N', '3-Way'), 'N', '2-Way') AS matching_level å‚è€ƒhttp://j178.mtgbb.com/?p=713]]></content>
      <categories>
        <category>Oracle Cloud</category>
      </categories>
      <tags>
        <tag>Oracle Cloud</tag>
        <tag>Match Approval Level</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gitlab æ›´æ–° fork çš„ä»£ç ]]></title>
    <url>%2F2019%2F02%2F18%2Fgit%2Fgitlab-update-fork%2F</url>
    <content type="text"><![CDATA[æ“ä½œæ­¥éª¤ å…ˆç¡®å®šæ˜¯å¦å»ºç«‹äº†ä¸»ä»“åº“çš„è¿œç¨‹æ•°æ®æº: 1git remote -v æˆ‘ä»¬å‘ç°åªæœ‰æˆ‘ä»¬è‡ªå·±çš„ä¸¤ä¸ªæº(fetch å’Œ push)ï¼Œé‚£è¿™ä¸ªæ—¶å€™å°±éœ€è¦æ·»åŠ ä¸»ä»“åº“çš„æºã€‚ æ·»åŠ ä¸»ä»“åº“çš„æº 1git remote add upstream URL upstream : éšä¾¿èµ·çš„åå­— URLï¼š forkçš„ä»“åº“åœ°å€ å¦‚æœæƒ³åˆ é™¤remoteçš„upstreamæ ‡ç­¾ï¼Œåˆ™å¯ä»¥è¿è¡Œï¼š git remote rm upstream æ›´æ–°ä»£ç  123git fetch upstreamgit checkout mastergit merge upstream/master å‚è€ƒhttps://blog.csdn.net/lhh1113/article/details/71038154]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JSTACK åˆ†æçº¿ç¨‹]]></title>
    <url>%2F2019%2F02%2F11%2FJava%2Fjstack-cpu%2F</url>
    <content type="text"><![CDATA[æŸ¥æ‰¾ tomcat çº¿ç¨‹å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ‰¾ï¼š jps ä¸€èˆ¬Bootstrapéƒ½æ˜¯tomcatçš„ ps -ef |grep tomcat jstack dump å‡ºçº¿ç¨‹1jstack 23524 &gt; jstack.txt æŸ¥çœ‹ tomcat å†…éƒ¨çº¿ç¨‹1top -H -p 23524 ï¼ˆshift+p æŒ‰ cpu æ’åºï¼Œshift+m æŒ‰å†…å­˜æ’åºï¼‰ å°†PIDæ¢ç®—æˆ16è¿›åˆ¶ï¼Œç„¶ååœ¨jstack.txtæŸ¥æ‰¾nid=0xæ¢ç®—åçš„æ•°1cat jstack.txt | grep 'nid=0x5be9' -B 5 -A 40 å‘ç°é¢‘ç¹çš„GCï¼Œæ¨æµ‹æ˜¯ä¸æ˜¯æ•°æ®åº“åœ¨é¢‘ç¹çš„å¼€å…³å¯¼è‡´ï¼Œå› æ­¤æ£€æŸ¥ tomcat jndiæ˜¯å¦æ²¡é…ç½®æ•°æ®åº“è¿æ¥æ± å‚æ•° åŠ ä¸Šè¿æ¥æ± å‚æ•° å‚è€ƒjstackåˆ†æcpuè´Ÿè½½è¿‡é«˜åŸå› ï¼š https://blog.csdn.net/u010248330/article/details/80080605 jstack: Javaå ç”¨é«˜CPUåˆ†æä¹‹- GC Task Thread: https://blog.csdn.net/chenxiusheng/article/details/74007040]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Jstack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MyBatis ä¼ å…¥å‚æ•°ä¸º Listã€Arrayã€Map]]></title>
    <url>%2F2019%2F02%2F08%2FJava%2FMyBatis%2Fmybatis-collection-params%2F</url>
    <content type="text"><![CDATA[foreach æ ‡ç­¾ç®€å•ä»‹ç»ä¸»è¦ç”¨äºåœ¨SQLè¯­å¥ä¸­æ„å»ºå¾ªç¯ä½“ æ ‡ç­¾çš„ä¸»è¦å±æ€§æœ‰ itemï¼Œindexï¼Œcollectionï¼Œopenï¼Œseparatorï¼Œcloseã€‚ å±æ€§ æè¿° item é›†åˆä¸­æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡Œè¿­ä»£æ—¶çš„åˆ«åã€‚è¯¥å‚æ•°ä¸ºå¿…é€‰ã€‚ index æŒ‡å®šä¸€ä¸ªåå­—ï¼Œç”¨äºè¡¨ç¤ºåœ¨è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œæ²¡é”™è¿­ä»£åˆ°çš„ä½ç½® open è¡¨ç¤ºè¯¥è¯­å¥ä»¥ä»€ä¹ˆå¼€å§‹ close è¡¨ç¤ºè¯¥è¯­å¥ä»¥ä»€ä¹ˆç»“æŸ separator è¡¨ç¤ºåœ¨æ¯æ¬¡è¿›è¡Œè¿­ä»£ä¹‹é—´ä»¥ä»€ä¹ˆç¬¦å·ä½œä¸ºåˆ†éš”ç¬¦ collection å±æ€§æ˜¯åœ¨ä½¿ç”¨foreachçš„æ—¶å€™æœ€å…³é”®çš„ä¹Ÿæ˜¯æœ€å®¹æ˜“å‡ºé”™çš„ï¼Œè¯¥å±æ€§æ˜¯å¿…é¡»æŒ‡å®šçš„ï¼Œä½†æ˜¯åœ¨ä¸åŒæƒ…å†µä¸‹ï¼Œè¯¥å±æ€§çš„å€¼æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸»è¦æœ‰ä¸€ä¸‹3ç§æƒ…å†µï¼š (1) å¦‚æœä¼ å…¥çš„æ˜¯å•å‚æ•°ä¸”å‚æ•°ç±»å‹æ˜¯ä¸€ä¸ªListçš„æ—¶å€™ï¼Œcollectionå±æ€§å€¼ä¸ºlist .(2) å¦‚æœä¼ å…¥çš„æ˜¯å•å‚æ•°ä¸”å‚æ•°ç±»å‹æ˜¯ä¸€ä¸ªarrayæ•°ç»„çš„æ—¶å€™ï¼Œcollectionçš„å±æ€§å€¼ä¸ºarray .(3) å¦‚æœä¼ å…¥çš„å‚æ•°æ˜¯å¤šä¸ªçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦æŠŠå®ƒä»¬å°è£…æˆä¸€ä¸ªMapäº†ï¼Œå½“ç„¶å•å‚æ•°ä¹Ÿå¯ä»¥å°è£…æˆmapï¼Œå®é™…ä¸Šå¦‚æœä½ åœ¨ä¼ å…¥å‚æ•°çš„æ—¶å€™ï¼Œåœ¨MyBatisé‡Œé¢ä¹Ÿæ˜¯ä¼šæŠŠå®ƒå°è£…æˆä¸€ä¸ªMapçš„ï¼Œmapçš„keyå°±æ˜¯å‚æ•°åï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™collectionå±æ€§å€¼å°±æ˜¯ä¼ å…¥çš„Listæˆ–arrayå¯¹è±¡åœ¨è‡ªå·±å°è£…çš„mapé‡Œé¢çš„key.(4) å¦‚æœå‚æ•°ä½¿ç”¨äº†@Paramæ³¨è§£ï¼Œé‚£å¿…é¡»æ˜¯å‚æ•°å ç¤ºä¾‹å»ºè¡¨è¯­å¥1234567891011121314151617181920212223242526272829DROP TABLE IF EXISTS `XXGL_CODE_COMBINATIONS`;CREATE TABLE `XXGL_CODE_COMBINATIONS`( `COMBINATION_ID` bigint AUTO_INCREMENT NOT NULL COMMENT 'è¡¨IDï¼Œä¸»é”®ï¼Œä¾›å…¶ä»–è¡¨åšå¤–é”®' , `CODE_COMBINATION_ID` bigint NOT NULL , `ENABLED_FLAG` varchar(1) NOT NULL COMMENT 'Y/N' , `ACCOUNT_TYPE` varchar(10) NOT NULL COMMENT 'è´¦æˆ·ç±»å‹' , `SEGMENT1` varchar(25) NULL COMMENT 'æ®µå€¼1', `SEGMENT2` varchar(25) NULL COMMENT 'æ®µå€¼2', `SEGMENT3` varchar(25) NULL COMMENT 'æ®µå€¼3', `SEGMENT4` varchar(25) NULL COMMENT 'æ®µå€¼4', `SEGMENT5` varchar(25) NULL COMMENT 'æ®µå€¼5', `SEGMENT6` varchar(25) NULL COMMENT 'æ®µå€¼6', `SEGMENT7` varchar(25) NULL COMMENT 'æ®µå€¼7', `SEGMENT8` varchar(25) NULL COMMENT 'æ®µå€¼8', `SEGMENT9` varchar(25) NULL COMMENT 'æ®µå€¼9', `SEGMENT10` varchar(25) NULL COMMENT 'æ®µå€¼10', `SEGMENT11` varchar(25) NULL COMMENT 'æ®µå€¼11', `SEGMENT12` varchar(25) NULL COMMENT 'æ®µå€¼12', `SEGMENT13` varchar(25) NULL COMMENT 'æ®µå€¼13', `SEGMENT14` varchar(25) NULL COMMENT 'æ®µå€¼14', `SEGMENT15` varchar(25) NULL COMMENT 'æ®µå€¼15', `SEGMENT16` varchar(25) NULL COMMENT 'æ®µå€¼16', `SEGMENT17` varchar(25) NULL COMMENT 'æ®µå€¼17', `SEGMENT18` varchar(25) NULL COMMENT 'æ®µå€¼18', PRIMARY KEY (`COMBINATION_ID`), UNIQUE KEY `XXGL_CODE_COMBINATIONS_U1` (`COMBINATION_ID`), KEY `XXGL_CODE_COMBINATIONS_N1` (`CODE_COMBINATION_ID`)) ENGINE=InnoDB AUTO_INCREMENT=1000 DEFAULT CHARSET=utf8; æµ‹è¯•æ•°æ®1234567891011121314151617181920212223242526272829303132333435363738394041424344454647INSERT INTO `XXGL_CODE_COMBINATIONS` ( `CODE_COMBINATION_ID`, `ENABLED_FLAG`, `ACCOUNT_TYPE`, `SEGMENT1`, `SEGMENT2`, `SEGMENT3`, `SEGMENT4`, `SEGMENT5`, `SEGMENT6`, `SEGMENT7`, `SEGMENT8`, `SEGMENT9`, `SEGMENT10`, `SEGMENT11`, `SEGMENT12`, `SEGMENT13`, `SEGMENT14`, `SEGMENT15`, `SEGMENT16`, `SEGMENT17`, `SEGMENT18`)VALUES ( 300000003238305, 'Y', 'E', '050', '0', '71205', 'S101005', '50010', '1101', 'I101', '0', '0', '0', '0', '0', NULL, NULL, NULL, NULL, NULL, NULL ); å®ä½“ç±»ï¼ˆCodeCombinations.javaï¼‰1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980import javax.persistence.GeneratedValue;import javax.persistence.Id;import org.hibernate.validator.constraints.Length;import javax.persistence.Table;import javax.validation.constraints.NotNull;/** * Created by xiaofeng.he on 2018/03/08 * å¸å·ç»„åˆDTO */@Table(name = "XXGL_CODE_COMBINATIONS")public class CodeCombinations &#123; @Id @GeneratedValue private Long combinationId; // è¡¨IDï¼Œä¸»é”®ï¼Œä¾›å…¶ä»–è¡¨åšå¤–é”® @NotNull private Long codeCombinationId; // ERPä¸­CODE_COMBINATION_ID private String accountType; private String enabledFlag; @Length(max = 25) private String segment1; @Length(max = 25) private String segment2; @Length(max = 25) private String segment3; @Length(max = 25) private String segment4; @Length(max = 25) private String segment5; @Length(max = 25) private String segment6; @Length(max = 25) private String segment7; @Length(max = 25) private String segment8; @Length(max = 25) private String segment9; @Length(max = 25) private String segment10; @Length(max = 25) private String segment11; @Length(max = 25) private String segment12; @Length(max = 25) private String segment13; @Length(max = 25) private String segment14; @Length(max = 25) private String segment15; @Length(max = 25) private String segment16; @Length(max = 25) private String segment17; @Length(max = 25) private String segment18; // getter setter...&#125; java mapper123456789101112131415161718192021222324252627282930import org.apache.ibatis.annotations.Param;/** * Created by xiaofeng.he on 2018/03/08 * è´¦æˆ·ç»„åˆmapper */public interface CodeCombinationsMapper &#123; /** * æ ¹æ®å¤šä¸ª segment value æŸ¥è¯¢å”¯ä¸€ * @param segmentValues * @return */ CodeCombinations selectOneBySegmentArray(@Param("segmentValues") String[] segmentValues); /** * æ ¹æ®å¤šä¸ª segment value æŸ¥è¯¢å”¯ä¸€ * @param segmentValues * @return */ CodeCombinations selectOneBySegmentList(List&lt;String&gt; segmentValues); /** * æ ¹æ®å¤šä¸ª segment value æŸ¥è¯¢å”¯ä¸€ * @param params * @return */ CodeCombinations selectOneBySegmentMap(Map&lt;String, Object&gt; params);&#125; xml mapper1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" &gt;&lt;mapper namespace="xxx.mapper.CodeCombinationsMapper"&gt; &lt;resultMap id="BaseResultMap" type="xxx.dto.CodeCombinations"&gt; &lt;result column="COMBINATION_ID" property="combinationId" jdbcType="DECIMAL" /&gt; &lt;result column="CODE_COMBINATION_ID" property="codeCombinationId" jdbcType="DECIMAL" /&gt; &lt;result column="ACCOUNT_TYPE" property="accountType" jdbcType="VARCHAR" /&gt; &lt;result column="ENABLED_FLAG" property="enabledFlag" jdbcType="VARCHAR" /&gt; &lt;result column="SEGMENT1" property="segment1" jdbcType="VARCHAR" /&gt; &lt;result column="SEGMENT2" property="segment2" jdbcType="VARCHAR" /&gt; &lt;result column="SEGMENT3" property="segment3" jdbcType="VARCHAR" /&gt; &lt;result column="SEGMENT4" property="segment4" jdbcType="VARCHAR" /&gt; &lt;result column="SEGMENT5" property="segment5" jdbcType="VARCHAR" /&gt; &lt;result column="SEGMENT6" property="segment6" jdbcType="VARCHAR" /&gt; &lt;result column="SEGMENT7" property="segment7" jdbcType="VARCHAR" /&gt; &lt;result column="SEGMENT8" property="segment8" jdbcType="VARCHAR" /&gt; &lt;result column="SEGMENT9" property="segment9" jdbcType="VARCHAR" /&gt; &lt;result column="SEGMENT10" property="segment10" jdbcType="VARCHAR" /&gt; &lt;result column="SEGMENT11" property="segment11" jdbcType="VARCHAR" /&gt; &lt;result column="SEGMENT12" property="segment12" jdbcType="VARCHAR" /&gt; &lt;result column="SEGMENT13" property="segment13" jdbcType="VARCHAR" /&gt; &lt;result column="SEGMENT14" property="segment14" jdbcType="VARCHAR" /&gt; &lt;result column="SEGMENT15" property="segment15" jdbcType="VARCHAR" /&gt; &lt;result column="SEGMENT16" property="segment16" jdbcType="VARCHAR" /&gt; &lt;result column="SEGMENT17" property="segment17" jdbcType="VARCHAR" /&gt; &lt;result column="SEGMENT18" property="segment18" jdbcType="VARCHAR" /&gt; &lt;/resultMap&gt; &lt;!--Array:forech ä¸­çš„ collection å±æ€§ç±»å‹æ˜¯ Array, collection çš„å€¼å¿…é¡»æ˜¯:array, item çš„å€¼å¯ä»¥éšæ„, mapper æ¥å£ä¸­å‚æ•°åå­—éšæ„ --&gt; &lt;select id="selectOneBySegmentArray" resultMap="BaseResultMap"&gt; select c.* from XXGL_CODE_COMBINATIONS c &lt;where&gt; and c.ENABLED_FLAG = 'Y' &lt;choose&gt; &lt;when test="segmentValues"&gt; &lt;!-- ä½¿ç”¨äº†@Param åcollectionä¸èƒ½å¡«arrayï¼Œè¦å¡«å†™åˆ«å --&gt; &lt;foreach collection="segmentValues" item="segmentValue" index="index"&gt; and c.SEGMENT$&#123;index+1&#125; = #&#123;segmentValue&#125; &lt;/foreach&gt; &lt;/when&gt; &lt;otherwise&gt; and 1=2 &lt;/otherwise&gt; &lt;/choose&gt; &lt;/where&gt; &lt;/select&gt; &lt;!--List:forech ä¸­çš„ collection å±æ€§ç±»å‹æ˜¯ List, collection çš„å€¼å¿…é¡»æ˜¯:list, item çš„å€¼å¯ä»¥éšæ„, mapper æ¥å£ä¸­å‚æ•°åå­—éšæ„ --&gt; &lt;select id="selectOneBySegmentList" resultMap="BaseResultMap"&gt; select c.* from XXGL_CODE_COMBINATIONS c &lt;where&gt; and c.ENABLED_FLAG = 'Y' &lt;choose&gt; &lt;when test="list"&gt; &lt;foreach collection="list" item="segmentValue" index="index"&gt; and c.SEGMENT$&#123;index+1&#125; = #&#123;segmentValue&#125; &lt;/foreach&gt; &lt;/when&gt; &lt;otherwise&gt; and 1=2 &lt;/otherwise&gt; &lt;/choose&gt; &lt;/where&gt; &lt;/select&gt; &lt;!--Map:ä¸å•å• forech ä¸­çš„ collection å±æ€§æ˜¯ map.key,å…¶å®ƒæ‰€æœ‰å±æ€§éƒ½æ˜¯ map.key, æ¯”å¦‚ä¸‹é¢çš„ enabledFlag --&gt; &lt;select id="selectOneBySegmentMap" resultMap="BaseResultMap"&gt; select c.* from XXGL_CODE_COMBINATIONS c &lt;where&gt; and c.ENABLED_FLAG = #&#123;enabledFlag&#125; &lt;choose&gt; &lt;when test="segmentArray"&gt; &lt;foreach collection="segmentArray" item="segmentValue" index="index"&gt; and c.SEGMENT$&#123;index+1&#125; = #&#123;segmentValue&#125; &lt;/foreach&gt; &lt;/when&gt; &lt;otherwise&gt; and 1=2 &lt;/otherwise&gt; &lt;/choose&gt; &lt;choose&gt; &lt;when test="segmentList"&gt; &lt;foreach collection="segmentList" item="segmentValue" index="index"&gt; /* 2 */ and c.SEGMENT$&#123;index+1&#125; = #&#123;segmentValue&#125; &lt;/foreach&gt; &lt;/when&gt; &lt;otherwise&gt; and 1=2 &lt;/otherwise&gt; &lt;/choose&gt; &lt;/where&gt; &lt;/select&gt;&lt;/mapper&gt; æµ‹è¯• controller123456789101112131415161718192021222324252627282930313233import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.ResponseBody;import xxx.dto.CodeCombinations;import xxx.mapper.CodeCombinationsMapper;import java.util.Arrays;import java.util.HashMap;import java.util.List;import java.util.Map;@Controllerpublic class TestController &#123; @Autowired private CodeCombinationsMapper codeCombinationsMapper; @GetMapping("/test/code/combination/selectBySegments") @ResponseBody public List&lt;CodeCombinations&gt; test() &#123; String[] a = &#123;"050", "0", "71205", "S101005", "50010", "1101", "I101"&#125;; CodeCombinations codeCombinations1 = codeCombinationsMapper.selectOneBySegments(a); CodeCombinations codeCombinations2 = codeCombinationsMapper.selectOneBySegmentList(Arrays.asList(a)); Map&lt;String, Object&gt; params = new HashMap&lt;&gt;(); params.put("enabledFlag", "Y"); params.put("segmentArray", a); params.put("segmentList", Arrays.asList(a)); CodeCombinations codeCombinations3 = codeCombinationsMapper.selectOneBySegmentMap(params); return Arrays.asList(codeCombinations1, codeCombinations2, codeCombinations3); &#125;&#125; æµ‹è¯•ç»“æœlog 12345678910112019-02-08 22:40:40.523 DEBUG [10001] [e5c47fa7c79b461a806c2d6135d485c2] xxx.mapper.CodeCombinationsMapper.selectOneBySegments - ==&gt; Preparing: select c.* from XXGL_CODE_COMBINATIONS c WHERE c.ENABLED_FLAG = 'Y' and c.SEGMENT1 = ? and c.SEGMENT2 = ? and c.SEGMENT3 = ? and c.SEGMENT4 = ? and c.SEGMENT5 = ? and c.SEGMENT6 = ? and c.SEGMENT7 = ? 2019-02-08 22:40:40.524 DEBUG [10001] [e5c47fa7c79b461a806c2d6135d485c2] xxx.mapper.CodeCombinationsMapper.selectOneBySegments - ==&gt; Parameters: 050(String), 0(String), 71205(String), S101005(String), 50010(String), 1101(String), I101(String)2019-02-08 22:40:40.532 DEBUG [10001] [e5c47fa7c79b461a806c2d6135d485c2] xxx.mapper.CodeCombinationsMapper.selectOneBySegments - &lt;== Total: 12019-02-08 22:40:43.259 DEBUG [10001] [e5c47fa7c79b461a806c2d6135d485c2] xxx.mapper.CodeCombinationsMapper.selectOneBySegmentList - ==&gt; Preparing: select c.* from XXGL_CODE_COMBINATIONS c WHERE c.ENABLED_FLAG = 'Y' and c.SEGMENT1 = ? and c.SEGMENT2 = ? and c.SEGMENT3 = ? and c.SEGMENT4 = ? and c.SEGMENT5 = ? and c.SEGMENT6 = ? and c.SEGMENT7 = ? 2019-02-08 22:40:43.259 DEBUG [10001] [e5c47fa7c79b461a806c2d6135d485c2] xxx.mapper.CodeCombinationsMapper.selectOneBySegmentList - ==&gt; Parameters: 050(String), 0(String), 71205(String), S101005(String), 50010(String), 1101(String), I101(String)2019-02-08 22:40:43.263 DEBUG [10001] [e5c47fa7c79b461a806c2d6135d485c2] xxx.mapper.CodeCombinationsMapper.selectOneBySegmentList - &lt;== Total: 12019-02-08 22:40:44.284 DEBUG [10001] [e5c47fa7c79b461a806c2d6135d485c2] xxx.mapper.CodeCombinationsMapper.selectOneBySegmentMap - ==&gt; Preparing: select c.* from XXGL_CODE_COMBINATIONS c WHERE c.ENABLED_FLAG = ? and c.SEGMENT1 = ? and c.SEGMENT2 = ? and c.SEGMENT3 = ? and c.SEGMENT4 = ? and c.SEGMENT5 = ? and c.SEGMENT6 = ? and c.SEGMENT7 = ? /* 2 */ and c.SEGMENT1 = ? /* 2 */ and c.SEGMENT2 = ? /* 2 */ and c.SEGMENT3 = ? /* 2 */ and c.SEGMENT4 = ? /* 2 */ and c.SEGMENT5 = ? /* 2 */ and c.SEGMENT6 = ? /* 2 */ and c.SEGMENT7 = ? 2019-02-08 22:40:44.284 DEBUG [10001] [e5c47fa7c79b461a806c2d6135d485c2] xxx.mapper.CodeCombinationsMapper.selectOneBySegmentMap - ==&gt; Parameters: Y(String), 050(String), 0(String), 71205(String), S101005(String), 50010(String), 1101(String), I101(String), 050(String), 0(String), 71205(String), S101005(String), 50010(String), 1101(String), I101(String)2019-02-08 22:40:44.289 DEBUG [10001] [e5c47fa7c79b461a806c2d6135d485c2] xxx.mapper.CodeCombinationsMapper.selectOneBySegmentMap - &lt;== Total: 1 json 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374[&#123;"combinationId": 1000,"codeCombinationId": 300000003238305,"accountType": "E","enabledFlag": "Y","segment1": "050","segment2": "0","segment3": "71205","segment4": "S101005","segment5": "50010","segment6": "1101","segment7": "I101","segment8": "0","segment9": "0","segment10": "0","segment11": "0","segment12": "0","segment13": null,"segment14": null,"segment15": null,"segment16": null,"segment17": null,"segment18": null&#125;,&#123;"combinationId": 1000,"codeCombinationId": 300000003238305,"accountType": "E","enabledFlag": "Y","segment1": "050","segment2": "0","segment3": "71205","segment4": "S101005","segment5": "50010","segment6": "1101","segment7": "I101","segment8": "0","segment9": "0","segment10": "0","segment11": "0","segment12": "0","segment13": null,"segment14": null,"segment15": null,"segment16": null,"segment17": null,"segment18": null&#125;,&#123;"combinationId": 1000,"codeCombinationId": 300000003238305,"accountType": "E","enabledFlag": "Y","segment1": "050","segment2": "0","segment3": "71205","segment4": "S101005","segment5": "50010","segment6": "1101","segment7": "I101","segment8": "0","segment9": "0","segment10": "0","segment11": "0","segment12": "0","segment13": null,"segment14": null,"segment15": null,"segment16": null,"segment17": null,"segment18": null&#125;] æ„Ÿè°¢https://blog.csdn.net/s592652578/article/details/52871884]]></content>
      <categories>
        <category>Java</category>
        <category>MyBatis</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>MyBatis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[èˆªå¤©ä¿¡æ¯é‡‘ç¨ç›˜æ¥å£ js è°ƒç”¨]]></title>
    <url>%2F2018%2F12%2F02%2Fessay%2Fgold-tax-js%2F</url>
    <content type="text"><![CDATA[èƒŒæ™¯ æœ€è¿‘é¡¹ç›®è¦æ±‚ä¸å•æœºç‰ˆçš„é‡‘ç¨ç›˜æ¥å£è¿›è¡Œå¯¹æ¥ï¼Œåœ¨è¿™é‡Œç®€å•è®°å½•ä¸€ä¸‹è‡ªå·±çš„å¼€å‘ç»éªŒï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©åˆ°æœ‰éœ€è¦çš„äºº PSï¼šæ¥å£ä½¿ç”¨ js å¯¹æ¥ï¼Œä»…æ”¯æŒ ie æµè§ˆå™¨ã€‚ å‰ç½®æ¡ä»¶åœ¨è¿›è¡Œå¼€å‘æ—¶å€™éœ€è¦æœ‰ä¸€äº›å‰ç½®æ¡ä»¶ ie æµè§ˆå™¨ å¼€å¯ activeX æ§ä»¶ è®¾ç½® â€“&gt; Internet é€‰é¡¹ â€“&gt; å®‰å…¨ â€“&gt; è‡ªå®šä¹‰çº§åˆ« æŠŠ activeX ç›¸å…³è®¾ç½®å‹¾ä¸Š å¯å‚è€ƒ: ç®¡ç†å‘˜èº«ä»½è¿è¡Œè°ƒè¯• å¦‚æœå¼€ç¥¨è½¯ä»¶å®‰è£…åˆ°æœ¬åœ° Cç›˜ éœ€è¦ä½¿ç”¨ç®¡ç†å‘˜æ‰“å¼€ ie æµè§ˆå™¨ï¼Œç„¶åå†è¿›è¡Œè°ƒè¯• é‡‘ç¨ç›˜å®‰è£… è¦ç¡®ä¿é‡‘ç¨ç›˜å®‰è£…å‡†ç¡®å®‰è£…äº†TaxCardX.dll é€šç”¨ jsä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395/** èˆªä¿¡é‡‘ç¨ç›˜ç›¸å…³function */var goldTax = &#123; /** * ä½¿ç”¨å‰å…ˆåˆ¤æ–­æ˜¯å¦æ˜¯ieæµè§ˆå™¨ * @return true/false */ isIE: function () &#123; if(!!window.ActiveXObject || "ActiveXObject" in window) return true; else return false; &#125;, /** * å¼€å¯é‡‘ç¨ç›˜ * @param certPassword å•æœºç‰ˆä¸ºè¯ä¹¦å£ä»¤ æœåŠ¡å™¨ç‰ˆä¸ºåœ°å€ ç•™ç©ºåˆ™è¯»å–å¼€ç¥¨BINæ–‡ä»¶ä¸‹cert.txt * @return * &lt;pre&gt; * &#123; * 'success': true/false, // æˆåŠŸæˆ–è€…å¤±è´¥ * 'code': -1/å…¶ä»–, // é”™è¯¯ç ï¼Œ-1 ä¸ºç³»ç»Ÿé”™è¯¯ * 'msg': 'xxx', // é”™è¯¯ä¿¡æ¯ * 'data': &#123;&#125; // æ¥å£è¿”å›ç›¸å…³æ•°æ® * &#125; * &lt;/pre&gt; */ openCard: function (certPassword) &#123; var result = &#123; 'success': false, 'code': -1, 'msg': '', 'data': &#123;&#125; &#125;; try &#123; goldTax.card = new ActiveXObject("TaxCardX.GoldTax"); // å•æœºç‰ˆä¸ºè¯ä¹¦å£ä»¤ æœåŠ¡å™¨ç‰ˆä¸ºåœ°å€ ç•™ç©ºåˆ™è¯»å–å¼€ç¥¨BINæ–‡ä»¶ä¸‹cert.txt if(typeof certPassword != 'undefined') &#123; goldTax.card.CertPassword = certPassword; &#125; // å¼€å¯é‡‘ç¨ç›˜ goldTax.card.OpenCard(); result.code = goldTax.card.RetCode; result.msg = goldTax.card.RetMsg; // 1011 å¼€å¯æˆåŠŸ if (result.code == 1011) &#123; result.success = true; result.data = &#123; RetCode: goldTax.card.RetCode, /* RetCode - çŠ¶æ€ç ï¼Œ 1011 å¼€å¯æˆåŠŸ */ RetMsg: goldTax.card.RetMsg, /* RetMsg çŠ¶æ€ä¿¡æ¯ */ InvLimit: goldTax.card.InvLimit, /* InvLimit â€“ å¼€ç¥¨é™é¢, é‡‘ç¨å¡å‘ç¥¨å¼€å…·ä»·ç¨åˆè®¡é™é¢ */ TaxCode: goldTax.card.TaxCode, /* TaxCode æœ¬å•ä½ç¨å· */ TaxClock: goldTax.card.TaxClock, /* TaxClock â€“ é‡‘ç¨å¡æ—¶é’Ÿ */ MachineNo: goldTax.card.MachineNo, /* MachineNo â€“ å¼€ç¥¨æœºå·ç ï¼Œä¸»å¼€ç¥¨æœºä¸º 0 */ IsInvEmpty: goldTax.card.IsInvEmpty, /* IsInvEmpty â€“ æœ‰ç¥¨æ ‡å¿—ï¼Œ0ä¸ºé‡‘ç¨å¡ä¸­æ— å¯å¼€å‘ç¥¨ï¼Œ1ä¸ºæœ‰ç¥¨ */ IsRepReached: goldTax.card.IsRepReached, /* IsRepReached â€“ æŠ„ç¨æ ‡å¿—ï¼Œ0ä¸ºæœªåˆ°æŠ„ç¨æœŸï¼Œ1ä¸ºå·²åˆ°æŠ„ç¨æœŸ */ IsLockReached: goldTax.card.IsLockReached, /* IsLockReached â€“ é”æ­»æ ‡å¿—ï¼Œ0ä¸ºæœªåˆ°é”æ­»æœŸï¼Œ1ä¸ºå·²åˆ°é”æ­»æœŸ */ &#125;; &#125; else &#123; result.success = false; &#125; &#125; catch (e) &#123; result.success = false; result.code = -1; result.msg = 'ActiveX Error, ' + e.description; &#125; return result; &#125;, /** * å…³é—­é‡‘ç¨ç›˜ * @return * &lt;pre&gt; * &#123; * 'success': true/false, // æˆåŠŸæˆ–è€…å¤±è´¥ * 'code': -1/å…¶ä»–, // é”™è¯¯ç ï¼Œ-1 ä¸ºç³»ç»Ÿé”™è¯¯ * 'msg': 'xxx' // é”™è¯¯ä¿¡æ¯ * &#125; * &lt;/pre&gt; */ closeCard: function() &#123; var result = &#123; 'success': false, 'code': -1, 'msg': '' &#125;; if (typeof goldTax.card != 'undefined') &#123; try &#123; goldTax.card.closeCard(); result.code = goldTax.card.RetCode; result.msg = goldTax.card.RetMsg; // RetCode 9000 è°ƒç”¨æˆåŠŸï¼Œå…¶ä»–å¤±è´¥ if (result.code == 9000) &#123; result.success = true; &#125; else &#123; result.success = false; &#125; &#125; catch (e) &#123; result.success = false; result.code = -1; result.msg = 'ActiveX Error, ' + e.description; &#125; return result; &#125; &#125;, /** * æŸ¥è¯¢åº“å­˜å‘ç¥¨ * @param invKind å‘ç¥¨ç§ç±» * @return * &lt;pre&gt; * &#123; * 'success': true/false, // æˆåŠŸæˆ–è€…å¤±è´¥ * 'code': -1/å…¶ä»–, // é”™è¯¯ç ï¼Œ-1 ä¸ºç³»ç»Ÿé”™è¯¯ * 'msg': 'xxx', // é”™è¯¯ä¿¡æ¯ * 'data': &#123;&#125; // æ¥å£è¿”å›ç›¸å…³æ•°æ® * &#125; * &lt;/pre&gt; */ invoiceInventory: function(invKind) &#123; var result = &#123; 'success': false, 'code': -1, 'msg': '', 'data': &#123;&#125; &#125;; try &#123; if (typeof goldTax.card != 'undefined') &#123; goldTax.card.InfoKind = invKind; goldTax.card.GetInfo(); result.code = goldTax.card.RetCode; result.msg = goldTax.card.RetMsg; // RetCode 3011 è¯»å–æˆåŠŸï¼Œå…¶ä»–å¤±è´¥ if (result.code == 3011) &#123; result.success = true; result.data = &#123; RetCode: goldTax.card.RetCode, /* RetCode - çŠ¶æ€ç ï¼Œ 3011 è¯»å–æˆåŠŸï¼Œå…¶ä»–å¤±è´¥ */ RetMsg: goldTax.card.RetMsg, /* RetMsg çŠ¶æ€ä¿¡æ¯ */ InfoTypeCode: goldTax.card.InfoTypeCode, /* è¦å¼€å…·å‘ç¥¨çš„åä½ä»£ç ã€‚ä¸ºç©ºæˆ–å…¨ä¸º0æ—¶ï¼Œè¡¨ç¤ºæ— å¯ç”¨å‘ç¥¨ */ InfoNumber: goldTax.card.InfoNumber, /* è¦å¼€å…·å‘ç¥¨çš„å·ç  */ InvStock: goldTax.card.InvStock, /* å‰©ä½™çš„å¯ç”¨å‘ç¥¨ä»½æ•° */ TaxClock: goldTax.card.TaxClock /* é‡‘ç¨ç›˜æ—¶é’Ÿ */ &#125;; &#125; else &#123; result.success = false; &#125; &#125; else &#123; result.success = false; result.code = -1; result.msg = 'Please Open Card First'; &#125; &#125; catch (e) &#123; result.success = false; result.code = -1; result.msg = 'ActiveX Error, ' + e.description; &#125; return result; &#125;, /** * å‘ç¥¨æ ¡éªŒ * @param o ä¼ å…¥å‘ç¥¨ä¿¡æ¯ * @return * &lt;pre&gt; * &#123; * 'success': true/false, // æˆåŠŸæˆ–è€…å¤±è´¥ * 'code': -1/å…¶ä»–, // é”™è¯¯ç ï¼Œ-1 ä¸ºç³»ç»Ÿé”™è¯¯ * 'msg': 'xxx', // é”™è¯¯ä¿¡æ¯ * 'data': &#123;&#125; // æ¥å£è¿”å›ç›¸å…³æ•°æ® * &#125; * &lt;/pre&gt; */ invoiceVeriferify: function(o) &#123; return goldTax.inner.invoice(1, o); &#125;, /** * å‘ç¥¨å¼€å…· * @param o ä¼ å…¥å‘ç¥¨ä¿¡æ¯ * @return * &lt;pre&gt; * &#123; * 'success': true/false, // æˆåŠŸæˆ–è€…å¤±è´¥ * 'code': -1/å…¶ä»–, // é”™è¯¯ç ï¼Œ-1 ä¸ºç³»ç»Ÿé”™è¯¯ * 'msg': 'xxx', // é”™è¯¯ä¿¡æ¯ * 'data': &#123;&#125; // æ¥å£è¿”å›ç›¸å…³æ•°æ® * &#125; * &lt;/pre&gt; */ invoicing: function(o) &#123; return goldTax.inner.invoice(0, o); &#125;, /** * å‘ç¥¨æ‰“å° * @param o ä¼ å…¥å‘ç¥¨ä¿¡æ¯ * @return * &lt;pre&gt; * &#123; * 'success': true/false, // æˆåŠŸæˆ–è€…å¤±è´¥ * 'code': -1/å…¶ä»–, // é”™è¯¯ç ï¼Œ-1 ä¸ºç³»ç»Ÿé”™è¯¯ * 'msg': 'xxx' // é”™è¯¯ä¿¡æ¯ * &#125; * &lt;/pre&gt; */ printInv: function(o) &#123; var result = &#123; 'success': false, 'code': -1, 'msg': '' &#125;; try &#123; if (typeof goldTax.card != 'undefined') &#123; goldTax.card.InfoKind = o.InfoKind; /* å‘ç¥¨ç§ç±»ï¼ˆ0ï¼šä¸“ç”¨å‘ç¥¨ 2ï¼šæ™®é€šå‘ç¥¨ 11ï¼šè´§ç‰©è¿è¾“ä¸šå¢å€¼ç¨ä¸“ç”¨å‘ç¥¨ 12ï¼šæœºåŠ¨è½¦é”€å”®ç»Ÿä¸€å‘ç¥¨ï¼‰ */ goldTax.card.InfoTypeCode = o.InfoTypeCode; /* è¦æ‰“å°å‘ç¥¨çš„åä½ä»£ç  */ goldTax.card.InfoNumber = o.InfoNumber; /* è¦æ‰“å°å‘ç¥¨çš„å·ç  */ goldTax.card.GoodsListFlag = o.GoodsListFlag; /* é”€è´§æ¸…å•æ ‡å¿—ï¼Œ0 â€“ æ‰“å°å‘ç¥¨ï¼Œ1 â€“ æ‰“å°é”€è´§æ¸…å• */ goldTax.card.InfoShowPrtDlg = o.InfoShowPrtDlg; /* æ‰“å°æ—¶æ˜¯å¦æ˜¾ç¤ºè¾¹è·ç¡®è®¤å¯¹è¯æ¡†ï¼Œ0 â€“ ä¸å‡ºç°ï¼Œ1 â€“ å‡ºç° */ // è°ƒç”¨æ¥å£ goldTax.card.PrintInv(); result.code = goldTax.card.RetCode; result.msg = goldTax.card.RetMsg; // RetCode 5011 æ‰“å°æˆåŠŸï¼Œ5001 â€“ æœªæ‰¾åˆ°å‘ç¥¨æˆ–æ¸…å•ï¼Œ5012 â€“ æœªæ‰“å°ï¼Œ5013 â€“ æ‰“å°å¤±è´¥ if (result.code == 5011) &#123; result.success = true; &#125; else &#123; result.success = false; &#125; &#125; else &#123; result.success = false; result.code = -1; result.msg = 'Please Open Card First'; &#125; &#125; catch (e) &#123; result.success = false; result.code = -1; result.msg = 'ActiveX Error, ' + e.description; &#125; return result; &#125;, /** * å·²å¼€å‘ç¥¨ä½œåºŸ * @param o ä¼ å…¥å‘ç¥¨ä¿¡æ¯ * @return * &lt;pre&gt; * &#123; * 'success': true/false, // æˆåŠŸæˆ–è€…å¤±è´¥ * 'code': -1/å…¶ä»–, // é”™è¯¯ç ï¼Œ-1 ä¸ºç³»ç»Ÿé”™è¯¯ * 'msg': 'xxx' // é”™è¯¯ä¿¡æ¯ * &#125; * &lt;/pre&gt; */ cancelInv: function(o) &#123; var result = &#123; 'success': false, 'code': -1, 'msg': '' &#125;; try &#123; if (typeof goldTax.card != 'undefined') &#123; goldTax.card.InfoKind = o.InfoKind; /* å‘ç¥¨ç§ç±»ï¼ˆ0ï¼šä¸“ç”¨å‘ç¥¨ 2ï¼šæ™®é€šå‘ç¥¨ 11ï¼šè´§ç‰©è¿è¾“ä¸šå¢å€¼ç¨ä¸“ç”¨å‘ç¥¨ 12ï¼šæœºåŠ¨è½¦é”€å”®ç»Ÿä¸€å‘ç¥¨ï¼‰ */ goldTax.card.InfoTypeCode = o.InfoTypeCode; /* è¦ä½œåºŸå‘ç¥¨çš„åä½æˆ–åäºŒä½ä»£ç  */ goldTax.card.InfoNumber = o.InfoNumber; /* è¦ä½œåºŸå‘ç¥¨çš„å·ç  */ // è°ƒç”¨æ¥å£ goldTax.card.CancelInv(); result.code = goldTax.card.RetCode; result.msg = goldTax.card.RetMsg; // RetCode 6011 æ‰“å°æˆåŠŸï¼Œ6001 â€“ å½“æœˆå‘ç¥¨åº“æœªæ‰¾åˆ°è¯¥å‘ç¥¨ï¼Œ6002 â€“ è¯¥å‘ç¥¨å·²ç»ä½œåºŸï¼Œ6012 â€“ ä½œåºŸå¤±è´¥ï¼Œ6013 â€“ ä½œåºŸå¤±è´¥(å¼‚å¸¸) if (result.code == 6011) &#123; result.success = true; &#125; else &#123; result.success = false; &#125; &#125; else &#123; result.success = false; result.code = -1; result.msg = 'Please Open Card First'; &#125; &#125; catch (e) &#123; result.success = false; result.code = -1; result.msg = 'ActiveX Error, ' + e.description; &#125; return result; &#125;, // å†…éƒ¨æ–¹æ³• inner: &#123; /** * invoice æ¥å£ * @param checkEWM é»˜è®¤ä¸º0ï¼ˆ0: å‘ç¥¨å¼€å…·, 1: å‘ç¥¨æ ¡éªŒ, 2: ç©ºç™½ä½œåºŸ) * @param o ä¼ å…¥å‘ç¥¨ä¿¡æ¯ * @return * &lt;pre&gt; * &#123; * 'success': true/false, // æˆåŠŸæˆ–è€…å¤±è´¥ * 'code': -1/å…¶ä»–, // é”™è¯¯ç ï¼Œ-1 ä¸ºç³»ç»Ÿé”™è¯¯ * 'msg': 'xxx', // é”™è¯¯ä¿¡æ¯ * 'data': &#123;&#125; // æ¥å£è¿”å›ç›¸å…³æ•°æ® * &#125; * &lt;/pre&gt; */ invoice: function(checkEWM, o) &#123; var result = &#123; 'success': false, 'code': -1, 'msg': '', 'data': &#123;&#125; &#125;; try &#123; if (typeof goldTax.card != 'undefined') &#123; // CheckEWMå€¼é»˜è®¤ä¸º0ï¼ˆä¸º1æ—¶ç”¨äºå‘ç¥¨æ ¡éªŒã€‚ // æ³¨æ„ï¼šä¸€æ—¦CheckEWMå€¼ç½®1ç”¨äºå‘ç¥¨æ ¡éªŒä¹‹åï¼Œ //å¦‚æœè¦å†è¿›è¡Œå‘ç¥¨å¼€å…·å¿…é¡»æ‰‹åŠ¨å°†CheckEWMå€¼ç½®ä¸º0ï¼Œå¦åˆ™Invoice()æ–¹æ³•çš„åŠŸèƒ½å°†ä¸€ç›´å¤„äºå‘ç¥¨æ ¡éªŒçŠ¶æ€ï¼‰ goldTax.card.CheckEWM = checkEWM; goldTax.card.InvInfoInit(); /* åˆå§‹åŒ–å‘ç¥¨æŠ¬å¤´ä¿¡æ¯ */ goldTax.card.InfoKind = o.InfoKind; /* å¢å€¼ç¨æ™®é€šå‘ç¥¨2 ä¸“ç¥¨0 */ goldTax.card.InfoClientName = o.InfoClientName; /* è´­æ–¹åç§° */ goldTax.card.InfoClientTaxCode = o.InfoClientTaxCode; /* è´­æ–¹ç¨å· */ goldTax.card.InfoClientBankAccount = o.InfoClientBankAccount; /* è´­æ–¹å¼€æˆ·è¡ŒåŠè´¦å· */ goldTax.card.InfoClientAddressPhone = o.InfoClientAddressPhone; /* è´­æ–¹åœ°å€ç”µè¯ */ goldTax.card.InfoSellerBankAccount = o.InfoSellerBankAccount; /* é”€æ–¹å¼€æˆ·è¡ŒåŠè´¦å· */ goldTax.card.InfoSellerAddressPhone = o.InfoSellerAddressPhone; /* é”€æ–¹åœ°å€ç”µè¯ */ // å¦‚æœæ˜¯å¤šå•†å“å¤šç¨ç‡ ç¨ç‡åº”è¯¥æ”¾åˆ°ä¸‹é¢å•†å“ä¿¡æ¯å¾ªç¯é‡Œ if (typeof o.InfoTaxRate != 'undefined' &amp;&amp; o.InfoTaxRate) &#123; goldTax.card.InfoTaxRate = o.InfoTaxRate; /* ç¨ç‡,(å·²æˆæƒçš„ç¨ç‡ï¼Œ 17% ä¼ 17) */ &#125; goldTax.card.InfoNotes = o.InfoNotes; /* å¤‡æ³¨ */ goldTax.card.InfoInvoicer = o.InfoInvoicer; /* å¼€ç¥¨äºº */ // å¤æ ¸äººï¼Œå¯ä¸ºç©º if (typeof o.InfoChecker != 'undefined' &amp;&amp; o.InfoChecker) &#123; goldTax.card.InfoChecker = o.InfoChecker; &#125; // æ”¶æ¬¾äººï¼Œå¯ä¸ºç©º if (typeof o.InfoCashier != 'undefined' &amp;&amp; o.InfoCashier) &#123; goldTax.card.InfoCashier = o.InfoCashier; &#125; // å¦‚ä¸ä¸ºç©ºï¼Œåˆ™å¼€å…·é”€è´§æ¸…å•ï¼Œæ­¤ä¸ºå‘ç¥¨ä¸Šå•†å“åç§°æ çš„æ¸…å•ä¿¡æ¯ï¼Œåº”ä¸ºâ€œ(è¯¦è§é”€è´§æ¸…å•)â€å­—æ · if (typeof o.InfoListName != 'undefined' &amp;&amp; o.InfoListName) &#123; goldTax.card.InfoListName = o.InfoListName; &#125; // æ¸…ç©ºå•†å“æ˜ç»†åˆ—è¡¨ goldTax.card.ClearInvList(); // éå†è¡Œ $.each(o.InvList, function(i, v) &#123; goldTax.card.InvListInit(); /* åˆå§‹åŒ–å‘ç¥¨æ˜ç»†ä¿¡æ¯å„é¡¹å±æ€§ */ goldTax.card.ListGoodsName = v.ListGoodsName; /* å•†å“æˆ–åŠ³åŠ¡åç§° */ goldTax.card.ListTaxItem = v.ListTaxItem; /* ç¨ç›®ï¼Œ4ä½æ•°å­—ï¼Œå•†å“æ‰€å±ç±»åˆ« */ goldTax.card.ListStandard = v.ListStandard; /* è§„æ ¼å‹å· */ // è®¡é‡å•ä½ï¼Œå¦‚è®¡é‡å•ä½ä¸ºç©ºï¼Œåˆ™å¿½ç•¥æ•°é‡å’Œå•ä»· if (typeof v.ListUnit != 'undefined' &amp;&amp; v.ListUnit) &#123; goldTax.card.ListUnit = v.ListUnit; &#125; // å»ºè®®ä¼ å…¥æ•°é‡å’Œå«ç¨å•ä»·æˆ–å«ç¨é‡‘é¢ ç”±æ¥å£è®¡ç®—å¸¦å°æ•°çš„ç¨é¢ è§„é¿è¯¯å·® goldTax.card.ListNumber = v.ListNumber; // æ•°é‡ goldTax.card.ListPrice = v.ListPrice; // å•ä»· // é‡‘é¢ï¼Œå¯ä»¥ä¸ä¼ (ä¸º0)ï¼Œç”±æ¥å£è½¯ä»¶è®¡ç®—ï¼Œå¦‚ä¼ å…¥åˆ™åº”ç¬¦åˆè®¡ç®—å…³ç³» if (typeof v.ListAmount != 'undefined' &amp;&amp; v.ListAmount ) &#123; goldTax.card.ListAmount = v.ListAmount; &#125; goldTax.card.ListPriceKind = v.ListPriceKind; /* å«ç¨ä»·æ ‡å¿—ï¼Œå•ä»·å’Œé‡‘é¢çš„ç§ç±»ï¼Œ 0ä¸ºä¸å«ç¨ä»·ï¼Œ1ä¸ºå«ç¨ä»· */ // ç¨é¢å¯ä»¥ä¸ä¼ (ä¸º0)ï¼Œç”±æ¥å£è½¯ä»¶è®¡ç®—ï¼Œå¦‚ä¼ å…¥åˆ™åº”ç¬¦åˆè®¡ç®—å…³ç³» if (typeof v.ListTaxAmount != 'undefined' &amp;&amp; v.ListTaxAmount) &#123; goldTax.card.ListTaxAmount = v.ListTaxAmount; &#125; // æ·»åŠ ä¸€è¡Œ goldTax.card.AddInvList(); &#125;); // è°ƒç”¨æ¥å£ goldTax.card.Invoice(); result.code = goldTax.card.RetCode; result.msg = goldTax.card.RetMsg; // RetCode 4011 å¼€ç¥¨æˆåŠŸï¼Œå…¶ä»–å¤±è´¥ if (result.code == 4011) &#123; result.success = true; result.data = &#123; RetCode: goldTax.card.RetCode, /* RetCode - çŠ¶æ€ç ï¼Œ 3011 è¯»å–æˆåŠŸï¼Œå…¶ä»–å¤±è´¥ */ RetMsg: goldTax.card.RetMsg, /* RetMsg çŠ¶æ€ä¿¡æ¯ */ InfoAmount: goldTax.card.InfoAmount , /* åˆè®¡ä¸å«ç¨é‡‘é¢ */ InfoTaxAmount: goldTax.card.InfoTaxAmount, /* åˆè®¡ç¨é¢ */ InfoInvDate: goldTax.card.InfoInvDate, /* å¼€ç¥¨æ—¥æœŸ */ InfMonth: goldTax.card.InfMonth, /* æ‰€å±æœˆä»½ */ InfoTypeCode: goldTax.card.InfoTypeCode, /* å‘ç¥¨åä½ä»£ç  */ InfoNumber: goldTax.card.InfoNumber, /* å‘ç¥¨å·ç  */ GoodsListFlag: goldTax.card.GoodsListFlag /* é”€è´§æ¸…å•æ ‡å¿—ï¼Œ0 â€“ æ— é”€è´§æ¸…å•ï¼Œ1 â€“ æœ‰é”€è´§æ¸…å• */ &#125;; &#125; else &#123; result.success = false; &#125; &#125; else &#123; result.success = false; result.code = -1; result.msg = 'Please Open Card First'; &#125; &#125; catch (e) &#123; result.success = false; result.code = -1; result.msg = 'ActiveX Error, ' + e.description; &#125; return result; &#125; &#125;&#125;; ç›¸å…³èµ„æ–™CSDN éœ€è¦ç§¯åˆ†ä¸‹è½½ é‡‘ç¨ é˜²ä¼ªç¨æ§ ç»„ä»¶æ¥å£ å¼€å‘æ–‡æ¡£ ä»£ç æ¡ˆä¾‹ æ²¡æœ‰ç§¯åˆ†çš„ æˆ³è¿™é‡Œ]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>ActiveX</tag>
        <tag>é‡‘ç¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2018%2F08%2F20%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
  </entry>
</search>
